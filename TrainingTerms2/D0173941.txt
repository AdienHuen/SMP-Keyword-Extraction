#什么/ry是/vshi网络虚拟化/giNV/nz和/ccSDN/gi？/w
话说/vn最近/t网络虚拟化/gi（/wnetworking virtualization/nz，/wnv/gi）/w和/ccsdn/gi真实/a热得/v发烫/nz，/w先/d谈一下/nz我/rr个人/n的/ude1理解/gi和/cc看法/n。/w由于/p没有/v实际/n玩/v过/uguo相应/vi的/ude1产品/gi，/w所以/c也/d只是/d停留/vi在/p理论/gi阶段/gi，/w而且/c尚/d在/p学习/gi中/f，/w有些/rz地方/n难以/d理解/gi甚至/d理解/gi错误/gi，/w因此/c，/w特地来/d和/cc大家/rr交流/gi一下/m。/w早/a在/p2009/nz年/qt就/d出现/v了/ulesdn/gi（/wsoftware defined networking/nz）/w的/ude1概念/gi，/w但/c最近/t才/d开始/v被/pbei众人/n所/usuo关注/v，/w主要/b还是/c因为/cgoogle/nz跳出/v来/vf表态/vi其/rz内部/f数据中心/gi所有/b网络/gi都/d开始/v采用/vopenflow/gi进行/vn控制/vn，/w将/dopenflow/gi从/p原本/d仅/d是/vshi学术性/n的/ude1东西/n瞬间/n推到/v了/ule商用/b领域/gi。/w第二个/nz劲爆/nz的/ude1消息/n就是/vvmware/gi大手笔/n12.6/nz个/q亿$/nz收掉/nz了/ule网络虚拟化/gi公司/nisnicira/nz。/wsdn/gi只是/d一个/mq理念/gi，/w归根结底/dl，/w她/rr是/vshi要/v实现/gi可编程/nz网络/gi，/w将/d原本/d封闭/gi的/ude1网络设备/gi控制/vn面/nf（/wcontrol plane/nz）/w完全/ad拿到/v“/w盒子/n”/w外边/f，/w由/p集中/v的/ude1控制器/n来/vf管理/gi，/w而/cc该/rz控制器/n是/vshi完全/ad开放/gi的/ude1，/w因此/c你/rr可以/v定义/gi任何/rz想/v实现/gi的/ude1机制/gi和/cc协议/gi。/w比如/v你/rr不/d喜欢/gi交换机/gi//nz路由器/gi自身/rr所/usuo内置/vn的/ude1tcp/gi协议/gi，/w希望/v通过/p编程/gi的/ude1方式/n对/p其/rz进行/vn修改/gi，/w甚至/d去掉/v它/rr，/w完全/ad由/p另一个/nz控制协议/nz取代/v也/d是/vshi可以/v的/ude1。/w正是/v因为/c这种/r开放性/n，/w使得/vi网络/gi的/ude1发展/gi空间/n变为/v无限/b可能/v，/w换句话说/c，/w只有/c你/rr想不到/vl，/w没有/v你/rr做/v不到/v。/w那/rzvsdn/gi为什么/ryv会/v和/ccnv/gi扯上/nz关系/gi呢/y？/w其实/d他们/rr之间/f并/cc没有/v因果关系/gm，/wsdn/gi不是/c为/p实现/gi网络虚拟化/gi而/cc设计/gi的/ude1，/w但/c正式/ad因为/csdn/gi架构/gi的/ude1先进性/n，/w使得/vi网络虚拟化/gi的/ude1任务/gi也/d得以/v实现/gi。/w很/d多/a人/n（/w包括/v我/rr自己/rr）/w在/p最初/d接触/vsdn/gi的/ude1时候/n，/w甚至/d认为/v她/rr就是/vnv/gi，/w但/c实际上/dsdn/gi的/ude1目光/n要/v远大/a得/ude3多/a，/w用/p句/q数学/gi术语/gi来说/uls就是/v“/wnv/gi包含/v于/psdn/gi，/wsdn/gi包含/vnv/gi”/w。/w再来/d看看/vnv/gi，/w为什么/ryvnv/gi会/v如此/rzv火爆/a，/w归根结底/dl还是/c因为/c云计算/gi的/ude1崛起/v。/w服务器/gi//nz存储/gi虚拟/gi化为/v云计算/gi提供/v了/ule基础架构/n支撑/v，/w也/d已经/d有/vyou成熟/a的/ude1产品/gi和/cc解决方案/gi，/w但/c你/rr会/v发现/v一个/mq问题/gi，/w即便如此/l，/w虚拟机/gi的/ude1迁移/gi依然/d不够/a灵活/a，/w例如/vvmware vmotion/nz可以/v做到/vvm/nz在线/vn迁移/gi，/wemc vplex/nz可以/v做到/v双活/nz站点/gi，/w但/c虚拟机/gi的/ude1网络/gi（/w地址/gi、/w策略/gi、/w安全/gi、/wvlan/nz、/wacl/nz等等/udeng）/w依然/d死死地/z与/cc物理/n设备/gi耦合/vn在/p一起/s，/w即便/c虚拟机/gi从/p一个子/nz网/n成功/a地/ude2迁移/gi到/v另一个/nz子网/gm，/w但/c你/rr依然/d需要/v改变/v其/rzip/gi地址/gi，/w而/cc这/rzv一/nz过程/gi，/w必然/d会/v有/vyou停机/vi。/w另外/c，/w很/d多/a策略/gi通常/d也/d是/vshi基于/p地址/gi的/ude1，/w地址/gi改/v了/ule，/w策略/gi有得/v改/v，/w所以/c依然/d是/vshi手动活/nz，/w繁杂/a且/c易/ad出错/gi。/w所以/c说/v，/w要/v实现/gifull vm migration/nz，/w即/v不/d需要/v更改/gi任何/rz现有/v配置/gi，/w把/pba逻辑/n对象/gi（/w比如/vip/gi地址/gi）/w与/cc物理/n网络设备/gi去耦/v（/wdecouple/nz）/w才/d行/ng。/w这/rzv是/vshi一个/mq举例/gi，/w总而言之/c，/w目的/gi就是/v实现/givm migration anywhere within the datacenter non/nz-/nzdisruptively/nz，/w尤其/d是/vshi在/p云/gi这样/rzv的/ude1多/a租户/gi（/wmulti/nz-/nztanency/nz）/w环境/n里/f，/w为/p每/rz一个/mq租户/gi提供/v完整/a的/ude1网络/gi视图/gi，/w实现/gi真正/d的/ude1敏捷/gi商务/gi模型/gi，/w才能/n吸引/v更多/ad人/n投身于/v云计算/gi。/wsdn/gi不是/c网络虚拟化/gi的/ude1唯一/b做法/n，/wnetwork overly/nz（/wmac in mac/nz,/nz ip in ip/nz）/w的/ude1方式/n也/d是/vshi现在/t很/d多/a公司/nis实际/n在/p使用/gi的/ude1，/w比如/vmicrosoft nvgre/nz、/wcisco/gi//nzvmware vxlan/nz、/wcisco otv/nz、/wnicira stt/nz等/udeng。/w事实上/bloverly network/nz乎/y已经/d成为/vnv/gi实现/gi的/ude1标准/gi做法/n，/wsdn/gi模型/gi下/f的/ude1nv/gi实现/gi目前/t更多/ad的/ude1是/vshi在/p学术/n、/w研究/gi领域/gi。/w新技术/nz总是/d伴随/v大量/m的/ude1竞争者/n，/w都/d想/v在/p此/rzs分一杯羹/nz，/w甚至/d最后/f成为/v标准/gi。/w好戏/n才/d刚刚/d上演/v，/w相信/v会/v越发/d精彩/a。/w个人/n觉得/v这/rzv是/vshi一个/mq非常/d有意思/al的/ude1话题/n，/w希望/v和/cc大家/rr交流心得/l，/w互相学习/n./nznv/gi的/ude1目标/gi就是/v如何/ryv呈现/v一个/mq完全/ad的/ude1网络/gi给/p云/gi环境/n中的/v每一个/nz租户/gi，/w租户/gi可能会/nz要求/n使用/gi任何/rz其/rz希望/v使用/gi的/ude1ip/gi地址/gi段/q，/w任何/rz拓扑/n，/w当然/d更/d不/d希望/v在/p迁移/gi至/p公共/b云/gi的/ude1情况下/nz需要/v更改/gi其/rz原本/d的/ude1ip/gi地址/gi，/w因为/c这/rzv意味着/v停机/vi。/w所以/c，/w客户/n希望/v有一个/nz安全/gi且/c完全/ad隔离/vn的/ude1网络/gi环境/n，/w保证/v不会/v与/cc其他/rzv租户/gi产生/v冲突/gi。/w既然/cvmotion/nz之类/rz的/ude1功能/gi能够/v让/v虚拟机/gi在/p云中/ns自由/a在线/vn漂移/vi，/w那/rzv网络/gi是否/v也/d能/v随之/d漂移/vi呢/y？/w这里/rzs简单/a介绍/gi下/f微软/ntc的/ude1hyper/nz-/nzv networking virtualization/nz，/w到/v不是/c因为/c技术/gi有/vyou多/a先进/a，/w只不过/d他/rr的/ude1实现/gi细节/gi比较/gi公开/ad，/w而/cc其它/rz公司/nis的/ude1具体做法/nz相对/d封闭/gi，/w难以/d举例/gi。/w其实/d微软/ntc的/ude1思路/gi很/d简单/a，/w就是/v将/d原本/d虚拟机/gi的/ude1二层/nzframe/nz通过/pnvgre/nz再次/d封装/gi到/v ip packet/nz中/f进行/vn传输/gi，/w使得/vi交换机/gi能够/v通过/p识别/ginvgre/nz的/ude1key/gi字段/gi来/vf判断/gi数据包/gi的/ude1最终/d目的地/n。/w这/rzv其实/d就是/v一个/mqnetwork overlay/nz的/ude1做法/n，/w它/rr将/d虚拟/gi网络/gi与/cc物理/n网络/gi进行/vn了/ule分离/vi。/w试想/v，/w公司/nisa/nz和/cc公司/nisb/nz都/d迁移/gi到/v公有云/gi且/c就/d那么/c巧/a，/w他们/rr的/ude1一些/m虚拟机/gi连接/gi到/v了/ule同一个/b物理/n交换机/gi上/f，/w现在/t的/ude1问题/gi是/vshi，/w他们/rr各自/rr的/ude1虚拟机/gi原本/d使用/gi的/ude1私有/giip/gi段/q是/vshi一样/uyy的/ude1，/w如果/c没有/vvlan/nz就/d会/v导致/giip/gi冲突/gi。/w但/c现在/t看来/v，/w这/rzv已经/d不是/c问题/gi，/w因为/c虚拟机/gi之间/f的/ude1通信/gi都/d要/v通过/pnvgre/nz的/ude1封装/gi，/w而/cc新的/aip/gi包在/v物理/n网络/gi上/f传输/gi时/qt是/vshi走/v物理地址/gi空间/n的/ude1，/w而/cc物理地址/gi空间/n是/vshi由/p云服务/gi提供者/n所/usuo独占/v的/ude1，/w因此/c不存在/nsip/gi冲突/gi的/ude1情况/n。/w总结/gi一/nz下/f就是/v，/w这里/rzs的/ude1网络虚拟化/gi可以/v认为/v是/vshiip/gi地址/gi虚拟化/gi，/w将/d虚拟/gi网络/gi的/ude1ip/gi与/cc物理/n网络/gi完全/ad分离/vi，/w这样/rzv做/v就/d可以/v避免/vip/gi冲突/gi，/w跨子网/nz在线/vn迁移/gi虚拟机/gi的/ude1问题/gi，/w微软/ntc的/ude1要求/n是/vshi：/w虚拟机/gi可以/v在/p数据中心/gi中/f任意/d移动/vn，/w而/cc客户/n不会/v有/vyou任何/rz感觉/gi，/w这种/r移动/vn能力/gi带来/v了/ule极大/a的/ude1灵活性/gi。/w详情/n微软/ntc的/ude1nv/gi资料/gi可/v点击/v：/w本站/n声明/gi：/w本站/n原创/b文章/gi可以/v转载/v，/w请/v注明/v来自/v