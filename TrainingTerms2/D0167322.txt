#【/wQQ/nz机器人/gi开发/gi】/w茉莉/nrfQQ/nz机器人/gi3./nzX/nz系列/n插件/gi开发/gi文档/gi
此/rzs插件/gi开发/gi文档/gi适用/vi于/p茉莉/nrfqq/gi机器人/gi3./nzx/nz系列/n版本/n插件/gi需要/v确定/v的/ude1信息/gi：/w1/nz、/w确定/v插件/gi的/ude1名字/n//nz类/gi文件/gi的/ude1类名/n//nz作者/nnt//nz指令/gi//nz说明/v//nz是否/v监控/gi所有/b消息/n等等/udeng2/nz、/w确定/v插件/gi的/ude1类型/gi，/w插件/gi要/v处理/vn哪些/ry消息/n插件/gi的/ude1基本/a构成/v：/w1/nz、/w插件/gi的/ude1类/gi文件/gi（/w必须/d继承/gi类/gi，/w并且/c类/gi中/f必须/d有/vyoumain/gi方法/gi，/wmain/gi方法/gi是/vshi插件/gi的/ude1入口/n方法/gi；/w类/gi文件/gi命名/v基本/a格式/gi：/w，/w去除/v文件名/gi后/f缀/v部分/n必须/d跟/p插件/gi的/ude1类名/n相同/a）/w2/nz、/w创建/gi插件/gi相关/vn信息/gi的/ude1sql/gi文件/gi（/wsql/gi文件名/gi现在/t必须/d是/vshiweb/gi./nzsql/gi，/w创建/gi插件/gi基本/a信息/gi的/ude1sql语句/gi都/d可以/v放在/v这个/rz文件/gi里/f，/w安装/gi时会/n自动/d执行/v这个/rzsql/gi文件/gi里面/f的/ude1sql语句/gi）/w处理/vn消息/n的/ude1流程/gi：/w怎个/r流程/gi可以/v分为/v机器人/gi系统/gi和/cc插件/gi系统/gi，/w机器人/gi系统/gi会/v不断/d的/ude1向/p腾讯/ntc发送/gi接口/gi请求/gi，/w从而/c不断/d的/ude1获取/giqq/gi消息/n，/w这些/rz特定/b消息/n（/w群/ng消息/n、/w好友/n消息/n和/cc加群/nz验证/v消息/n）/w都会/n在/p插件/gi系统/gi里/f跑/v一/nz遍/qv，/w然后/c根据/p处理结果/n让/v机器人/gi系统/gi是否/v做出/v响应/v其它/rz说明/v：/w1/nz、/w是否/v监控/gi所有/b消息/n：/w这个/rz表示/v是否/v所有/b的/ude1qq/gi消息/n都/d经过/p这个/rz插件/gi的/ude1main/gi方法/gi，/w在/p开发/gi一个/mq插件/gi之前/f，/w我们/rr可以/v根据/p插件/gi的/ude1作用/gi定义/gi它/rr是否/v需要/v监控/gi所有/b消息/n /x比如/v开发/gi一个/mq笑话/n插件/gi，/w插件/gi有/vyou3/nz个/q指令/gi，/w分别/d是/vshi笑话/n、/w冷笑话/nz和/cc暴走/nz笑话/n，/w那么/c这个/rz插件/gi只/d需要/v处理/vn笑话/n、/w冷笑话/nz和/cc暴走/nz笑话/n这/rzv3/nz个/q消息/n就/d可以/v了/ule，/w没有/v必要/a处理/vn其他/rzv的/ude1消息/n，/w因为/c其它/rz的/ude1消息/n跟/p这个/rz插件/gi根本/a不/d搭边/nz，/w总/b不能/v当/p消息/n是/vshi你/rr今天/t吃饭/vi了/ule吗/y，/w你/rr也/d回复/v一个/mq笑话/n吧/y；/w /x再/d比如/v开发/gi一个/mq类似/a防水墙/nz的/ude1插件/gi，/w对/p刷屏/nz、/w发布/gi广告/gi、/w漫骂/v等/udeng进行/vn相关/vn的/ude1处罚/vn，/w如果/c要/v实现/gi这个/rz功能/gi，/w那么/c这个/rz插件/gi需要/v处理/vn所有/b的/ude1消息/n了/ule，/w因为/c每/rz一条/nz消息/n都/d有可能/nz是/vshi广告/gi2/nz、/w插件/gi的/ude1指令/gi：/w每个/r插件/gi的/ude1指令/gi可以/v有/vyou多/a个/q，/w多/a个/q用/p|/nz隔开/v，/w一般/ad情况下/nz，/w如果/c插件/gi不是/c监控/gi所有/b消息/n，/w只有/cqq/gi消息/n跟/p指令/gi相关/vn，/w才/d会/v进入/v插件/gi的/ude1main/gi方法/gi3/nz、/w指令/gi的/ude1类型/gi：/w这个/rz跟/p插件/gi的/ude1指令/gi一/nz /x一对应/nz，/w多/a个/q也/d用/p隔开/v。/w指令/gi的/ude1类型/gi有/vyou4/nz种/q，/w分别/d是/vshi指令/gi同/p消息/n相等/vi、/w消息/n开头/n包含/v指令/gi、/w消息/n结尾/n包含/v指令/gi、/w消息/n任意/d位置/gi中/f包含/v指令/gi，/w在/p创建/gi相关/vn数据库/gi信息/gi时/qt分别/d用/p1/nz、/w2/nz、/w3/nz、/w4/nz代替/v4/nz、/w插件/gi的/ude1类型/gi：/w插件/gi类型/gi就是/v插件/gi处理/vn消息/n的/ude1范围/n，/w有/vyou群/ng消息/n和/cc好友/n消息/n，/w在/p创建/gi相关/vn数据库/gi信息/gi时/qt分别/d用/p1/nz和/cc2/nz代替/v，/w插件/gi只/d接收/gi群/ng消息/n，/w那么/c可以/v是/vshi1/nz，/w只/d接收/gi好友/n消息/n，/w那么/c是/vshi2/nz，/w如果/c都/d处理/vn就是/v，/w也/d是/vshi用/p|/nz隔开/v具体/a开发/gi一个/mq插件/gi（/w比如/v我/rr想/v开发/gi一个/mq笑话/n插件/gi，/w来/vf活跃/a群/ng氛围/n）/w：/w1/nz、/w根据/p需求/gi先/d确定/v一/nz下/f插件/gi的/ude1基本/a信息/gi了/ule，/w根据/p确定/v的/ude1信息/gi生成/v插件/gi相关/vn的/ude1sql语句/gi，/w比如/v：/w  plugin/nz_/nzname/nz（/w插件/gi的/ude1名字/n）/w：/w笑话/n大全/n   class/nz_/nzname/nz（/w插件/gi的/ude1类名/n，/w插件/gi的/ude1类名/n必须/d以/pweb/gi开头/n，/whandler/gi结尾/n，/w中间/f可以/v用/p小写/n拼音/n或/c英文/nz简单/a概括/v下/f插件/gi，/w不然/c无法/v使用/gi）/w：/wwebjokehandler   author/nz（/w插件/gi的/ude1作者/nnt）/w：/w冬天/t的/ude1秘密/n   author/nz_/nzurl/gi（/w作者/nnt的/ude1网站/gi或者/c插件/gi的/ude1具体/a使用/gi说明/v地址/gi）/w：/w   description/nz（/w插件/gi的/ude1说明/v）/w：/w笑话/n大全/n，/w赶紧/d安装/gi来/vf活跃/a群/ng氛围/n吧/y   instruction/nz（/w插件/gi的/ude1指令/gi，/w插件/gi的/ude1指令/gi可以/v有/vyou多/a个/q，/w多/a个/q用/p竖杠/nz隔开/v）/w：/w笑话/n|/nz冷笑话/nz|/nz暴走/nz笑话/n   instruction/nz_/nztype/nz（/w指令/gi的/ude1类型/gi，/w跟/p插件/gi的/ude1指令/gi相/d对应/vi，/w多/a个/q也/d用/p竖杠/nz隔开/v）/w：/w1/nz|/nz1/nz|/nz1/nz   plugin/nz_/nztype/nz（/w插件/gi的/ude1类型/gi）/w：/w1/nz|/nz2/nz   version/nz（/w插件/gi的/ude1版本/n）/w：/w1.0/nz   is/nz_/nzable/nz（/w是否/v启用/gi）/w：/w1/nz   is/nz_/nzmonitor/nz_/nzall/nz_/nzmsg/nz（/w是否/v监控/gi所有/b消息/n）/w：/w0/nz根据/p上面/f确认/v的/ude1相关/vn信息/gi，/w我们/rr可以/v创建/gi一个/mqweb/gi./nzsql/gi的/ude1文件/gi，/w并且/c在/pweb/gi./nzsql/gi文件/gi中/f添加/gi如下/vi内容/gi：/w2/nz、/w根据/p插件/gi的/ude1类名/n，/w我们/rr可以/v确定/v插件/gi的/ude1类/gi文件名/gi，/w创建/gi一个/mq的/ude1文件/gi，/w创建/gi好/a后/f，/w我们/rr就/d可以/v在/p这个/rz文件/gi中/f具体/a的/ude1写/v插件/gi的/ude1内容/gi了/ule，/w根据/p插件/gi的/ude1要求/n，/w我们/rr先/d搭建/v插件/gi的/ude1基本/a框架/gi：/w在/p至此/d，/w这个/rz笑话/n大全/n的/ude1插件/gi基本/a制作/gi完毕/vi，/w我们/rr可以/v把/pbaweb/gi./nzsql/gi和/ccwebjokehandler/nz./nzphp/gi压缩成/v一个/mqzip/nz压缩包/gi，/w文件名/gi是/vshiwebjokehandler/nz./nzzip/nz，/w之后/f上/f传到/v程序/gi的/ude1plugin/nz目录/gi，/w之后/f在/p网站/gi的/ude1插件/gi大全/n里/f点击/v本地/gi安装/gi，/w你/rr会/v发现/v，/w你/rr上传/v的/ude1压缩包/gi会/v出现/v这/rzv这里/rzs，/w这时/rzt点击/v安装/gi按钮/n就/d可以/v真正/d安装/gi啦/y；/w如果/c空间/n不/d支持/v在线/vn解压/v，/w那么/c就/d不能/v通过/p本地/gi安装/gi啦/y，/w这时/rzt你/rr可以/v把/pba插件/gi压缩包/gi解压/v，/w创建/gi一个/mqjoke/nz目录/gi（/w目录/gi名字/n必须/d是/vshi类名/n中/fweb/gi和/cchandler/gi中间/f部分/n的/ude1小写字母/nz）/w，/w把/pba解压/v后/f的/ude1文件/gi都/d复制到/vjoke/nz目录/gi，/w然后/c把/pbajoke/nz目录/gi上/f传到/vplugin/nz目录/gi，/w再/d点击/v插件/gi大全/n的/ude1检测/gi插件/gi，/w也/d会/v发现/v插件/gi出现/v这里/rzs，/w可以/v点击/v安装/gi按钮/n真正/d安装/gi。/w当/p机器人/gi运行/gi时/qt，/w如果/c你/rr修改/gi了/ule插件/gi的/ude1类/gi文件/gi（/w一般/ad在/p调试/gi插件/gi时/qt）/w，/w并且/c把/pba修改/gi后/f的/ude1文件/gi上/f传到/v空间/n或/c服务器/gi覆盖/gi了/ule以前/f的/ude1文件/gi，/w这个/rz时候/n修改/gi是/vshi不会/v生效/vi的/ude1，/w因为/c你/rr那个/rz插件/gi的/ude1文件/gi以前/f在/p引入/v过/uguo，/w它/rr就/d会/v长久/a的/ude1保存/gi在/p内存/gi上/f，/w机器人/gi运行/gi引用/gi的/ude1是/vshi内存/gi上/f的/ude1文件/gi，/w这个/rz时候/n即使/c你/rr把/pba插件/gi的/ude1文件/gi删了/v，/w只要/c机器人/gi没有/v重新/d运行/gi，/w插件/gi还是/c能够/v正常/a工作/gi，/w所以/c在/p修改/gi插件/gi内容/gi调试/gi的/ude1时候/n，/w需要/v关掉/v机器人/gi运行/gi，/w再/d开启/gi，/w重新/d登录/gi机器/gi人才/gi会/v生效/vi。/w这些/rz只是/d简单/a的/ude1插件/gi制作/gi文档/gi，/w没有/v涉及/v任何/rz数据库/gi的/ude1操作/gi，/w只有/c很/d简单/a的/ude1逻辑关系/l，/w后面/f会/v详细介绍/gi一下/m这个/rz系统/gi，/w方便/a大家/rr开发/gi出给/v力/n的/ude1插件/gi。/w