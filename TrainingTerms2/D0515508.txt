#悟空/nz学/vLinux/gi专栏----第/nz11/nz篇/q
　　/nz上/f节/q课/n悟空/nz感觉/gi受益匪浅/gi，/w听课/vi果然/d比/p自学/vn效果/gi要好/a，/w所以/c这次/r悟空/nz一大/n早就/d来/vf。/w今天/t达人/nz先生/n要/v讲/v的/ude1是/vshi时钟/gi源/ng。/w　　/nz达人/nz：/w上/f节/q课/n我们/rr讲/v的/ude1是/vshilinux/gi时间/gi的/ude1表示/v方法/gi。/w　　/nz悟空/nz：/w老师/gi，/w那么/clinux/gi系统/gi的/ude1时间/gi是/vshi哪里/rys来/vf的/ude1呢/y?/nz　　/nz达人/nz：/wlinux/gi系统/gi的/ude1时钟/gi是/vshi由/p时/qt钟源/nz产生/v的/ude1，/w软件/gi用/p结构体/gistruct clocksource/nz表示/v时/qt钟源/nz。/w在/p硬件/gi上面/f，/w这个/rz时钟/gi源/ng往往/d是/vshi一个/mq固定/a频率/n的/ude1计数器/gi，/w这个/rz计数器/gi只能/v单调/a递增/vi，/w直到/v溢出/gi为止/u。/w　　/nz悟空/nz：/w时/qt钟源/nz有/vyou没有/v好坏/n之/uzhi别/d，/w什么/ry时/qt钟源/nz是/vshi好/a的/ude1时/qt钟源/nz，/w什么/ry时/qt钟源/nz是/vshi不好/a的/ude1时钟/gi源/ng呢/y?/nz　　/nz达人/nz：/w时钟/gi源/ng的/ude1好坏/n通过/p两/nz个/q参数/gi表示/v，/w一个/mq是/vshi时钟/gi源/ng的/ude1精度/n，/w一个/mq是/vshi时钟/gi源/ng的/ude1稳定度/nz。/w时钟/gi源/ng的/ude1精度/n用/pstruct clocksource/nz结构体/gi中的/vrating/nz字段/gi表示/v，/w它/rr的/ude1越大/d，/w表示/v时/qt钟源/nz的/ude1精度/n越高/d，/w取/v在/p0/nz-/nz500/nz之间/f，/w一般/ad都/d大于/v399。/nz而/cc时钟/gi源/ng的/ude1稳定度/nz则/d由/p系统/gi检测/gi，/w如果/c在/p0.5/nz秒/qt内/f，/w时间误差/n大于/v0.0625/nz秒/qt，/w则/d说明/v这个/rz时钟/gi源/ng不/d稳定/an，/w因此/c需要/v对/p时/qt钟源/nz进行/vn切换/vn。/w　　/nz悟空/nz：/w老师/gi，/w按照/p你/rr上面/f说/v，/w一个/mq系统/gi应该/v不/d只有/c一个时/nz钟源/nz吧/y?/nz　　/nz达人/nz：/w的确/d，/w一个/mq系统/gi一般/ad不/d只有/c一个时/nz钟源/nz，/w而是/c由/p多/a个/q硬件/gi时/qt钟源/nz，/w当时/t钟源/nz注册/gi的/ude1时候/n，/w系统/gi会/v判断/gi新的/a时钟源/nz是不是/v比/p当前/t时/qt钟源/nz精度/n更高/d，/w如果/c精度/n更高/d则/d系统/gi会/v更换/v为/p新的/a时钟/gi源/ng。/w　　/nz八戒/n：/w老师/gi，/w为什么/ryv是/vshi在/p误差/gi大于/v0.0625/nz秒/qt是/vshi为/p不/d稳定/an啊/y，/w为什么/ryv不是/c0.0525/nz或者/c0.0325/nz啊/y?/nz　　/nz达人/nz：/w这个/rz…/w…/w这个/rz…/w…/w哦/e，/w时间/gi到/v了/ule，/w我们/rr下课/vi吧/y。/w　　/nz说完/v达人/nz快步/d走出/v教室/n，/w八戒/n无语/nz。/w