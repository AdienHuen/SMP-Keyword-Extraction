#Android/gi客户端/gi和/cc服务端/nz如何/ryv使用/giToken/nz和/ccSession/nz
 /x本文/r转/v自/p /x对于/p初学者/gi来说/uls，/w对/ptoken/gi和/ccsession/gi的/ude1使用/gi难免会/l限于/v困境/n，/w开发/gi过程/gi中/f知道/v有/vyou这个/rz东西/n，/w但/c却/d不/d知道/v为什么/ryv要用/v他/rr？/w更/d不/d知道/v其/rz原理/gi，/w今天/t我/rr就/d带/v大家/rr一起/s分析/gi分析/gi这/rzv东西/n。/w /x一/nz、/w我们/rr先/d解释一下/i他/rr的/ude1含义/n：/w /x1/nz、/wtoken/gi的/ude1引入/v：/wtoken/gi是/vshi在/p客户端/gi频繁/a向/p服务端/nz请求/gi数据/gi，/w服务端/nz频繁/a的/ude1去/vf数据库/gi查询/gi用户名/n和/cc密码/gi并/cc进行/vn对比/gi，/w判断/gi用户名/n和/cc密码/gi正确/a与否/u，/w并/cc作出/v相应/vi提示/gi，/w在/p这样/rzv的/ude1背景/n下/f，/wtoken/gi便/d应运而生/vl。/w /x2/nz、/wtoken/gi的/ude1定义/gi：/wtoken/gi是/vshi服务端/nz生成/v的/ude1一/nz串字/nz符串/nz，/w以/p作/v客户端/gi进行/vn请求/gi的/ude1一个/mq令牌/n，/w当/p第一次/nz登录/gi后/f，/w服务器/gi生成/v一个/mqtoken/gi便/d将/d此/rzstoken/gi返回/v给/p客户端/gi，/w以后/f客户端/gi只需/v带上/v这个/rztoken/gi前来/vi请求/gi数据/gi即可/v，/w无需/v再次/d带上/v用户名/n和/cc密码/gi。/w /x3/nz、/w使用/gitoken/gi的/ude1目的/gi：/wtoken/gi的/ude1目的/gi是/vshi为了/p减轻/v服务器/gi的/ude1压力/n，/w减少/v频繁/a的/ude1查询数据库/n，/w使/v服务器/gi更加/d健壮/a。/w /x了解/v了/uletoken/gi的/ude1意义/n后/f，/w我们/rr就/d更/d明确/a的/ude1知道/v为什么/ryv要用/v他/rr了/ule。/w /x二/nz、/w如何/ryv使用/gitoken/gi？/w /x这/rzv是/vshi本文/r的/ude1重点/n，/w在/p这里/rzs我/rr就/d介绍/gi常用/a的/ude1两/nz种/q方式/n。/w /x1/nz、/w用/p设备/gi号/q//nz设备/gimac/gi地址/gi作为/ptoken/gi（/w推荐/gi）/w /x客户端/gi：/w客户端/gi在/p登录/gi的/ude1时候/n获取/gi设备/gi的/ude1设备/gi号/q//nzmac/gi地址/gi，/w并/cc将/d其/rz作为/p参数传递/gi到/v服务端/nz。/w /x服务端/nz：/w服务端/nz接收/gi到/v该/rz参数/gi后/f，/w便/d用/p一个/mq变量/gi来/vf接收/gi同时/c将/d其/rz作为/ptoken/gi保存/gi在/p数据库/gi，/w并/cc将/d该/rztoken/gi设置/gi到/vsession/gi中/f，/w客户端/gi每次/r请求/gi的/ude1时候/n都/d要/v统一/vn拦截/v，/w并/cc将/d客户端/gi传递/v的/ude1token/gi和/cc服务器端/gisession/gi中的/vtoken/gi进行/vn对比/gi，/w如果/c相同/a则/d放行/vi，/w不同/a则/d拒绝/v。/w /x分析/gi：/w此刻/r客户端/gi和/cc服务器端/gi就/d统一/vn了/ule一个/mq唯一/b的/ude1标识/ntoken/gi，/w而且/c保证/v了/ule每一个/nz设备/gi拥有/v了/ule一个/mq唯一/b的/ude1会话/v。/w该/rz方法/gi的/ude1缺点/gi是/vshi客户端/gi需要/v带/v设备/gi号/q//nzmac/gi地址/gi作为/p参数传递/gi，/w而且/c服务器端/gi还/d需要/v保存/gi；/w优点/gi是/vshi客户端/gi不/d需/v重新/d登录/gi，/w只要/c登录/gi一次/nz以后/f一直/d可以/v使用/gi，/w至于/p超时/v的/ude1问题/gi是/vshi有/vyou服务器/gi这边/rzs来/vf处理/vn，/w如何/ryv处理/vn？/w若/c服务器/gi的/ude1token/gi超时/v后/f，/w服务器/gi只需/v将/d客户端/gi传递/v的/ude1token/gi向/p数据库/gi中/f查询/gi，/w同时/c并/cc赋/ng给/p变量/gitoken/gi，/w如此/rzv，/wtoken/gi的/ude1超时/v又/d重新/d计时/vi。/w /x2/nz、/w用/psession/gi作为/ptoken /nz客户端/gi：/w客户端/gi只需/v携带/v用户名/n和/cc密码/gi登陆/vi即可/v。/w /x客户端/gi：/w客户端/gi接收/gi到/v用户名/n和/cc密码/gi后/f并/cc判断/gi，/w如果/c正确/a了/ule就/d将/d本地/gi获取/gisessionid/nz作为/ptoken/gi返回/v给/p客户端/gi，/w客户端/gi以后/f只需/v带上/v请求/gi数据/gi即可/v。/w /x分析/gi：/w这种/r方式/n使用/gi的/ude1好处/gi是/vshi方便/a，/w不用/d存储/gi数据/gi，/w但是/c缺点/gi就是/v当/psession/gi过期/gi后/f，/w客户端/gi必须/d重新/d登录/gi才能/n进行/vn访问/gi数据/gi。/w /x三/nz、/w使用/gi过程/gi中/f出现/v的/ude1问题/gi以及/cc解决方案/gi？/w /x刚才/t我们/rr轻松/a介绍/gi了/uletoken/gi的/ude1两/nz种/q使用/gi方式/n，/w但是/c在/p使用/gi过程/gi中/f我们/rr还/d出现/v各种/rz问题/gi，/wtoken/gi第一种/nz方法/gi中/f我们/rr隐藏/v了/ule一个/mq在/p网络/gi不好/a或者/c并发/gi请求/gi时会/n导致/gi多次重复/l提交/gi数据/gi的/ude1问题/gi。/w /x该/rz问题/gi的/ude1解决方案/gi：/w将/dsession/gi和/cctoken/gi套用/v，/w如此/rzv便/d可/v解决/v，/w如何/ryv套用/v呢/y？/w请/v看/v这段/r解释/gi：/w /x这/rzv就是/v解决/v重复/gi提交/gi的/ude1方案/gi。/w /x总结/gi：/w以上/f是/vshi个人/n对/p开发/gi中/f使用/gitoken/gi和/ccsession/gi的/ude1一点/m总结/gi。/w