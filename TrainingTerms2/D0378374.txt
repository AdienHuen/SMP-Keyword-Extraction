#七牛音/nz视频/gi和/cc大于/v20/nzM/nz图片/gi的/ude1处理/vn
七牛/nz大/a文件/gi异步/gi操作/gi指南/gi简介/gi我/rr想/v很/d多/a客户/n用/p到/v七牛/nz的/ude1大/a文件/gi异步/gi处理/vn的/ude1时候/n，/w都/d很/d头疼/a。/w第一/mq：/w客户/n不/d知道/v什么/ry时候/n要/v使用/gi这个/rz操作/gi，/w第二/mq：/w客户/n不/d知道/v如何/ryv去/vf使用/gi这个/rz操作/gi，/w第三/nz：/w客户/n不/d知道/v如何/ryv使用/gi才能/n做到/v最佳/z。/w一般/ad在/p下列/b情况/n的/ude1时候/n你/rr要/v考虑到/v异步/gi处理/vn了当/a你/rr的/ude1图片/gi超过/v了/ule20/nzm/nz的/ude1时候/n，/w我们/rr服务端/nz通常/d会/v返回/v文件/gitoo large /nz的/ude1响应/v信息/gi，/w这时候/rzt要/v选用/v异步/gi来/vf处理/vn。/w /x当/p你/rr需要/v进行/vn音频/gi和/cc视频/gi转码/nz，/w以及/cc其他/rzv关于/p音频/gi和/cc视频/gi的/ude1操作/gi，/w例如/v：/w水印/n，/w视频/gi截图/vn，/w音频/gi水印/n，/wpdf/gi转/v图片/gi，/wgif/nz转/vmp/nz4/nz等等/udeng。/w /x当/p遇到/v了/ule大/a文件/gi的/ude1镜像/gi拉取/nz资源/gi的/ude1时候/n，/w建议/gi使用/gi上传/v工具/gi，/w异步/gi上/f传到/v七牛/nz空间/n。/w /x怎样/ryv使用/gi七牛/nz的/ude1异步/gi操作/gi首先/d如果/c你/rr的/ude1视频/gi产生量/n很少/ad，/w一天一个/nz视频/gi，/w你/rr可以/v直接/ad到/v七牛/nz后台/gi，/w进入/v到/v多媒体/gi处理/vn中/f－/w》/w开始/v使用/gi―/w―/w》/w新建/v队列/gi（/w这里/rzs建立/gi的/ude1队列/gi是/vshi私有/gi队列/gi，/w不/d需要/v与/cc其他用户/l排队/gi处理/vn，/w相反/vi公/ng有/vyou队列/gi是/vshi要/v跟/p其他用户/l分享/gi队列/gi的/ude1，/w需要/v排队/gi）/w―/w―/w》/w新建/v作业/gi－/w》/w选择/gi你/rr建立/gi的/ude1队列/gi－/w》/w在/p新建/v作业/gi中/f可以/v配置/gi音频/gi和/cc视频/gi的/ude1预设/v规格/n－/w》/w点击/v提交/gi就/d可以/v进行/vn转码/nz服务/gi了/ule。/w然后/c你/rr可以/v点击/v查看/gi状态/gi中/f看到/vid/nz，/w和/cc状态/gi等/udeng信息/gi，/wid/nz可以/v到/v左侧/f的/ude1 /x作业/gi查询/gi中/f搜索/gi查看/gi。/w如果/c你/rr的/ude1视频/gi需要/v批量/d处理/vn，/w自动化/gi执行/v。/w你/rr就/d需要/v来/vf参照/v我们/rr的/ude1sdk/nz来/vf实现/gi。/w（/w分为/v预转/nz持久化/nz和/cc触发/gi持久化/nz）/w /x1./nz我们/rr分/qt了/ule很/d多/asdk/nz来/vf实现/gi这/rzv异步/gi的/ude1操作/gi有/vyou两/nz种/q方式/n触发/gi /x1./nz /x上/f传音/n视频/gi或者/c超过/v20/nzm/nz的/ude1图片/gi后/f立即/d触发/gi处理/vn，/w需要/v服务端/nz的/ude1上传/v策略/gi中/f设置/gi处理/vn参数/gipersistentops/nz，/w；/w /x2./nz /x可以/v直接/ad在/p服务端/nz触发/gi，/w对/p空间/n中/f已有/v的/ude1资源/gi进行/vn处理/vn操作/gi，/w接口/gi是/vshi /x，/w例如/v：/w给/p视频/gi打/v水印/n，/w /x其中/rzfops/nz参数/gi就是/v打/v水印/n的/ude1操作/gi /x另外/c，/w水印/n图片/gi的/ude1url/gi需要/v做/v urlsafe/nz的/ude1base64/gi编码/gi。/w /x另外/c提供/v一个/mqdemo/gi：/wphp pfop /nz:/w  /x这个/rz是/vshipfop/nz的/ude1触发/gidemo/gi，/w打/v水印/n操作/gi，/w直接/ad修改/gi /x$/nzpfop/nz-/nzfops /nz参数/gi就/d行/ng。/w请求/gi发出/v后/f，/w你/rr会/v拿到/v一个/mq叫/vipersistenid/nz的/ude1一个/mq返回/v信息/gi：/w例如/v：/w556428/nzd/nz77823/nzde/nz4068/nzf/nz20037/nz /x然后/c利用/v我们/rr的/ude1api/gi来/vf查询/gi进度/gi：/w  /x例如/v：/w最终/d得到/v的/ude1url/gi是/vshi这样/rzv的/ude1。/w /x但是/c这个/rz方法/gi是/vshi不/d可取/a的/ude1，/w只能/v一个一个/nz的/ude1去/vf看/v，/w还好/v我们/rr提供/v了/ulepersistentnotifyurl/nz这个/rz参数/gi，/w参数/gi的/ude1详细/gi说明/v请/v参考/gi：/w /x可以/v在/ptoken/gi中/f设置/gi。/w设置/gi后/f，/w处理/vn完成/v的/ude1结果/n信息/gi就/d会/v发送到/l这个/rzurl/gi上/f。/w和/cc上面/f的/ude1查询/gi结果/n是/vshi一样/uyy的/ude1。/w