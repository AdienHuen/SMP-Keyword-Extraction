#STM/nz32/nz之/uzhi中断/gi与/cc事件/gi的/ude1区别/gi
原文/n地址/gi：/w  /x这/rzv张/q图/gi是/vshi一条/nz外部/f中断线/nz或/c外部/f事件/gi线/n的/ude1示意图/gi,/nz图/gi中/f信号/gi线/n上划/n有/vyou一条/nz斜线/n,/nz旁边/f标志/n19/nz字样/n的/ude1注释/gi,/nz表示/v这样/rzv的/ude1线路/n共有/v19/nz套/q./nz图/gi中的/v蓝色/n虚线/n箭头/n,/nz标出/v了/ule外部/f中断/gi信号/gi的/ude1传输/gi路径/gi,/nz首先/d外部/f信号/gi从/p编号/gi1/nz的/ude1芯片/gi管脚/nz进入/v,/nz经过/p编号/gi2/nz的/ude1边沿/f检测/gi电路/gi,/nz通过/p编号/gi3/nz的/ude1或/c门/n进入/v中断/gi挂起/v请求/gi寄存器/gi,/nz最后/f经过/p编号/gi4/nz的/ude1与/cc门/n输出/gi到/vnvic/nz中断/gi检测/gi电路/gi,/nz这个/rz边沿/f检测/gi电路/gi受/v上升/vi沿/p或/c下降/vi沿/p选择/gi寄存器/gi控制/vn,/nz用户/gi可以/v使用/gi这/rzv两/nz个/q寄存器/gi控制/vn需要/v哪/ry一个/mq边沿/f产生/v中断/gi,/nz因为/c选择/gi上升/vi沿/p或/c下降/vi沿/p是/vshi分别/d受/v2/nz个/q平行/vi的/ude1寄存器/gi控制/vn,/nz所以/c用户/gi可以/v同时/c选择/gi上升/vi沿/p或/c下降/vi沿/p,/nz而/cc如果/c只有/c一个/mq寄存器/gi控制/vn,/nz那么/c只能/v选择/gi一个/mq边沿/f了/ule./nz /x按/p下来/vf是/vshi编号/gi3/nz的/ude1或/c门/n,/nz这个/rz或/c门/n的/ude1另一个/nz输入/v是/vshi软件/gi中断/gi//nz事件/gi寄存器/gi,/nz从/p这里/rzs可以/v看出/v,/nz软件/gi可以/v优先/vd于/p外部/f信号/gi请求/gi一个/mq中断/gi或/c事件/gi,/nz即/v当/p软件/gi中断/gi//nz事件/gi寄存器/gi的/ude1对应/vi位/q为/p”/w1/nz”/w时/qt,/nz不管/c外部/f信号/gi如何/ryv,/nz编号/gi3/nz的/ude1或/c门/n都会/n输出/gi有效/gi信号/gi./nz /x一个/mq中断/gi或/c事件/gi请求/gi信号/gi经过/p编号/gi3/nz的/ude1或/c门/n后/f,/nz进入/v挂起/v请求/gi寄存器/gi,/nz到/v此/rzs之前/f,/nz中断/gi和/cc事件/gi的/ude1信号/gi传输/gi通路/n都/d是/vshi一致/a的/ude1,/nz也/d就是说/c,/nz挂起/v请求/gi寄存器/gi中/f记录/gi了/ule外部/f信号/gi的/ude1电平/n变化/gi./nz /x外部/f请求/gi信号/gi最后/f经过/p编号/gi4/nz的/ude1与/cc门/n,/nz向/pnvic/nz中断/gi控制器/n发出/v一个/mq中断请求/gi,/nz如果/c中断/gi屏蔽/v寄存器/gi的/ude1对应/vi位/q为/p”/w0/nz”/w,/nz则/d该/rz请求/gi信号/gi不能/v传输/gi到/v与/cc门/n的/ude1另一端/nz,/nz实现/gi了/ule中断/gi的/ude1屏蔽/v./nz /x明白/v了/ule外部/f中断/gi的/ude1请求/gi机制/gi,/nz就/d很容易/nz理解/gi事件/gi的/ude1请求/gi机制/gi了/ule./nz图/gi中/f红色/gi虚线/n箭头/n,/nz标出/v了/ule外部/f事件/gi信号/gi的/ude1传输/gi路径/gi,/nz外部/f请求/gi信号/gi经过/p编号/gi3/nz的/ude1或/c门/n后/f,/nz进入/v编号/gi5/nz的/ude1与/cc门/n,/nz这个/rz与/cc门/n的/ude1作用/gi与/cc编号/gi4/nz的/ude1与/cc门/n类似/a,/nz用于/v引入/v事件/gi屏蔽/v寄存器/gi的/ude1控制/vn;/nz最后/f脉冲/gi发生器/n的/ude1一个/mq跳变/nz的/ude1信号/gi转变/v为/p一个/mq单脉冲/nz,/nz输出/gi到/v芯片/gi中的/v其它/rz功能模块/nz./nz从/p这/rzv张/q图/gi上/f我们/rr也/d可以/v知道/v,/nz从外部/nz激励/vn信号/gi来看/u,/nz中断/gi和/cc事件/gi的/ude1产生/v源/ng都/d可以/v是/vshi一样/uyy的/ude1./nz之所以/c分成/vi2/nz个/q部分/n,/nz由于/p中断/gi是/vshi需要/vcpu/gi参与/gi的/ude1,/nz需要/v软件/gi的/ude1中断/gi服务/gi函数/gi才能/n完成/v中断/gi后/f产生/v的/ude1结果/n;/nz但是/c事件/gi,/nz是/vshi靠/v脉冲/gi发生器/n产生/v一个/mq脉冲/gi,/nz进而/c由/p硬件/gi自动/d完成/v这个/rz事件/gi产生/v的/ude1结果/n,/nz当然/d相应/vi的/ude1联动/vn部件/n需要/v先/d设置/gi好/a,/nz比如/v引起/vdma/nz操作/gi,/nzad/nz转换/gi等/udeng;/nz /x简单/a举例/gi：/w外部/fi/nz//nzo/nz触发/giad/nz转换/gi,/nz来/vf测量/vn外部/f物品/gi的/ude1重量/n;/nz如果/c使用/gi传统/n的/ude1中断/gi通道/n,/nz需要/vi/nz//nzo/nz触发/gi产生/v外部/f中断/gi,/nz外部/f中断/gi服务程序/n启动/giad/nz转换/gi,/nzad/nz转换/gi完成/v中断/gi服务程序/n提交/gi最后/f结果/n;/nz要是/c使用/gi事件/gi通道/n,/nzi/nz//nzo/nz触发/gi产生/v事件/gi,/nz然后/c联动/vn触发/giad/nz转换/gi,/nzad/nz转换/gi完成/v中断/gi服务程序/n提交/gi最后/f结果/n;/nz相比之下/vl,/nz后者/rzv不要/d软件/gi参与/giad/nz触发/gi,/nz并且/c响应速度/nz也/d更/d块/q;/nz要是/c使用/gi事件/gi触发/gidma/nz操作/gi,/nz就/d完全/ad不用/d软件/gi参与/gi就/d可以/v完成/v某些/rz联动/vn任务/gi了/ule。/w /x总结/gi:/w /x可以/v这样/rzv简单/a的/ude1认为/v,/nz事件/gi机制/gi提供/v了/ule一个/mq完全/ad有/vyou硬件/gi自动/d完成/v的/ude1触发/gi到/v产生/v结果/n的/ude1通道/n,/nz不要/d软件/gi的/ude1参与/gi,/nz降低/v了/ulecpu/gi的/ude1负荷/n,/nz节省/v了/ule中断/gi资源/gi，/w提高/v了/ule响应速度/nz(/nz硬件/gi总/b快于/d软件/gi)/nz，/w是/vshi利用/v硬件/gi来/vf提升/gicpu/gi芯片/gi处理事件/n能力/gi的/ude1一个/mq有效/gi方法/gi;/nz