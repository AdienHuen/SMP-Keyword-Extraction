#数据库连接池/gi简介/gi
数据库/gi连接/gi是/vshi一种/nz关键/n的/ude1有限/a的/ude1昂贵/a的/ude1资源/gi，/w这一点/nz在/p多用户/n的/ude1网页/gi应用程序/nz中/f体现/v得/ude3尤为/d突出/a。/w对/p数据库/gi连接/gi的/ude1管理/gi能/v显著/ad影响/gi到/v整个/b应用程序/nz的/ude1伸缩性/gi和/cc健壮性/nz，/w影响/gi到/v程序/gi的/ude1性能指标/nz。/w数据库连接池/gi正是/v针对/gi这个/rz问题/gi提出/v来/vf的/ude1。/w数据库连接池/gi负责/v分配/gi、/w管理/gi和/cc释放/gi数据库/gi连接/gi，/w它/rr允许/v应用程序/nz重复使用/l一个/mq现有/v的/ude1数据库/gi连接/gi，/w而/cc再/d不是/c重新/d建立/gi一个/mq；/w释放/gi空闲/gi时间/gi超过/v最大/gm空闲/gi时间/gi的/ude1数据库/gi连接/gi来/vf避免/v因为/c没有/v释放/gi数据库/gi连接/gi而/cc引起/v的/ude1数据库/gi连接/gi遗漏/v。/w这项/r技术/gi能/v明显/a提高/v对/p数据库操作/gi的/ude1性能/gi。/w数据库连接池/gi在/p初始化/v时/qt将/d创建/gi一定/b数量/n的/ude1数据库/gi连接/gi放到/v连接池/nz中/f，/w这些/rz数据库/gi连接/gi的/ude1数量/n是/vshi由/p最小/a数据库/gi连接数/nz来/vf设定/v的/ude1。/w无论/c这些/rz数据库/gi连接/gi是否/v被/pbei使用/gi，/w连接池/nz都/d将/d一直/d保证/v至少/d拥有/v这么/rz多/a的/ude1连接/gi数量/n。/w连接池/nz的/ude1最大/gm数据库/gi连接/gi数量/n限定/v了/ule这个/rz连接池/nz能/v占有/v的/ude1最大/gm连接数/nz，/w当/p应用程序/nz向/p连接池/nz请求/gi的/ude1连接数/nz超过/v最大/gm连接/gi数量/n时/qt，/w这些/rz请求/gi将/d被/pbei加入/v到/v等待/gi队列/gi中/f。/w数据库连接池/gi的/ude1最小/a连接数/nz和/cc最大/gm连接数/nz的/ude1设置/gi要/v考虑到/v下列/b几个/nz因素/gi：/w1/nz)/nz /x最小/a连接数/nz是/vshi连接池/nz一直/d保持/v的/ude1数据库/gi连接/gi，/w所以/c如果/c应用程序/nz对/p数据库/gi连接/gi的/ude1使用量/n不大/d，/w将/d会/v有/vyou大量/m的/ude1数据库/gi连接/gi资源/gi被/pbei浪费/gi；/w2/nz)/nz /x最大/gm连接数/nz是/vshi连接池/nz能/v申请/v的/ude1最大/gm连接数/nz，/w如果/c数据库/gi连接/gi请求/gi超过/v此/rzs数/n，/w后面/f的/ude1数据库/gi连接/gi请求/gi将/d被/pbei加入/v到/v等待/gi队列/gi中/f，/w这/rzv会/v影响/gi之后/f的/ude1数据库操作/gi。/w3/nz)/nz /x如果/c最小/a连接数/nz与/cc最大/gm连接数/nz相差太大/i，/w那么/c最先/d的/ude1连接/gi请求/gi将/d会/v获利/v，/w之后/f超过/v最小/a连接/gi数量/n的/ude1连接/gi请求/gi等价/vn于/p建立/gi一个/mq新的/a数据库/gi连接/gi。/w不过/c，/w这些/rz大于/v最小/a连接数/nz的/ude1数据库/gi连接/gi在/p使用/gi完/vi不会/v马上/d被/pbei释放/gi，/w它/rr将/d被/pbei放到/v连接池/nz中/f等待/gi重复使用/l或/c是/vshi空闲/gi超时/v后/f被/pbei释放/gi。/w在/p传统/n的/ude1两/nz层/gi结构/gi中/f，/w客户端程序/n在/p启动时/l打开/gi数据库/gi连接/gi，/w在/p退出/gi程序/gi时/qt关闭/gi数据库/gi连接/gi。/w这样/rzv，/w在/p整个/b程序运行/n中/f，/w每个/r客户端/gi始终/d占用/v一个/mq数据库/gi连接/gi，/w即使/c在/p大量/m没有/v数据库操作/gi的/ude1空闲/gi时间/gi，/w如/v用户/gi输入/v数据/gi时/qt，/w从而/c造成/v数据库/gi连接/gi的/ude1使用/gi效率/gi低下/a。/w在/p三层/nz结构/gi模式/gi中/f，/w数据库/gi连接/gi通过/p中间层/nz的/ude1连接池/nz管理/gi。/w只有/c当/p用户/gi真正/d需要/v进行/vn数据库操作/gi时/qt，/w中间层/nz才/d从/p连接池/nz申请/v一个/mq连接/gi，/w数据库操作/gi完毕/vi，/w连接/gi立即/d释放/gi到/v连接池/nz中/f，/w以/p供/vi其他用户/l使用/gi。/w这样/rzv，/w不仅/c大大提高/i了/ule数据库/gi连接/gi的/ude1使用/gi效率/gi，/w使得/vi大量/m用户/gi可以/v共享/gi较少/ad的/ude1数据库/gi连接/gi，/w而且/c省去/v了/ule建立/gi连接/gi的/ude1时间/gi。/w