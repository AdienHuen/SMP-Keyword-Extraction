#中间件/n最喜欢/nz干的事/n
最近/t特别/d想/v总结/gi一/nz些/q东西/n，/w积累/gi下来/vf，/w框架/gi知识/gi，/w日/b后/f或许/d还/d能用/v上/f。/w之前/f用/p过/uguo一个/mq中间件/n，/w整个/b框架/gi挺/d大/a的/ude1，/w想/v全部/m整/v明白/v所有/b细节/gi，/w这/rzv或许/d只有/c开发/gi它/rr的/ude1人/n能/v懂/v。/w所以/c我/rr把/pba它/rr结构化/n，/w方便/a记住/v。/w这个/rz中间件/n是/vshi个/q重量级/b的/ude1开发/gi框架/gi，/w你/rr用/p它/rr的话/udh，/w只能/v一路/m走到底/nz，/w以/p它/rr为准/v。/w我会/r把/pba它/rr大部分/n涵盖/v的/ude1内容/gi列出来/v，/w逐渐/d完善/v。/w咱/rr从/p两/nz个/q角度/n来/vf看待/v中间件/n。/w一/nz、/w中间件/n启动/gi后/f的/ude1准备/v工作/gi都/d有啥/v？/w1/nz加载/gi服务器/gi的/ude1一些/m配置/gi，/w包括/vjvm/nz虚拟机/gi参数设置/n、/w负载均衡/gi、/w数据库/gi、/w日志/gi。/w2/nz加载/gi应用/gi的/ude1一些/m配置/gi，/w比如/v遍历/gi加载/gi各个/rz模块/gi、/w加载/gi实体/n、/w实体/n关系/gi之类/rz的/ude1大量/m初始化/v数据/gi。/w3/nz权限/gi授权/v。/w二/nz、/w具体/a工作/gi流程/gi的/ude1入口/n1/nz前端/gi远程/gi调用/gi到/v后端/f，/w中间件/n就/d开始/v接手/v了/ule，/w(/nz1/nz)/nz开启/gi一个/mq线程/gi，/w并发/gi控制/vn（/w比如/v根据/p情况/n加锁/gi控制/vn一/nz些/q并发/gi资源/gi）/w，/w根据/p名称/n寻找/v后台/gi服务/gi入口/n。/w(/nz2/nz)/nz开启/gi一个/mq声明/gi式/k的/ude1事务/gi（/w依照/p函数/gi名/q后/f缀/v区分/v是/vshi新开/ns事务/gi、/w还是/c用/p原有/v的/ude1事务/gi等等/udeng，/w默认/v新开/ns事务/gi）/w。/w(/nz3/nz)/nz开启/gi日志记录/gi，/w异常处理/gi2/nz从/p中间件/n到/v后台/gi服务/gi(/nz1/nz)/nz后台/gi服务/gi里面/f也/d可以/v做/v各种/rz加锁/gi操作/gi，/w也/d可以/v新开/ns事务/gi，/w这/rzv都行/n。/w(/nz2/nz)/nz后台/gi服务/gi可以/v做/v控制/vn反转/gm和/cc依赖/v注入/gi，/w可以/v添加/gi事件/gi。/w(/nz3/nz)/nz这里/rzs后台/gi服务/gi一般/ad先/d找到/v后台/gi服务/gi的/ude1模块/gi，/w然后/c根据/p参数/gi找/v后台/gi服务/gi的/ude1入口/n，/w用/p的/ude1都/d是/vshi搜索/gi名称/n的/ude1服务/gi，/w搜到/v了/ule，/w然后/cload/nz类/gi，/w然后/c执行/v。/w3/nz /x从/p后台/gi服务/gi再/d到/v中间件/n(/nz1/nz)/nz中间件/n释放/gi所有/b的/ude1应用/gi锁/v(/nz2/nz)/nz结束/v事务/gi(/nz3/nz)/nz找到/v前端/gi信息/gi，/w包装/n返回/v数据/gi