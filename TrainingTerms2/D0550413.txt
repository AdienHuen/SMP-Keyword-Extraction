#超/v简单/a方法/gi实现/gi省/n//nz市/n//nz地区级/b联/vg查询/gi
本文/r的/ude1原文/n连接/gi是/vshi:/w  /x未经/d博主/nz允许/v不得/vi转载/v。/w  /x博主/nz地址/gi是/vshi：/w1/nz，/w关于/p中国/gi地址/gi开发/gi业务/gi的/ude1时候/n遇到/v一个/mq问题/gi  /x需要/v弄一个/nz省/n、/w市/n，/w地区/n的/ude1级联查询/gi。/w /x页面/gi好/a做/v，/w但是/c数据/gi不/d太/d好弄/nz，/w不好/a组织/gi。/w /x开始/v考虑/v抓/v一个/mq现成/b的/ude1数据库/gi，/w存储/gi成/v表/n机构/n，/w然后/c查询/gi。/w /x发现/v这个/rz是/vshi一个/mq效率/gi比较/gi低/a的/ude1方案/gi，/w但/c维护/gi起来/vf比较/gi好/a。/w /x直接/ad对/p数据库/gi进行/vn操作/gi行/ng了/ule。/w2/nz，/w一个/mq简单/a的/ude1方案/gi首先/d要/v招到/v数据源/gi：/w /x从/p中国/gi统计局/nis页面/gi拷贝/gi数据/gi：/w   /x结果/n页面/gi   /x将/d数据/gi拷贝到/nz一个/mqdistrict/nz./nzdata/nz./nzdic/nz文本/gi里面/f。/w /x邮政编码/n一共/d6/nz位/q，/w1/nz-/nz2/nz位/q代表/nnt省/n，/w3/nz-/nz4/nz位/q代表/nnt市/n，/w5/nz-/nz6/nz位/q代表/nnt区/n//nz县/n。/w /x所以/c，/w可以/v直接/ad将/d这个/rz数据/gi存储成一个/nz3/nz级/q树形/gi结构/gi。/w3/nz，/w代码实现/gi首先/d判断/gi /x1/nz-/nz2/nz位/q，/w找到/v1/nz级/q省/n。/w /x然后/c找到/v3/nz-/nz4/nz位/q，/w判断/gi市/n，/w最后/f5/nz-/nz6/nz位/q是/vshi区/n//nz县/n。/w运行/gi结果/n：/w这/rzv里面/f有/vyou个/q坑/n，/w找/v了/ule半天/mq才/d发现/v，/w国家统计局/nt里面/f使用/gi了/ule一个/mq非常/d特殊/a的/ude1中文/gi空格/n，/w咋/ryv进行/vn字符串/gi过滤/gi都/d去/vf不掉/v。/w /x就是/v字符/gi /x\/nzu/nz3000/nz /x，/w这个/rz也/d是/vshi一个/mq空字/nz符串/nz。/w直接/ad晕死/nz！/w！/w！/w /x转码/nz才/d发现/v的/ude1：/w /x4/nz，/w总结/gi本文/r的/ude1原文/n连接/gi是/vshi:/w  /x未经/d博主/nz允许/v不得/vi转载/v。/w  /x博主/nz地址/gi是/vshi：/w思路/gi还是/c对/p的/ude1，/w中间/f遇到/v一个/mq特殊/a空格/n的/ude1问题/gi。/w /x直接/ad把/pba这个/rz树/gi存储/gi到/v内存/gi，/w第一次/nz加载/gi使用/gi，/w不用/d查询数据库/n了/ule。/w /x而且/c统计局/nis这个/rz数据/gi更新/gi的/ude1也/d比较慢/l，/w也/d就/d几年/nz一次/nz，/w够用/vi了/ule。/w /x对于/p查询/gi，/w同样/d的/ude1按照/p /x1/nz-/nz2/nz /x，/w /x3/nz-/nz4/nz，/w /x5/nz-/nz6/nz /x3/nz级/q数据/gi查询/gi即可/v。/w