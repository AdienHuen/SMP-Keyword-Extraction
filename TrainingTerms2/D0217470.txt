#星型模型/gi和/cc雪花型模型/gi比较/gi
一/nz、/w概述/gi在/p多维分析/gi的/ude1商业智能/nz解决方案/gi中/f，/w根据/p事实/n表/n和/cc维度/gi表/n的/ude1关系/gi，/w又/d可/v将/d常见/a的/ude1模型/gi分为/v星型模型/gi和/cc雪花型模型/gi。/w在/p设计/gi逻辑/n型/k数据/gi的/ude1模型/gi的/ude1时候/n，/w就/d应/v考虑/v数据/gi是/vshi按照/p星型模型/gi还是/c雪花型模型/gi进行/vn组织/gi。/w当/p所有/b维表/nz都/d直接/ad连接/gi到/v“/w事实/n表”/nz上/f时/qt，/w整个/b图解/v就/d像/v星星/n一样/uyy，/w故/c将/d该/rz模型/gi称为/v星型模型/gi，/w如/v图/gi /x1/nz /x。/w星型/n架构/gi是/vshi一种/nz非正规化/nz的/ude1结构/gi，/w多维/gi数据集/nz的/ude1每一个/nz维度/gi都/d直接/ad与/cc事实/n表/n相/d连接/gi，/w不存在/ns渐变/vi维度/gi，/w所以/c数据/gi有/vyou一定/b的/ude1冗余/n，/w如/v在/p地域/n维度表/nz中/f，/w存在/v国家/n a/nz省/n b /nz的/ude1城市/gi c /nz以及/cc国家/n a /nz省/n b /nz的/ude1城市/gi d /nz两/nz条/q记录/gi，/w那么/c国家/n a /nz和/cc省/n b /nz的/ude1信息/gi分别/d存储/gi了/ule两/nz次/qv，/w即/v存在/v冗余/n。/w当/p有/vyou一个/mq或/c多/a个/q维表/nz没有/v直接/ad连接/gi到/v事实/n表/n上/f，/w而是/c通过/p其他/rzv维表/nz连接/gi到/v事实/n表/n上/f时/qt，/w其/rz图解/v就/d像/v多/a个/q雪花/n连接/gi在/p一起/s，/w故称/nz雪花/n模型/gi。/w雪花/n模型/gi是/vshi对/p星型模型/gi的/ude1扩展/gi。/w它/rr对/p星型模型/gi的/ude1维表/nz进一步/d层次化/nz，/w原有/v的/ude1各/rz维表/nz可能/v被/pbei扩展/gi为/p小/a的/ude1事实/n表/n，/w形成/v一/nz些/q局部/n的/ude1 /x层次/n  /x区域/n，/w这些/rz被/pbei分解/gi的/ude1表/n都/d连接/gi到/v主/ag维度/gi表/n而/cc不是/c事实/n表/n。/w如/v图/gi /x2/nz，/w将/d地域/n维表/nz又/d分解/gi为/p国家/n，/w省份/n，/w城市/gi等/udeng维表/nz。/w它/rr的/ude1优点/gi是/vshi /x:/w通过/p最大限度/nz地/ude2减少/v数据/gi存储量/nz以及/cc联合/gi较小/d的/ude1维/b表/n来/vf改善/v查询/gi性能/gi。/w雪花/n型/k结构/gi去除/v了/ule数据/gi冗余/n。/w星型模型/gi因为/c数据/gi的/ude1冗余/n所以/c很/d多/a统计/gi查询/gi不/d需要/v做/v外部/f的/ude1连接/gi，/w因此/c一般/ad情况下/nz效率/gi比/p雪花型模型/gi要/v高/a。/w星型/n结构/gi不用/d考虑/v很/d多/a正规化/vn的/ude1因素/gi，/w设计/gi与/cc实现/gi都/d比较简单/l。/w雪花型模型/gi由于/p去除/v了/ule冗余/n，/w有些/rz统计/gi就/d需要/v通过/p表/n的/ude1联接/v才能/n产生/v，/w所以/c效率/gi不/d一定/b有/vyou星型模型/gi高/a。/w正规化/vn也/d是/vshi一种/nz比较复杂/l的/ude1过程/gi，/w相应/vi的/ude1数据库/gi结构设计/nz、/w数据/gi的/ude1 etl/nz、/w以及/cc后期/f的/ude1维护/gi都/d要/v复杂/a一/nz些/q。/w因此/c在/p冗余/n可以/v接受/gi的/ude1前提/n下/f，/w实际/n运用/v中星/nz型/k模型/gi使用/gi更多/ad，/w也/d更/d有效率/n。/w二/nz、/w使用/gi选择/gi星形/n模型/gi(/nzstar schema/nz)/nz和/cc雪花/n模型/gi(/nzsnowflake schema/nz)/nz是/vshi数据仓库/gi中/f常用/a到/v的/ude1两/nz种/q方式/n，/w而/cc它们/rr之间/f的/ude1对比/gi要/v从/p四个/nz角度/n来/vf进行/vn讨论/gi。/w　　/nz1./nz数据/gi优化/gi雪花/n模型/gi使用/gi的/ude1是/vshi规范化/vn数据/gi，/w也/d就是说/c数据/gi在/p数据库/gi内部/f是/vshi组织/gi好/a的/ude1，/w以便/d消除/v冗余/n，/w因此/c它/rr能够/v有效地/nz减少/v数据量/n。/w通过/p引用/gi完整性/gi，/w其/rz业务/gi层级/n和/cc维度/gi都/d将/d存储/gi在/p数据模型/gg之中/f。/w▲/w图/gi1/nz /x雪花/n模型/gi相比较/nz而言/uls，/w星形/n模型/gi实用/a的/ude1是/vshi反/vi规范化/vn数据/gi。/w在/p星形/n模型/gi中/f，/w维度/gi直接/ad指/v的/ude1是/vshi事实/n表/n，/w业务/gi层级/n不会/v通过/p维度/gi之间/f的/ude1参照/v完整性/gi来/vf部署/gi。/w▲/w图/gi2/nz /x星形/n模型/gi　　/nz2./nz业务模型/gi主键/nz是/vshi一个/mq单独/d的/ude1唯一/b键/n(/nz数据/gi属性/gi)/nz，/w为/p特殊/a数据/gi所/usuo选择/gi。/w在/p上面/f的/ude1例子/gi中/f，/wadvertiser/nz_/nzid/nz就/d将/d是/vshi一个/mq主键/nz。/w外键/gi(/nz参考/gi属性/gi)/nz仅仅/d是/vshi一个表/nz中的/v字段/gi，/w用来/v匹配/gi其他/rzv维度表/nz中的/v主键/nz。/w在/p我们/rr所/usuo引用/gi的/ude1例子/gi中/f，/wadvertiser/nz_/nzid/nz将/d是/vshiaccount/nz_/nzdimension/nz的/ude1一个/mq外键/gi。/w在/p雪花/n模型/gi中/f，/w数据模型/gg的/ude1业务/gi层级/n是/vshi由/p一个/mq不同/a维度表/nz主键-外键/nz的/ude1关系/gi来/vf代表/nnt的/ude1。/w而/cc在/p星形/n模型/gi中/f，/w所有/b必要/a的/ude1维度表/nz在/p事实/n表/n中都/ns只/d拥有/v外键/gi。/w　　/nz3./nz性能/gi第三/nz个/q区别/gi在于/v性能/gi的/ude1不同/a。/w雪花/n模型/gi在/p维度表/nz、/w事实/n表/n之间/f的/ude1连接/gi很/d多/a，/w因此/c性能/gi方面/n会/v比较/gi低/a。/w举/v个/q例子/gi，/w如果/c你/rr想要/v知道/vadvertiser/nz的/ude1详细信息/nz，/w雪花/n模型/gi就/d会/v请求/gi许/v多/a信息/gi，/w比如/vadvertiser name/nz、/wid/nz以及/cc那些/rz广告主/n和/cc客户/n表/n的/ude1地址/gi需要/v连接起来/l，/w然后/c再/d与/cc事实/n表/n连接/gi。/w而/cc星形/n模型/gi的/ude1连接/gi就/d少/a的/ude1多/a，/w在/p这个/rz模型/gi中/f，/w如果/c你/rr需要/v上述/b信息/gi，/w你/rr只要/c将/dadvertiser/nz的/ude1维度表/nz和/cc事实/n表/n连接/gi即可/v。/w　　/nz4./nzetl/nz雪花/n模型/gi加载/gi数据/gi集市/n，/w因此/cetl/nz操作/gi在/p设计/gi上/f更加/d复杂/a，/w而且/c由于/p附属/vn模型/gi的/ude1限制/vn，/w不能/v并行化/nz。/w星形/n模型/gi加载/gi维度表/nz，/w不/d需要/v再/d维度/gi之间/f添加/gi附属/vn模型/gi，/w因此/cetl/nz就/d相对/d简单/a，/w而且/c可以/v实现/gi高度/d的/ude1并行化/nz。/w　　/nz总结/gi雪花/n模型/gi使得/vi维度/gi分析/gi更加/d容易/ad，/w比如/v“/w针对/gi特定/b的/ude1广告主/n，/w有/vyou哪些/ry客户/n或者/c公司/nis是/vshi在线/vn的/ude1?/nz”星形/nz模型/gi用来/v做/v指标/gi分析/gi更/d适合/v，/w比如/v“/w给定/gi的/ude1一个/mq客户/n他们/rr的/ude1收入/gi是/vshi多少/ry?/nz”/w