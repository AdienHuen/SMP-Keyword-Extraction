#算法导论/gi―/w―/w（/w4/nz）/w有序统计树/gi（/wOrderStatisticTree/nz，/w以/p红黑树/gi为/p基本/a数据结构/gi）/w
有序统计树/gi是/vshi以/p红黑树/gi为/p基本/a数据结构/gi，/w增加/v了/ule一个/mq字段/gisize/nz,/nzsize/nz表示/v以/p当前/t结点/gm为/p树根/n的/ude1树上/s的/ude1节点/gi数目/gi，/w很/d明显/a有/vyou这样/rzv的/ude1关系/gi根/n节点/gi的/ude1size/nz等于/v左孩子/gi的/ude1size/nz加上/v右/f孩子/gi的/ude1size/nz+/nz1。/nz /x另外/c，/w如果/c之前/f有/vyou了解/v过/uguo有序/gi统计/gi量/n的/ude1相关知识/gi，/w其中/rz有一个/nz操作/gi便是/v查找/gi排好/nz顺序/gi的/ude1列表/vi中的/v某个/rz特定/b索引/gi的/ude1元素/gi。/w那么/c有序统计树/gi也/d是/vshi在/p红黑树/gi的/ude1基础上/nz加/v了/ule这个/rz操作/gi。/w下面/f来/vf分析/giost/nz（/w有序统计树/gi）/w在/p红黑/nz树上/s变化/gi的/ude1部分/n。/w /x1./nz每个/r结点/gm多/a了/ule一个/mqsize/nz属性/gi，/w叶子节点/gi的/ude1size/nz=/nz1/nz，/wnil/nz（/w哨兵/nnd结点/gm）/w的/ude1size/nz=/nz0/nz；/w /x2./nz当/p我们/rr插入/gi一个/mq行/ng的/ude1结点/gm时/qt我们/rr要/v修改/gi插入/gi点/gi路径/gi上/f的/ude1所有/b父/ng节点/gi的/ude1size/nz+/nz1/nz；/w同时/c因为/c在/p插入/gi结点/gm的/ude1时候/n要/v维护/gi红黑树/gi的/ude1性质/n，/w那么/c涉及/v到/v左旋转/nz和/cc右/f旋转/gi的/ude1操作/gi，/w就/d需要/v调整/vn变动/vn结点/gm的/ude1size/nz，/w删除/gi操作/gi也/d是/vshi一样/uyy，/w在/p红黑树/gi删除/gi维护/gi操作/gi时/qt，/w也/d要/v进行/vn左右/f旋/vg操作/gi，/w所以/c也/d要/v进行/vn结点/gm的/ude1size/nz调整/vn在/p这里/rzs我们/rr我们/rr先/d分析/gi右/f旋转/gi操作/gi  /x如图所示/i：/w /x当/p进行/vn右旋/nz操作/gi时/qt，/wy/nz取代/v了/ulex/nz的/ude1位置/gi，/w那么/cy/nz./nzsize/nz=/nzx/nz./nzsize/nz,/nz因为/c原来/dx/nz的/ude1size/nz等于/v该/rz树上/s所有/b节点/gi的/ude1数目/gi。/w转完/v之后/fx/nz的/ude1size/nz也/d要/v更新/gi /x即/v：/w y/nz./nzsize/nz=/nzx/nz./nzsize/nz;/nz x/nz./nzsize/nz=/nzx/nz./nzleft/nz./nzsize/nz+/nzx/nz./nzright/nz./nzsize/nz+/nz1/nz;/nz /x左旋/nz操作/gi是/vshi一样/uyy的/ude1删除/gi操作/gi：/w /x删除/gi一个/mq节点/gi，/w那么/c它/rr的/ude1上层/f的/ude1所有/b父/ng节点/gi的/ude1size/nz要/v减/v一/nz。/w /x1/nz）/w当/p删除/gi结点/gm只有/c一个/mq孩子/gi时/qt，/w删除/gi该/rz节点/gi，/w孩子/gi节点/gi替换/v他/rr的/ude1位置/gi，/w并不需要/l调整/vn其他/rzv结点/gm的/ude1size /nz2/nz）/w当/p删除/gi结点/gm有/vyou两/nz个/q孩子/gi节点/gi时/qt，/w我们/rr先/d找到/v该/rz节点/gi的/ude1替换/v结点/gm（/w它/rr在/p删除/gi结点/gm的/ude1右子/nz树上/s，/w可能/v直接/ad是/vshi删除/gi结点/gm的/ude1右/f孩子/gi）/w，/w替换/v结点/gm的/ude1size/nz是/vshi删除/gi结点/gm的/ude1size/nz-/nz1/nz（/w树上/s少/a了/ule一个/mq节点/gi）/w，/w其他/rzv都/d不变/nz