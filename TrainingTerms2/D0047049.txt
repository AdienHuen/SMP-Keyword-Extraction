#虚拟化技术/gi
参考文献/nz：/w从/p1960/nz年/qt开始/v就/d有/vyou了/ule虚拟化/gi的/ude1概念/gi，/w当时/tibm/nz在/pcambridge/nz科研中心/nt大力/d投入研究/nz该/rz方向/gi。/w相关/vn开发/gi一直/d在/p推进/vi，/w但是/c真正/d的/ude1突破性/n进展/vn是/vshi1999/nz年/qtvmware/gi推出/v的/ude1虚拟化/gi平台/gi，/w最终/d将/d虚拟化/gi成功/a推向/v了/ule市场/gi。/w正是/v在/pvmware/gi助力/b下/f，/w才/d开创/v出/vf了/ulehypervisor/gi级别/n虚拟化/gi的/ude1巨大/a市场/gi。/w虚拟化技术/gi就是指/i把/pba一个/mq物理/n单元/n虚拟/gi成/v多/a个/q逻辑/n单元/n，/w供/vi多/a个/q应用/gi一起/s使用/gi。/w这样/rzv做/v的/ude1主要/b目的/gi是/vshi为了/p提高/v资源/gi的/ude1使用/gi效率/gi并/cc方便管理/n各种/rz资源/gi./nz目前/t云计算/gi模式/gi的/ude1提出/v，/w无论是/c私有云/nz，/w公有云/gi，/w还是/c混合云/nz，/w都/d需要/v资源/gi的/ude1整合/gi，/w统一/vn资源/gi为/p客户/n提供/v服务/gi，/w这/rzv就/d要求/n系统资源/gi具有/v高性能/gi的/ude1处理/vn能力/gi。/w目前/t单个/b昂贵/a的/ude1服务器/gi的/ude1处理/vn能力/gi仅/d使用/gi到/v20%/nz，/w造成了/v资源/gi的/ude1浪费/gi，/w虚拟化技术/gi解决/v了/ule上述/b问题/gi，/w使/v服务器/gi处理/vn能力/gi得到/v了/ule充分/ad的/ude1利用/v。/w计算机系统/gi的/ude1抽象层次/gi通过/p分层/v组织/gi，/w由/p底层/n的/ude1硬件/gi和/cc高层/n的/ude1软件/gi实现/gi。/w虚拟化/gi（/wvirtualization/nz）/w就是/v由/p位于/v下层/f的/ude1软件/gi，/w通过/p向上/vi一层/nz软件/gi提供/v一个/mq与/cc它/rr原来/d所/usuo期待/v的/ude1运行/gi环境/n完全一致/i的/ude1接口/gi的/ude1方法/gi，/w抽象/gi出/vf一个/mq虚拟/gi的/ude1软件/gi或硬件/n接口/gi，/w使得/vi上层/f的/ude1软件/gi可以/v直接/ad运行/gi在/p虚拟/gi的/ude1环境/n上/f。/w一般来说/vl，/w虚拟化/gi的/ude1计算机/gi通过/p一种/nz叫/vi虚拟机/gi监控器/n（/wvirtual machinemonitor/nz，/wvmm/gi）/w的/ude1程序/gi在/p物理/n硬件/gi之上/f生成/v许多/m可以/v运行/gi独立/a操作系统/gi软件/gi的/ude1虚拟机/gi（/wvm/nz)/nz。/w如/v下图/n虚拟化技术/giesx/nz的/ude1结构/gi：/w虚拟化/gi是/vshi指为/v运行/gi的/ude1程序/gi或/c软件/gi营造/v它/rr所/usuo需要/v的/ude1执行/v环境/n，/w在/p采用/v虚拟化技术/gi后/f，/w程序/gi或/c软件/gi的/ude1运行/gi不再/d独享/v底层/n的/ude1物理/n计算/gi资源/gi，/w它/rr只是/d运行/gi在/p一个/mq完全相同/nz的/ude1物理/n计算/gi资源/gi中/f，/w而/cc底层/n的/ude1影响/gi可能/v与/cc之前/f所/usuo运行/gi的/ude1计算机/gi结构/gi完全/ad不同/a。/w虚拟化/gi的/ude1主要/b目的/gi是/vshi对/pit/gi基础设施/gi和/cc资源/gi管理/gi方式/n的/ude1简化/gi，/w从/p虚拟化/gi的/ude1目的/gi来看/u，/w虚拟化技术/gi主要/b分为/v以下/f几/d个/q大类/n：/w1/nz、/w平台/gi虚拟化/gi（/wplatform virtualization/nz）/w，/w它/rr是/vshi针对/gi计算机/gi和/cc操作系统/gi的/ude1虚拟化/gi，/w又/d分成/vi服务器虚拟化/gi和/cc桌面虚拟化/gi。/w服务器虚拟化/gi是/vshi一种/nz通过/p区分/v资源/gi的/ude1优先/vd次序/gi，/w并/cc将/d服务器/gi资源分配/gi给/p最/d需要/v它们/rr的/ude1工作/gi负载/gi的/ude1虚拟化/gi模式/gi，/w它/rr通过/p减少/v为/p单个/b工作/gi负载峰/nz而/cc储备/vn的/ude1资源/gi来/vf简化/gi管理/gi和/cc提高效率/nz，/w服务器虚拟化/gi抽象/gi了/ule硬件资源/l，/w包括/v虚拟/gibios/nz、/w虚拟/gicpu/gi、/w虚拟内存/gi、/w虚拟/gi设备/gi和/cc虚/aio/gi。/w虚拟服务器/gi提供/v了/ule良好/a的/ude1隔离/vn性/ng和/cc安全性/gi。/w桌面虚拟化/gi是/vshi为/p提高/v人/n对/p计算机/gi的/ude1操控力/nz，/w降低/v计算机/gi使用/gi的/ude1复杂性/gi，/w为/p用户/gi提供/v更加/d方便/a适用/vi的/ude1使用环境/gi的/ude1一种/nz虚拟化/gi模式/gi。/w平台/gi虚拟化/gi主要/b通过/pcpu/gi虚拟化/gi、/w内存/gi虚拟化/gi和/cci/nz//nzo/nz接口/gi虚拟化/gi来/vf实现/gi。/w服务器虚拟化/gi的/ude1模型/gi如下/vi：/w2/nz、/w资源/gi虚拟化/gi（/wresource virtualization/nz）/w，/w针对/gi特定/b的/ude1计算/gi资源/gi进行/vn的/ude1虚拟化/gi，/w例如/v，/w存储虚拟化/gi、/w网络/gi资源/gi虚拟化/gi等/udeng。/w存储虚拟化/gi是/vshi指/v把/pba操作系统/gi有机/b地/ude2分布/vi于/p若/c干/v内外/f存储器/gi，/w两者/rzv结合/v成为/v虚拟存储器/gi。/w网络/gi资源/gi虚拟化/gi最/d典型/n的/ude1是/vshi网/n计算/gi，/w网/n计算/gi通过/p使用/gi虚拟化技术/gi来/vf管理网络/n上/f的/ude1数据/gi，/w并/cc在/p逻辑/n上将/nnt其/rz作为/p一个/mq系统/gi呈现/v给/p消费者/n，/w它/rr动态/gi地/ude2提供/v了/ule符合/v用户/gi和/cc应用程序/nz需求/gi的/ude1资源/gi，/w同时/c还/d将/d提供/v对/p基础设施/gi的/ude1共享/gi和/cc访问/gi的/ude1简化/gi，/w当前/t比较/gi火/n的/ude1云计算/gi技术/gi就是/v网/n计算/gi的/ude1延伸/v。/w3/nz、/w应用程序/nz虚拟化/gi（/wapplication virtualization/nz）/w，/w它/rr包括/v仿真/vn、/w模拟/gi、/w解释/gi技术/gi等/udeng。/wjava/gi虚拟机/gi是/vshi典型/n的/ude1在/p应用层/gi进行/vn虚拟化/gi。/w基于/p应用层/gi的/ude1虚拟化技术/gi，/w通过/p保存/gi用户/gi的/ude1个性化/gi计算/gi环境/n的/ude1配置/gi信息/gi，/w可以/v实现/gi在/p任意/d计算机/gi上/f重现/v用户/gi的/ude1个性化/gi计算/gi环境/n。/w服务/gi虚拟化/gi是/vshi近年/t研究/gi的/ude1一个/mq热点/gi，/w服务/gi虚拟化/gi可以/v使/v业务/gi用户/gi能/v按/p需/v快速/d构建/gi应用/gi的/ude1需求/gi，/w通过/p服务/gi聚合/gi，/w可/v屏蔽/v服务/gi资源/gi使用/gi的/ude1复杂性/gi，/w使/v用户/gi更/d易于/vd直接/ad将/d业务/gi需求/gi映射/gi到/v虚拟化/gi的/ude1服务/gi资源/gi。/w现代/ntc软件体系结构/gi及其/cc配置/gi的/ude1复杂性/gi阻碍/v了/ule软件开发/nz生命周期/nz，/w通过/p在/p应用/gi层/gi建立/gi虚拟化/gi的/ude1模型/gi，/w可以/v提供/v最佳/z开发/gi测试/gi和/cc运行/gi环境/n。/w除了/p在/p使用/gi多/a年/qt的/ude1jvm/nz，/w2013/nz年/qt发布/gi的/ude1docker/gi技术/gi也/d是/vshi一个/mq应用/gi虚级/nz化/v的/ude1例子/gi，/wdocker/gi技术/gi的/ude1核心/n是/vshilinux/gi容器/gi（/wlxc/nz）/w，/wcontainer/nz具有/v着/uzhe一定/b的/ude1隔离/vn性/ng，/w各个/rzcontainer/nz之间/f的/ude1数据/gi和/cc内存空间/nz相互/d隔离/vn，/w保证/v一定/b的/ude1安全性/gi。/wdocker/gi虚拟化/gi的/ude1模型/gi如下/vi：/w4/nz、/w表示层/n虚拟化/gi。/w /x在/p应用/gi上/f与/cc应用程序/nz虚拟化/gi类/gi，/w所/usuo不同/a的/ude1是/vshi表示层/n虚拟化/gi中的/v应用程序/nz运行/gi在/p服务器/gi上/f，/w客户机/nz只/d显示/gi应用程序/nz的/ude1ui/gi界面/gi和/cc用户/gi操作/gi。/w表示层/n虚拟化/gi软件/gi主要/b有/vyou微软/ntc的/ude1windows/gi远程桌面/nz（/w包括/v终端/gi服务/gi）/w、/wcitrixmetaframe presentation server/nz和/cc symantec pcanywhere/nz等/udeng。/w通常/d实际/n开发/gi经常/d提到/v的/ude1虚拟化/gi主要/b是/vshi指/v平台/gi虚拟化/gi，/w它/rr通过/p控制/vn程序/gi隐藏/v计算/gi平台/gi的/ude1实际/n物理/n特性/gi，/w /x为/p用户/gi提供/v抽象/gi的/ude1、/w /x统一/vn的/ude1、/w模拟/gi的/ude1计算/gi环境/n。/w通常/d虚拟化/gi可以/v通过/p指令/gi级/q虚拟化/gi和/cc系统/gi级/q虚拟化/gi来/vf实现/gi。/w指令/gi虚拟化/gi是/vshi指/v指令集/gi层次/n上/f实现/gi虚拟化/gi，/w即将/d某个/rz硬件平台/l上/f的/ude1二进制/gi代码/gi转换/gi为/p另一个/nz平台/gi上/f的/ude1二进制/gi代码/gi，/w实现/gi不同/a指令/gi集间/nz的/ude1兼容/vi，/w也/d被称作/n“/w二进制/gi翻译/gi”/w。/w二进制/gi翻译/gi是/vshi通过/p仿真/vn来/vf实现/gi的/ude1，/w即/v在/p一个/mq具有/v某种/rz接口/gi和/cc功能/gi的/ude1系统/gi上/f实现/gi另一种/nz与/cc之/uzhi具有/v不同/a接口/gi和/cc功能/gi的/ude1系统/gi。/w二进制/gi翻译/gi的/ude1软件/gi方式/n，/w它/rr可以/v有/vyou3/nz种/q方式/n实现/gi：/w解释/gi执行/v、/w静态/gi翻译/gi、/w动态/gi翻译/gi。/w最新/a的/ude1二进制/gi翻译/gi系统/gi的/ude1研究/gi主要/b在/p运行/gi时/qt编译/gi、/w自适应/gi优化/gi方面/n，/w由于/p动态/gi翻译/gi和/cc执行/v过程/gi的/ude1时间/gi开销/n主要/b包括/v四部分/nz：/w即/v磁盘/gi访问/gi开销/n、/w存储/gi访问/gi开销/n、/w翻译/gi和/cc优化/gi开销/n、/w目标/gi代码/gi的/ude1执行/v开销/n，/w所以/c要/v提高/v二进制/gi翻译/gi系统/gi的/ude1效率/gi主要/b应/v减少/v后/f3/nz个/q方面/n的/ude1开销/n。/w目前/t典型/n的/ude1二进制/gi翻译/gi系统/gi主要/b有/vyoudaisy/nz//nzboa/nz、/wcrusoe/nz、/waeries/nz、/wia/nz-/nz32/nzel/nz、/wdynamo/nz动态/gi优化/gi系统/gi和/ccjit/nz编译/gi技术/gi等/udeng。/w系统/gi虚拟化/gi是/vshi在/p一台/nz物理/n机上/s虚拟/gi出/vf多/a个/q虚拟机/gi。/w从/p系统架构/gi看/v，/w虚拟机/gi监控器/n（/wvmm/gi）/w是/vshi整个/b虚拟机/gi系统/gi的/ude1核心/n，/w它/rr承担/v了/ule资源/gi的/ude1调度/vn、/w分配/gi和/cc管理/gi，/w保证/v多/a个/q虚拟机/gi能够/v相互/d隔离/vn的/ude1同时/c运行/gi多/a个/q客户/n操作系统/gi。/w系统/gi级/q虚拟化/gi要/v通过/pcpu/gi虚拟化/gi、/w内存/gi虚拟化/gi和/cci/nz//nzo/nz虚拟化/gi实现/gi。/wcpu/gi虚拟/gi化为/v每个/r虚拟机/gi提供/v一个/mq或/c多/a个/q虚拟/gicpu/gi，/w多/a个/q虚拟/gicpu/gi分时/d复用/gi物理/ncpu/gi，/w任意/d时刻/n一个/mq物理/ncpu/gi只能/v被/pbei一个/mq虚拟/gicpu/gi使用/gi。/wvmm/gi必须/d为/p各/rz虚拟/gicpu/gi合理/a分配/gi时间/gi片/q并/cc维护/gi所有/b虚拟/gicpu/gi的/ude1状态/gi，/w当/p一个/mq虚拟/gicpu/gi的/ude1时间/gi片/q用/p完/vi需要/v切换/vn时/qt，/w要/v保存/gi当前/t虚拟/gicpu/gi的/ude1状态/gi，/w将/d被/pbei调度/vn的/ude1虚拟/gicpu/gi的/ude1状态/gi载入/v物理/ncpu/gi。/wcpu/gi虚拟化/gi需要/v解决/v的/ude1问题/gi是/vshi：/w①/nz虚拟/gicpu/gi的/ude1正确/a运行/gi，/w虚拟/gicpu/gi正确/a运行/gi的/ude1关键/n是/vshi保证/v虚拟机/gi指令/gi正确/a执行/v，/w各/rz虚拟机/gi之间/f不/d互相/d影响/gi，/w即/v指令/gi的/ude1执行/v结果/n不/d改变/v其他/rzv虚拟机/gi的/ude1状态/gi，/w目前/t主要/b是/vshi通过/p模拟/gi执行/v和/cc监控/gi运行/gi；/w②虚拟/nzcpu/gi的/ude1调度/vn。/w虚拟/gicpu/gi的/ude1调度/vn是/vshi指/v由/pvmm/gi决定/v当前/t哪/ry一个/mq虚拟/gicpu/gi实际/n在/p物理/ncpu/gi上/f运行/gi，/w保证/v虚拟机/gi之间/f的/ude1隔离/vn性/ng、/w虚拟/gicpu/gi的/ude1性能/gi、/w调度/vn的/ude1公平/a。/w虚拟机/gi环境/n的/ude1调度/vn需求/gi是/vshi要/v充分利用/ncpu/gi资源/gi、/w支持/v精确/gi的/ude1cpu/gi分配/gi、/w性能/gi隔离/vn、/w考虑/v虚拟机/gi之间/f的/ude1不/d对等/vn、/w考虑/v虚拟机/gi之间/f的/ude1依赖/v。/w内存/gi虚拟化/gi主要/b通过/pvmm/gi采用/v分块/v共享/gi的/ude1思想来/nz虚拟/gi计算机/gi的/ude1物理/n内存/gi。/wvmm/gi将/d机器/gi的/ude1内存/gi分配/gi给/p各个/rz虚拟机/gi，/w并/cc维护/gi机器/gi内存/gi和/cc虚拟机/gi内存/gi之间/f的/ude1映射/gi关系/gi，/w这些/rz内存/gi在/p虚拟机/gi看来/v是/vshi一/nz段/q从/p地址/gi0/nz开始/v的/ude1、/w连续/gi的/ude1物理地址/gi空间/n。/w在/p进行/vn内存/gi虚拟化/gi后/f，/w内存地址/nz将/d有/vyou机器/gi地址/gi、/w伪/ag物理地址/gi和/cc虚拟地址/gi三种/nz地址/gi。/wi/nz//nzo/nz虚拟化/gi是/vshi个/q比较复杂/l的/ude1地方/n，/w由于/pi/nz//nzo/nz设备/gi具有/v异构/gi性/ng强/a，/w内部/f状态/gi不易控制/n等/udeng特点/n，/wvmm/gi系统/gi针对/gii/nz//nzo/nz设备/gi虚拟化/gi主要/b有/vyou全/a虚拟化/gi、/w半虚/nz拟化/nz、/w软件/gi模拟/gi和/cc直接/adi/nz//nzo/nz访问/gi等/udeng设计思路/gi。/w比较/gi常见/a的/ude1几种/nz虚拟化/gi软件/gi如下/vi：/w1/nz、/wredhat kvm/nz：/w  kvm /nz是/vshi指/v基于/p linux /nz内核/gi的/ude1虚拟机/gi（/wkernel/nz-/nzbased virtual machine/nz）/w。/w /x2006/nz /x年/qt /x10/nz /x月/n，/w由/p以色列/nsf的/ude1qumranet /nz组织/gi开发/gi的/ude1一种/nz新的/a“/w虚拟机/gi”/w实现/gi方案/gi。/w /x2007/nz /x年/qt /x2/nz /x月/n发布/gi的/ude1 linux /nz2.6.20/nz /x内核/gi第一次/nz包含/v了/ule kvm /nz。/w增加/v kvm /nz到/v linux /nz内核/gi是/vshi linux /nz发展/gi的/ude1一个/mq重要/a里程碑/gi，/w这/rzv也/d是/vshi第一个/gi整合/gi到/v linux /nz主线/n内核/gi的/ude1虚拟化技术/gi。/wkvm /nz在/p标准/gi的/ude1 linux /nz内核/gi中/f增加/v了/ule虚拟/gi技术/gi，/w从而/c我们/rr可以/v通过/p优化/gi的/ude1内核/gi来/vf使用/gi虚拟/gi技术/gi。/w在/p kvm /nz模型/gi中/f，/w每/rz一个/mq虚拟机/gi都/d是/vshi一个/mq由/p linux /nz调度/vn程序管理/n的/ude1标准/gi进程/gi，/w你/rr可以/v在/p用户/gi空间/n启动/gi客户机/nz操作系统/gi。/w一个/mq普通/a的/ude1 linux /nz进程/gi有/vyou两/nz种/q运行/gi模式/gi：/w内核/gi和/cc用户/gi。/w kvm /nz增加/v了/ule第三种/nz模式/gi：/w客户/n模式/gi（/w有/vyou自己/rr的/ude1内核/gi和/cc用户/gi模式/gi）/w。/wkvm/nz包括/v以下/f两/nz个/q组件/gi：/w管理/gi虚拟/gi硬件/gi的/ude1设备驱动/gi，/w这个/rz驱动/gi通过/p一个/mq字符/gi设备/gi /x//nzdev/nz//nzkvm /nz导出/gi它/rr的/ude1功能/gi。/w通过/p /x//nzdev/nz//nzkvm/nz每/rz一个/mq客户机/nz拥有/v其/rz自身/rr的/ude1地址/gi空间/n，/w这个/rz地址/gi空间/n与/cc内核/gi的/ude1地址/gi空间/n相分离/nz或/c与/cc任何/rz一个/mq正/d运行/gi着/uzhe的/ude1客户机/nz相分离/nz。/w模拟/gi硬件/gi的/ude1用户/gi空间/n部件/n，/w它/rr是/vshi一个/mq稍微/d改动/vn过/uguo的/ude1 qemu /nz进程/gi。/w从/p客户机/nz操作系统/gi执行/v i/nz//nzo /nz会/v拥有/vqemu /nz。/w qemu /nz是/vshi一个/mq平台/gi虚拟化/gi方案/gi，/w它/rr允许/v整个/b pc /nz环境/n（/w包括/v磁盘/gi、/w显示/gi卡/n（/w图形卡/nz）/w、/w网络设备/gi）/w的/ude1虚拟化/gi。/w任何/rz客户机/nz操作系统/gi所/usuo发出/v的/ude1 i/nz//nzo /nz请求/gi都/d被/pbei拦截/v，/w并/cc被/pbei路由/gi到/v用户/gi模式/gi用以/d被/pbei qemu /nz过程/gi模拟/gi仿真/vn。/wkvm/nz的/ude1架构/gi如下/vi：/w2/nz、/wvmware esx/nz是/vshi由/pvmware/gi公司/nis开发/gi的/ude1一种/nz架构/gi，/w与/cckvm/nz不同/a的/ude1是/vshivmware kernel/nz是/vshi专有/gi的/ude1，/w那/rzv就/d意味着/vvmware/gi不得不/d开发/gi和/cc维护/gi整个/b协议/gi栈/gi，/w会/v导致/gi开发/gi速度/n会/v减慢/v，/w你/rr的/ude1硬件/gi可能/v要/v等/udeng一段时间/nz才/d会/v得到/vvmware/gi的/ude1支持/v。/w其/rz架构/gi如下/vi：/w3/nz、/wcitrix xenserver/nz为了/p改善/v虚拟机/gi技术/gi（/wvirtual machine monitor/nz）/w的/ude1性能/gi，/w一种/nz新的/a准/a虚拟化技术/gi（/wpara/nz-/nzvirtualizion/nz）/w技术/gi诞生/gi了/ule。/w这种/r虚拟/gi技术/gi以/pxen/nz为/p代表/nnt，/w其/rz特点/n是/vshi修改/gi操作系统/gi的/ude1内核/gi，/w加入/v一个/mqxen hypervisor/nz层/gi。/w它/rr允许/v安装/gi在/p同一/b硬件/gi设备/gi上/f的/ude1多/a个/q系统/gi可以/v同时/c启动/gi，/w由/pxen hypervisor/nz来/vf进行/vn资源/gi调配/gi。/w在/p这种/r虚拟环境/gi下/f，/w依然/d需要/v模拟/gi硬件/gi设备/gi，/w安装/giguest/nz操作系统/gi，/w并且/c还/d需要/v修改/gi操作系统/gi的/ude1内核/gi。/wxen/nz相对于/nz传统/n的/ude1virtual machine monitor/nz，/w性能/gi稍/d有/vyou提高/v，/w但/c并不/d十分/d显著/ad。/w为了/p进一步提高/i性能/gi，/wintel/gi和/ccamd/nz分别/d开发/gi了/ulevt/nz和/ccpacifica/nz虚拟/gi技术/gi，/w将/d虚拟/gi指令/gi加入/v到/v了/ule cpu/nz中/f。/w使用/gi了/ulecpu/gi支持/v的/ude1硬件/gi虚拟/gi技术/gi，/w将/d不再/d需要/v修改/gi操作系统/gi内核/gi，/w而是/c由/pcpu/gi指令集/gi进行/vn相应/vi的/ude1转换/gi操作/gi。/w其/rz架构/gi如下/vi：/w4/nz、/wmicrosoft hyper/nz-/nzv   /nz在/p微软/ntchyper/nz-/nzv模型/gi中/f，/whypervisor/gi层/gi直接/ad运行/gi于/p物理/n服务器/gi硬件/gi之上/f。/w所有/b的/ude1虚拟/gi分区/gi都/d通过/phypervisor/gi与/cc硬件/gi通信/gi，/w其中/rz的/ude1hypervisor/gi是/vshi一个/mq很小/a、/w效率/gi很高/d的/ude1代码/gi集/q，/w负责/v协调/gi这些/rz调用/gi。/w    /x微软/ntc的/ude1虚拟化/gi架构/gi如/v下图/n所示/nz，/w其中/rz最底层/n为/p服务器/gi硬件/gi架构/gi，/w它/rr包含/vamd/nz-/nzv/nz、/wintel vt/nz、/wdep/nz等/udeng硬件/gi支持/v，/w再/d上层/f就是/v微软/ntc的/ude1windows hypervisor/nz，/w在/p虚拟/gi的/ude1每一个子/nz系统/gi之间/f都/d是/vshi通过/pvmbus/nz进行/vn通信/gi，/w包括/v主/ag系统/giwindows server /nz2008/nz在/p内/f，/w所有/b的/ude1os/gi都/d是/vshi通过/pvmbus/nz的/ude1一种/nz机制/gi与/cchypervisor/gi进行/vn通信/gi，/w其中/rz父/ng分区/gi，/w可/v简单理解/gi为/pwindows server /nz2008/nz宿主/n系统/gi所在/n分区/gi，/w它/rr与/cchypervisor/gi的/ude1通信/gi是/vshi通过/pvsp/nz传送/v给/pvmbus/nz，/w再/d通过/pvmbus/nz与/cchypervisor/gi的/ude1联系/gi到达/v硬件/gi。/w而/cc子/ng分区/gi中的/v系统/gi，/w是/vshi由/pvsc/nz将/d请求/gi发送给/n自已/n的/ude1vmbus/nz，/wvmbus/nz再/d与/cc父/ng分区/gi的/ude1vmbus/nz进行/vn沟通/gi，/w最后/f由/p父/ng分区/gi的/ude1vsp/nz将/d请求/gi传送/v给/phypervisor/gi。/w  /x单独/d的/ude1windows server /nz2008/nz在/p安装/gi之后/f是/vshi直接/ad与/cc硬件/gi通信/gi，/w但/c当/p在/p系统/gi中/f启用/gi了/ulehypervisor/gi，/w该/rzwindows server /nz2008/nz也/d将/d作为/p一个/mqhypervisor/gi的/ude1一个/mq虚拟/gi系统/gi与/cc其它/rz子系统/gi几乎/d是/vshi并列/v的/ude1存在/v，/w所/usuo不同/a的/ude1是/vshiwindows server /nz2008/nz作为/p父/ng分区/gi的/ude1宿主机/n，/w承载/v了/ule所有/b子/ng分区/gi中/f虚拟/gi系统/gi的/ude1驱动程序/gi。/w为/p子/ng分区/gi中/f系统/gi的/ude1安全性/gi又/d上/f了/ule大大的/nz一把锁/nz。/w还有/v一种/nz硬件/gi分区/gi技术/gi，/w硬件资源/l被/pbei划分/v成/v数/n个/q分区/gi，/w每个/r分区/gi享有/v独立/a的/ude1cpu/gi、/w内存/gi，/w并/cc安装/gi独立/a的/ude1操作系统/gi。/w在/p一台/nz服务器/gi上/f，/w存在/v有/vyou多/a个/q系统/gi实例/gi，/w同时/c启动/gi了/ule多/a个/q操作系统/gi。/w这种/r分区/gi方法/gi的/ude1主要/b缺点/gi是/vshi缺乏/v很好/ad的/ude1灵活性/gi，/w不能/v对/p资源/gi做出/v有效/gi调配/gi。/w随着/p技术/gi的/ude1进步/vn，/w现在/t对于/p资源/gi划分/v的/ude1颗粒/n已经/d远远/d提升/gi，/w例如/v在/pibmaix/nz系统/gi上/f，/w对/pcpu/gi资源/gi的/ude1划分/v颗粒/n可以/v达到/v0.1/nz个/qcpu/gi。/w这种/r分区/gi方式/n，/w在/p目前/t的/ude1金融/gi领域/gi，/w比如/v在/p银行/gi信息/gi中心/gi得到/v了/ule广泛/a采用/v。/w如下/vi图/giibm/nz提出/v的/ude1技术/gi：/w