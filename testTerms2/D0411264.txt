#上传/v图片/gi至多/d服务器/gi，/w图片/gi共享/gi问题/gi
问题/gi描述/giweb服务器/gi有/vyou多/a个/q，/w访问/gi网站/gi时/qt随机/b指定/v一个/mq服务器/gi提供/v访问/gi服务/gi。/w那么/c当/p我们/rr涉及/v到/v对/p数据库/gi的/ude1select/nz、/wupdate/gi、/wdelete/nz以及/ccinsert/gi就/d需要/v指定/v一个/mq数据库/gi了/ule。/w实现/gi方法/gi完全/ad可以/v通过/p设置/gi配置文件/gi来/vf完成/v。/w比如/v：/w就是/v令/v数据库/gi连接/gi字符串/gi都/d指向/v同一个/bweb服务器/gi（/w或者/c数据库服务器/gi）/w。/w但是/c当/p我们/rr上传/v图片/gi时/qt，/w就/d麻烦/an了/ule。/w比如/v在/p服务器端/gi接收/gi到/v图片/gi后/f，/w我/rr是/vshi这样/rzv保存/gi的/ude1：/w按照/p我/rr所写/v的/ude1，/w这样/rzv图片/gi会/v保存/gi到/v服务器端/gi应用程序/nz下面/f的/ude1photo/nz文件夹/n下/f。/where/nz：/w这样的话/l。。。/w我/rr要是/c有/vyou多/a个/q服务器/gi，/w图片/gi就/d是不是/v随机/b保存/gi到/v某/rz一台/nz服务器/gi上/f，/w这/rzv完全/ad是/vshi靠/v运气/n访问/gi之前/f的/ude1图片/gi嘛/y显然/ad不合理/nz，/w那么/c我/rr采用/v和/cc数据库/gi同样/d的/ude1访问/gi方式/n试试/v呢/y？/w我/rr令/v是/vshi不/d可以/v的/ude1，/wsaveas /nz会/v报错/nz的/ude1。/wsaveas/nz方法/gi被/pbei配置/gi为/p需要/v根/n路径/gi解决方案/gi最后/f同事/n给出/v了/ule他们/rr之前/f的/ude1解决方案/gi：/w在/p存储/gi图片/gi的/ude1服务器/gi上将/nntphoto/nz设置/gi为/p共享/gi。/w在/p其他/rzv服务器/gi上/f的/ude1应用程序/nz下/f删除/gi原有/v的/ude1photo/nz，/w并/cc建立/giphoto/nz虚拟目录/nz。/w下面/f是/vshi具体做法/nz：/w1./nz设置/gi共享文件夹/nz在/p存放/v图片/gi的/ude1服务器/gi上/f设置/gi共享文件夹/nz―/w―/w就是/v那个/rzphoto/nz文件/gi夹注/n：/w当/p你/rr发布/gi到/v网站/gi后/f出现/v输入框/nz要求/n输入/v用户名/n密码/gi时/qt：/w那么/c，/w就/d需要/v为/p共享文件夹/nz添加/gi权限/gi：/weveryone/nz的/ude1读写/gi权限/gi2./nz删除/gi多余/gi的/ude1同名/vn文件夹/n将/d其他/rzv服务器/gi上/f的/ude1应用程序/nz下/f的/ude1photo/nz删除/gi3./nz建立/gi虚拟目录/nz在/p其他/rzv服务器/gi上/f的/ude1应用程序/nz下/f，/w建立/gi虚拟目录/nz需要/v注意/v:/w1./nz虚拟目录/nz的/ude1名称/n必须/d和/cc原有/v名称/n一致/a，/w例如/v这里/rzs必须/d是/vshiphoto/nz2./nz物理/n路径/gi必须/d指向/v图片/gi服务器/gi下/f的/ude1photo/nz文件夹/n，/w必须/d可/v访问/gi3./nz必须/d可/v访问/gi可以/v通过/p设置/gi身份验证/nz方式/n，/w如下/vi：/w这里/rzs的/ude1用户名/n、/w密码/gi都/d是/vshi访问/gi图片/gi服务器/gi的/ude1用户名/n和/cc密码/gi。/w比如/v我/rr这里/rzs就是/v和/cc远程/gi登录/gi的/ude1用户名/n和/cc密码/gi一致/a。/w4./nz设置/gi配置文件/gi这样/rzv就/d设置/gi好/a了/ule，/w但/c运行/gi时/qt还是/c出错/gi，/w好像/v是/vshi权限/gi问题/gi。/w可以/v通过/p设置/gi配置文件/gi来/vf解决/v。/w在/p配置文件/gi中/f加入/v：/w5./nz原有/v的/ude1程序代码/nz不用/d修改/gi奏/v是/vshi这么/rz任性/a！/w总结/giok/nz，/w可以/v咯/y