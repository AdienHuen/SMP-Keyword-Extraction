#一起学/giandroid/gi之/uzhi简单/a了解/vAndroid OS/nz内部/f机制/gi（/w29/nz）/w
对于/pandroid/gi操作系统/gi的/ude1启动/gi过程/gi，/w相对/d比较复杂/l，/w这里/rzs只是/d了解/v一下/m原理/gi。/w做/v过/uguo硬件开发/gi都/d知道/v当/p我们/rr设备/gi接通/v电源/gi后会/n有/vyou一个/mq称作/v“/w引导/v加载/gi程序/gi”/w进行/vn初始化/v，/w我们/rr叫/vi它/rrbootloader/nz，/w那/rzvandroid/gi设备/gi接通/v电源/gi后/f，/w也/d会/v去/vf加载/gi这段/r程序/gi，/w至于/p加载/gibootloader/nz有/vyou用处/n？/w主要/b是/vshi检查/gi硬件/gi特性/gi并/cc将/d操作系统/gi的/ude1第一/mq部分/n加载/gi到/v设备/gi的/ude1存储器/gi中/f，/w当然/d不同/a设备/gi的/ude1引导/v加载/gi程序/gi是/vshi不/d一样/uyy的/ude1。/w在/pandroid/gi设备/gi的/ude1电源/gi接通/v后/f，/w引导/v加载/gi程序/gi分别/d做/v了/ule两步/n，/w主要/b用/p到/v了/ule一个/mq主/ag引导/v加载/gi程序/gi和/cc一个辅/nz引导/v加载/gi程序/gi。/w对于/p主/ag引导/v程序/gi，/w大多/d数/nandroid/gi设备/gi是/vshi无法/v替换/v的/ude1，/w这/rzv是因/nz为主/vi引导/v加载/gi程序/gi被/pbei硬/a编码/gi在/p设备/gi中的/vasic/nz芯片/gi中/f了/ule，/w这些/rz硬编码/nz指令/gi将/d辅/vg引导/v加载/gi程序/gi加载/gi到/v存储器/gi中/f，/w并/cc告诉/v它/rr存储器/gi、/wcpu/gi和/cc操作系统/gi的/ude1位置/gi以及/cc如何/ryv访问/gi它们/rr。/w辅/vg引导/v加载/gi程序/gi可以/v进行/vn定制/n，/w我们/rr称/v之/uzhi定制/n引导/v加载/gi程序/gi，/w它/rr好处/gi在于/v获得/v的/ude1权限/gi比较/gi大/a，/w定制/n引导/v加载/gi程序/gi可以/v使用/gi定制/n文件/gi来/vf替换/v原/b操作系统/gi文件/gi，/w这样/rzv做/v的/ude1好处/gi可以/v更换/v新的/a用户界面/gi或/c功能/gi增强/v的/ude1内核/gi。/w下图/n是/vshiandroid/gi设备/gi引导/v加载/gi具体步骤/nz:/w                              /x1/nz、/w位于/v引导/vrom/nz(/nz只读/v存储器/gi)/nz中的/v特定/b代码/gi会/v找到/v第一级/nz的/ude1引导/v加载/gi程序/gi（/w主/ag引导/v加载/gi程序/gi）/w，/w并/cc将/d其/rz加载/gi到/v存储器/gi中/f。/w引导/vrom/nz是/vshi一个/mqasic/nz芯片/gi，/w并/cc载入/v永久性/n的/ude1编程/gi代码/gi。/w2/nz、/w在/p初始化/v存储器/gi并/cc等到/v硬件/gi准备好/nz之后/f，/w第一级/nz引导/v加载/gi程序/gi会/v加载/gi第二级/nz引导/v加载/gi程序/gi（/w辅/vg引导/v加载/gi程序/gi）/w。/w引导/v加载/gi程序/gi会/v检查/gi安全/gi标记/gi是否/v开启/gi（/ws/nz-/nzon/nz）/w,/nz如果/c已经/d开启/gi，/w那么/c引导/v加载/gi程序/gi只/d会/v加载/gi被/pbei标记/gi的/ude1内核/gi。/w如果/c安全/gi标记/gi是/vshi关闭/gi的/ude1（/ws/nz-/nzoff/nz）/w，/w那么/c引导/v加载/gi程序/gi就/d不再/d检查/gi标记/gi。/w将/d安全/gi标记/gi设置/gi为/ps/nz-/nzoff/nz解开/v其他/rzv安全/gi锁/v，/w使得/vi整个/b文件系统/gi处于/v可写/v状态/gi，/w还/d可以/v做/v其它/rz事情/n，/w比如/v定制/nrecovery/nz程序/gi。/w3/nz、/w引导/v加载/gi程序/gi将/dlinux/gi内核/gi和/cc定制/n化/v内容/gi加载/gi到/v存储器/gi中/f。/w这时/rzt，/w引导/v加载/gi程序/gi将/d对/p硬件/gi的/ude1控制权/n转交/v给/p了/ulelinux/gi内核/gi。/w4/nz、/w初始化/v(/nzinit/nz)/nz进程/gi。/winit/nz进程/gi是/vshi设备/gi上/f运行/gi的/ude1其他/rzv所有/b进程/gi的/ude1前提/n。/w主要/b作用/gi是/vshi初始化/v基础/gi硬件/gi访问/gi以及/cc设备/gi功能/gi所需/nz的/ude1所有/b进程/gi，/w还/d会/v启动/gi用来/v执行/v大/a多数/a应用程序/nz的/ude1dalvik/nz虚拟机/gi的/ude1进程/gi。/w转载/v请/v注明/v出处/n：/w情绪/n控/v_/nz