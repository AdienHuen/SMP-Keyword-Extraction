#基于/p微信硬件公众平台/gi的/ude1智能控制/gi开发流程/gi
通过/p持续/vd的/ude1研发/gi投入/v，/w嵌入式/gi企鹅/n圈/qv主人/n已经/d完全/ad掌握/v微信硬件公众平台/gi的/ude1蓝牙/gi设备/gi接入/vn和/cc后台/gi服务/gi接入/vn技术/gi，/w能够/v快速/d给/p用户/gi提供/v基于/p微信硬件公众平台/gi的/ude1智能控制/gi完整/a解决方案/gi，/w包括/v云平台/gi构建/gi、/w云服务/gi开发/gi、/w微信/gi公众平台/gi接入/vn配置/gi、/w蓝牙/gi外设/gi主板/gi硬件设计/gi和/cc软件开发/nz，/w甚至/d生产/gi也/d可以/v提供/v，/w您/rr只管/d市场/gi销售/gi和/cc运维/gi即可/v。/w项目/gi洽谈/vn请/vqq/gi联系/gi：/w183550631/nz，/w希望/v能够/v完整/a学习/gi整套/b技术/gi者/k持续/vd关注/v嵌入式/gi企鹅/n圈/qv即可/v。/w接下来/vl嵌入式/gi企鹅/n圈/qv会/v陆续/d分享/gi各个/rz部分/n的/ude1关键技术/nz细节/gi。/w一/nz、/w微信硬件公众平台/gi整体/n架构/gi上/f一/nz篇/q《/w物联网/gi架构/gi场景/gi技术/gi分析/gi》/w已经/d探讨/v和/cc分析/gi了/ule物联网/gi架构/gi的/ude1演进/vn，/w基于/p微信硬件公众平台/gi的/ude1智能控制/gi方案/gi即/v属于/v文中/s的/ude1第三种/nz架构--基于/nz统一/vn后台/gi服务/gi的/ude1物/ng联/vg架构/gi。/w其中/rz的/ude1架构/gi如下/vi：/w各/rz部分/n的/ude1角色/gi和/cc分工/gi如下/vi：/w1./nz微信/gi硬件/gi公众号/gi平台/gi服务器/gi，/w是/vshi物联网/gi的/ude1基础/gi和/cc核心/n部分/n，/w其/rz负责/v外设/gi设备/giid/nz的/ude1认证/gi，/w类/gi公安部/nto给/p每个/r公民/n一个/mq身份证/n一样/uyy，/w保证/v每个/r外设/gi都/d有/vyou一个/mq合法/a并且/c唯一/b的/ude1id/nz。/w目前/t微信/gi平台/gi的/ude1设备/giid/nz由/p两/nz部分/n组成/gi，/w一/nz部分/n是/vshi厂商/gi运维/gi的/ude1公众号/gi（/w即/v手机/gi微信/gi关注/v的/ude1公众号/gi）/w的/ude1原始/aid/nz，/w称为/v设备/gi类型/gi，/w即/v代表/nnt生产商/nnd；/w另一/nz部分/n就是/v设备/gi的/ude1id/nz，/w设备/gi由/p厂商/gi负责/v生产/gi，/w要/v保证/v厂商/gi生产/gi的/ude1所有/b设备/gi的/ude1id/nz是/vshi唯一/b的/ude1。/w另外/c，/w其/rz负责/v将/d微信/gi发过来/l的/ude1消息/n转发给/v厂商/gi服务器/gi，/w或者/c转发/gi厂商/gi的/ude1服务器/gi给/p微信/gi，/w这些/rz操作/gi的/ude1前提/n都/d是/vshi要/v通过/p验证/v。/w验证/v的/ude1内容/gi包括/v：/w设备/gi是否/v已经/d通过/p授权/v（/w设备/gi接入/vn前/f需要/v授权/v）/w、/w用户/gi是否/v已经/d绑定/gi了/ule该/rz设备/gi。/w2./nz手机/gi微信/gi，/w其实/d指/v的/ude1是/vshi用户/gi微信/gi关注/v的/ude1公众号/gi页面/gi（/w例如/v嵌入式/gi企鹅/n圈/qv。/w需要/v注意/v的/ude1是/vshi，/w只有/c服务/gi号/q或者/c通过/p验证/v的/ude1订阅/v号/q才能/n开通/v设备/gi功能/gi，/w而/cc嵌入式/gi企鹅/n圈/qv只是/d个人/n订阅/v号/q，/w暂时/d无法/v进行/vn验证/v。/w微信/gi给/p开发者/gi提供/v一种/nz微信/gi测试/gi账号/gi，/w可以/v支持/v硬件/gi设备/gi功能/gi，/w但/c只有/c一年/nz期限/gi）/w。/w其/rz调用/gi微信/gi封装/gi的/ude1蓝牙/gi接口/gi和/cc蓝牙/gi外设/gi进行/vn通信/gi。/w蓝牙/gi接口/gi实现/gi的/ude1协议/gi是/vshi微信/gi定义/gi的/ude1“/w蓝牙/gi外设/gi协议/giairsync/nz”/w。/w3./nz厂商/gi服务器/gi，/w对/p微信硬件公众平台/gi转发/gi的/ude1消息/n进行/vn验证/v（/w在/p厂商/gi数据库/gi中/f检测/gi该/rz用户/gi是否/v已经/d绑定/gi了/ule自家/rr的/ude1设备/gi）/w，/w然后/c按照/p和/cc蓝牙/gi外设/gi拟定/v的/ude1自定义/nz消息/n协议/gi生成/v自定义/nz消息/n。/w发给/v微信硬件公众平台/gi，/w再/d通过/p微信/gi发给/v蓝牙/gi外设/gi。/w厂商/gi服务器/gi是/vshi和/cc微信硬件公众平台/gi直接/ad交互/gi的/ude1，/w厂商/gi服务器/gi需要/v遵循/gi微信/gi定义/gi的/ude1“/w设备/gi接入/vn接口协议/nz”/w。/w4./nz蓝牙/gi外设/gi，/w由/p厂商/gi负责/v生产/gi和/cc销售/gi，/w购买/gi该/rz外设/gi的/ude1终端用户/gi只/d需要/v关注/v该/rz设备/gi的/ude1二维码/nz即可/v用/p手机/gi的/ude1公众号/gi菜单/gi来/vf进行/vn控制/vn。/w二/nz、/w微信/gi智能控制/gi使用场景/gi1./nz购买/gi蓝牙/gi外设/gi产品/gi，/w厂商会/j在/p包装/n外面/f打上/v该/rz设备/gi的/ude1二维码/nz。/w2./nz用户/gi手机/gi扫描/gi该/rz二维码/nz关注/v厂商/gi的/ude1公众号/gi。/w3./nz进入/v公众号/gi，/w对/p菜单/gi进行/vn控制/vn，/w即/v可以/v控制/vn蓝牙/gi外设/gi。/w整个/b过程/gi非常简单/nz，/w如果/c有/vyou块/q蓝牙/gi外设/gi板子/gi就/d可以/v很好/ad体验/v一把/nz了/ule。/w如果/c希望/v学习/gi微信/gi硬件开发技术/gi者/k或者/c购买/gi蓝牙/gi体验/v板/ng的/ude1童鞋/nz们/k可以/v跟/p我/rr联系/gi。/w在/p没有/v蓝牙/gi外设/gi体验/v板/ng前/f还是/c老老实实/z地/ude2扫描/gi关注/v“/w嵌入式/gi企鹅/n圈”/nz的/ude1二维码/nz跟着/v博主/nz深入/ad地/ude2学习/gi整套/b技术/gi吧/y，/w哈哈。三/nz、/w基于/p微信硬件公众平台/gi的/ude1智能控制/gi开发流程/gi1./nz搭建/v云服务器/gi，/w如/v百度/ntc云/gi、/w新浪/ntc云/gi。/w微信/gi公众号/gi的/ude1后台/gi服务/gi一般/ad选择/giphpmysqlapache/nz架构/gi（/w如/v嵌入式/gi企鹅/n圈/qv）/w，/w而/cc微信/gi提供/v的/ude1微信硬件公众平台/gi后台/gi服务/gidemo/gi是/vshijsp/gi，/w所以/c后台/gi架构/gi一般/ad选择/gitomcatjavamysql/nz（/w如/v“/w*/nz*/nz的/ude1接口测试/gi号/q”/w）/w。/w2./nz创建/gi微信/gi公众号/gi，/w并/cc进行/vn认证/gi，/w开通/v硬件/gi设备/gi功能/gi。/w公众号/gi进入/v开发者/gi模式/gi，/w配置/gi厂商/gi服务器/gi的/ude1域名服务/gi地址/gi和/cctoken/gi。/w3./nz微信/gi公众号/gi创建/gi菜单/gi，/w如/v点灯/vi和/cc关灯/vi命令/gi。/w微信/gi提供/v接口/gi进行/vn创建/gi。/w4./nz设备/gi分配/giid/nz，/w并到/v微信硬件公众平台/gi进行/vn授权/v，/w需要/v提供/v厂商/giid/nz、/w设备/giid/nz和/cc蓝牙/gi的/ude1mac/gi地址/gi。/w5./nz厂商/gi服务程序/n开发/gi，/w需要/v遵循/gi微信/gi拟定/v的/ude1“/w设备/gi接入/vn接口协议/nz”/w，/w并/cc制定/gi自定义/nz消息/n协议/gi，/w用于/v和/cc蓝牙/gi外设/gi通信/gi。/w6./nz蓝牙/gi外设/gi程序开发/gi，/w需要/v遵循/gi微信/gi拟定/v的/ude1“/w蓝牙/gi外设/gi协议/giairsync/nz”/w，/w并/cc根据/p自定义/nz消息/n协议/gi对/p外围设备/gi进行/vn控制/vn以上/f过程/gi可以/v通过/p“/w微信/gi公众平台/gi接口/gi调试/gi工具/gi”/w /x进行/vn调试/gi(/nz消息/n接口/gi)/nz，/w蓝牙/gi外设/gi调试/gi可以/v通过/pairsysdebug/nz./nzapk/nz进行/vn调试/gi./nz以上/f协议/gi资料/gi可以/v发消息/n向/p嵌入式/gi企鹅/n圈/qv索取/v。/w四/nz、/w基于/p微信硬件公众平台/gi的/ude1智能控制/gi方案/gi开发/gi专栏/gi介绍/gi接下来/vl嵌入式/gi企鹅/n圈/qv会/v将/d陆续/d公开/ad基于/p微信硬件公众平台/gi的/ude1智能控制/gi开发技术/n细节/gi，/w大致/d内容/gi包括/v：/w1./nz物联网/gi架构/gi和/cc场景/gi分析/gi（/w已/d发/v）/w2./nz基于/p微信硬件公众平台/gi的/ude1智能控制/gi开发流程/gi（/w已/d发/v）/w3./nz云服务器/gi搭建/v和/cc公众号/gi配置/gi4./nz公众号/gi菜单/gi设置/gi5./nz微信/gi消息传递/l过程/gi和/cc微信/gi设备/gi接入/vn接口协议/nz6./nz微信/gi硬件平台/l后台/gi服务/gi开发/gi7./nz微信/gi蓝牙/gi协议/gi和/cc授权/v、/w绑定/gi过程/gi8./nz微信/gi蓝牙/giprotobuf/nz协议/gi分析/gi、/wairsyncdebug/nz./nzapk/nz使用/gi9./nz蓝牙/gi外设/gi控制/vn开发/gi…/w