#Android/gi中/f实现/gijava/gi与/ccPHP/nz服务器/gi（/w基于/p新浪/ntc云/gi免费/vd云平台/gi）/whttp/gi通信详/nz
前言/gi：/w现在/t很/d多/aapp/gi都/d需要/v云/gi的/ude1功能/gi，/w也/d就是/v通过/p网络/gi与/cc服务器/gi交换/gi数据/gi。/w有的/rz采用/vtcp/ip/gi协议/gi，/w但是/c你/rr必须/d拥有/v一个/mq固定/aip/gi的/ude1服务器/gi，/w可以/v购买/gi阿里云/nrf服务器/gi之类/rz的/ude1，/w就是/v贵/a了/ule点/gi。/w如果/c只是/d个人/n的/ude1小/a应用/gi的/ude1的话/udh可以/v采用/v新浪云平台/gi这种/r免费/vd的/ude1服务器/gi，/w采用/v的/ude1协议/gi是/vshihttp/gi协议/gi，/w具体/a实现/gi方式/n如下/vi：/w方式/n一/nz、/w在线/vn登陆/vi这种/r方式/n一般/ad是/vshi手机/gi端/v向/p服务器/gi提交/gi用户名/n与/cc密码/gi两/nz个/q参数/gi，/w服务器/gi通过/p数据库/gi中/f查找/gi匹配/gi，/w找到/v与/cc没/d找到/v都/d回复/v手机/gi一个/mq应答/gi数据/gi即可/v。/w手机/gi端/v代码实现/gi当然/d manifest/nz必须/d添加/gi网络/gi权限/gi啦/y~/nz服务器端/gi代码实现/gi（/w）/w前面/f两行/nz输/v连接/gi上/f新浪云平台/gi的/ude1数据库/gi，/w第三行/nz是/vshigbk/gi文字/gi编码/gi转成/vutf-8/gi，/w因为/c有时候/d手机/gi端/v采用/v的/ude1是/vshigbk/gi的/ude1编码方式/nz。/w可以/v通过/peclipse/gi-右键/nz工程-/nzproperty/nz-/nzandroid/gi查看/gi编码方式/nz。/w再/d下面/f就是/v数据库/gi查询/gi了/ule，/w如果/c查询/gi成功/a即/v给/p手机/gi返回/vjson/gi数据/gi（/w键/n式/ksuccess/nz-/nztrue/nz）/w，/w如果/c失败/vi返回/vfalse/nz。/w附上/v新浪/ntc云数据库/gi函数/gidatabase/gi./nzphp/gi（/w）/w当然/d，/w不得/vi不说/c的/ude1是/vshi，/w因为/c手机/gi端/v登陆/vi访问/gi服务器/gi是/vshi个/q耗时/vi操作/gi，/w你/rr不能/v在/p主线/n程/n中/f直接/ad调用/gi以上/f代码/gi，/w必须/d要/v新/a开辟/v一个/mq线程/gi处理/vn这些/rz耗时/vi的/ude1操作/gi。/w具体/a怎么/ryv开辟/v线程/gi处理/vn这里/rzs就/d不/d多/a讲/v了/ule！/w方式/n二/nz：/w批量/d的/ude1数据/gi获取/gi相对/d第一种/nz方式/n来说/uls，/w这种/r方式/n获得/v的/ude1数据结构/gi更加/d复杂/a。/w比如说/vl，/w你/rr需要/v服务器返回/n给/p你/rr十条/nz数据/gi，/w其中/rz每条/d数据/gi中都/ns包含/v若/c干/v个/q键/n数据/gi，/w相当于/v一个/mq二维数/nz组/n。/w手机/gi端的/z请求/gi代码/gi一样/uyy，/w只是/d在/p收到/v数据/gi之后/f需要/v解包/nz，/w因为/c服务器/gi把/pba数据/gi打包/vi发送/gi来/vf的/ude1。/w服务器端/gi实现代码/gi：/w与/cc前面/f的/ude1服务器/gi代码/gi有所/v不同/a的/ude1是/vshi，/w这段/r代码/gi在/p前面/f多/a了/ule两/nz个/q函数/gi，/w有/vyou什么/ry用/p呢/y？/w首先/d说/v的/ude1是/vshi，/w服务器/gi在/p获得/v手机/gi的/ude1请求/gi成功/a之后/f将/d一大/n堆/gi的/ude1数据/gi经过/pjson/gi打包/vi发给/v手机/gi，/w但是/c，/wjson/gi是/vshi不/d支持/v中文/gi的/ude1，/w所以/c如果/c需要/v传输/gi中文/gi的话/udh必须/d经过/p前面/f两/nz个/q函数/gi进行/vn编码/gi才能/n传输/gi。/w最后/f传给/v手机/gi的/ude1$/nzjson/gi变量/gi其实/d就是/v一个/mq二维键/nz数据/gi，/w只要/c手机/gi那边/rzs经过/p合理/a的/ude1解析/gi即可/v。/w数据库/gi请求/gi成功/a之后/f的/ude1返回/vresult/nz其实/d就是/v一个/mq二维数/nz组/n，/w通过/p一个/mq类/gifor/nz循环/gi的/ude1foreach/nz函数/gi将/d数据/gi获取/gi下来/vf之后/f经过/pjson/gi打包/vi发给/v手机/gi端/v。/w手机/gi端/v实现/gi：/w与/cc登陆/vi代码/gi不同/a的/ude1是/vshi这里/rzs多/a了/ulejson/gi数据/gi解析/gi，/w将/d二维键/nz数组/gi存储/gi到/vlistmapstring/nz,/nzobject/nz中/f，/w具体/a怎么/ryv用/p这个/rz结构/gi这里/rzs就/d不/d多/a提/v了/ule。/w与/cc前面/f一样/uyy的/ude1是/vshi必须/d新开/ns线程/gi处理/vn这些/rz耗时/vi的/ude1操作/gi。/w到/v这里/rzs基本/a结束/v了/ule，/w如有/c疑问/n欢迎/v在线/vn留言/n~/nz