#Android/gi之/uzhi断点续传/gi下载/gi
今天/t学习/gi了/uleandroid/gi开发/gi中/f比较/gi难/a的/ude1一个/mq环节/gi，/w就是/v断点续传/gi下载/gi，/w很/d多/a人/n看到/v这个/rz标题/n就/d感觉/gi头/n大/a，/w的确/d，/w如果/c没有/v良好/a的/ude1逻辑思维/n，/w这块/r的确/d很难/d搞/v明白/v。/w下面/f我/rr就/d将/d自己/rr学到/v的/ude1知识/gi和/cc一/nz些/q见解/n写下/v供/vi那些/rz在/p这个/rz环节/gi还/d烦恼/an的/ude1人/n参考/gi。/w这里/rzs我/rr以/p下载/gimp/nz3/nz文件/gi为/p例/n。/w断点续传/gi下载/gi，/w顾名思义/vl，/w那/rzv就是/v我们/rr在/p一次/nz下载/gi未/d结束/v时/qt，/w退出/gi下载/gi，/w第二次/nz下载/gi时会/n接着/c第一次/nz下载/gi的/ude1进度/gi继续/v下载/gi。/w那么/c怎么/ryv记录/gi第一次/nz下载/gi的/ude1数据/gi呢/y，/w这里/rzs肯定/v就要/d用/p到/v数据库/gi了/ule。/w下面/f就是/v我/rr创建/gi数据库/gi的/ude1一个/mqsqliteopenhelper/nz类/gi。/w用来/v首/q次/qv运行/gi时/qt创建/gi数据库/gi。/wdbhelper/nz类/gi：/w下面/f来看/u主/ag界面/gi的/ude1布局/gi,/nz在/p这里/rzs，/w我/rr只/d设计/gi了/ule一个/mqlistview/nz来/vf显示/gi下载/gi的/ude1音乐/n的/ude1名称/n，/w和/cc一个/mq开始/v下载/gi按钮/n和/cc一个/mq暂停/v按钮/n。/w布局/gi文件/gi如下/vi：/wmain/gi./nzxml/nz：/wlist/gi_/nzitem/nz./nzxml/nz：/w主/ag界面/gi运行/gi效果/gi如下/vi：/w下面/f我们/rr来看/u具体/a实现/gi下载/gi的/ude1方法/gi。/w首先/d，/w我们/rr要/v定义/gi一个/mq记录/gi在/p下载/gi时/qt各个/rz时期/n的/ude1数据/gi的/ude1类/gi，/w这里/rzs我/rr创建/gi了/ule一个/mqdownloadinfo/nz类/gi来/vf记录/gi。/w代码/gi如下/vi：/wdownloadinfo/nz：/w在/p下载/gi时/qt，/w我们/rr有/vyou进度条/nz来/vf显示/gi进度/gi，/w怎么/ryv确定/v进度条/nz的/ude1进度/gi，/w大小/n和/cc起始/gi位置/gi呢/y？/w这里/rzs我/rr定义/gi了/ule一个/mqloadinfo/nz类/gi来/vf记录/gi下载/gi器/ng详细信息/nz。/w代码/gi如下/vi：/wloadinfo/nz：/w下面/f是/vshi最/d最重要/nz的/ude1一步/nz，/w那/rzv就是/v定义/gi一个/mq下载/gi器/ng来/vf进行/vn下载/gi了/ule，/w这里/rzs我/rr就/d不/d多/a说/v，/w具体/a解释/gi在/p代码/gi中都/ns有/vyou注解/n，/w我/rr就/d直接/ad将/d代码/gi附下/nz，/w供/vi大家/rr研究/gi参考/gidownloader/nz：/w在/p这边/rzs下载/gi器类/nz的/ude1定义/gi中/f，/w我们/rr用/p到/v了/ule许/v多/a关于/p进行/vn数据库操作/gi的/ude1方法/gi，/w这里/rzs我/rr定义/gi了/ule一个/mq数据库/gi工具/gi类/gi，/w来/vf提供/v这些/rz方法/gi，/w代码/gi如下/vi：/wdao/gi：/w下来/vf就是/v要/v进行/vn下载/gi和/cc暂停/v按钮/n的/ude1响应/v事件/gi了/ule。/w具体/a代码/gi和/cc解释/gi如下/vi。/wmainactivity/nz：/w最后/f我们/rr要/v在/p清单/n文件/gi中/f添加/gi权限/gi，/w一个/mq是/vshi访问/gi网络/gi的/ude1权限/gi，/w一个/mq是/vshi往/psd卡/gi写/v数据/gi的/ude1权限/gi。/w代码/gi如下/vi：/w这样/rzv我们/rr就/d实现/gi了/ule文件/gi的/ude1断点续传/gi下载/gi功能/gi。/w具体/a效果图/nz如下/vi：/w