#sql注入/gi定义/gi、/w原理/gi、/w攻击/gi和/cc防护/gi
一/nz、/w定义/gi所谓/vsql注入/gi，/w就是/v通过/p把/pbasql/gi命令/gi插入/gi到/vweb表单/gi提交/gi或/c输入/v域名/gi或/c页面/gi请求/gi的/ude1查询/gi字符串/gi，/w最终/d达到/v欺骗/v服务器/gi执行/v恶意/n的/ude1sql/gi命令/gi。/w具体来说/nz，/w它/rr是/vshi利用/v现有/v应用程序/nz，/w将/d(/nz恶意/n)/nz的/ude1sql/gi命令/gi注入/gi到/v后台/gi数据库/gi引擎/n执行/v的/ude1能力/gi，/w它/rr可以/v通过/p在/pweb表单/gi中/f输入/v(/nz恶意/n)/nzsql语句/gi得到/v一个/mq存在/v安全漏洞/nz的/ude1网站/gi上/f的/ude1数据库/gi，/w而/cc不是/c按照/p设计者/nnt意图/gi去/vf执行/vsql语句/gi。/w比如/v先前/t的/ude1很/d多/a影视/b网站/gi泄露/givip/nz会员/nnt密码/gi大多/d就是/v通过/pweb表单/gi递交/v查询/gi字符/gi暴出/nz的/ude1，/w这类/r表单/gi特别/d容易/ad受到/vsql注入/gi攻击/gi。/w二/nz、/w原理/gisql注入/gi攻击/gi指/v的/ude1是/vshi通过/p构建/gi特殊/a的/ude1输入/v作为/p参数/gi传入/giweb/gi应用程序/nz，/w而/cc这些/rz输入/v大/a都/d是/vshisql/gi语法/gi里/f的/ude1一些/m组合/gi，/w通过/p执行/vsql语句/gi进而/c执行/v攻击者/nz所要/b的/ude1操作/gi，/w其/rz主要/b原因/n是/vshi程序/gi没有/v细致/a地/ude2过滤/gi用户/gi输入/v的/ude1数据/gi，/w致使/v非法/b数据/gi侵入/v系统/gi。/w根据/p相关/vn技术/gi原理/gi，/wsql注入/gi可以/v分为/v平台/gi层/gi注入/gi和/cc代码/gi层/gi注入/gi。/w前者/rzv由/p不/d安全/gi的/ude1数据库/gi配置/gi或/c数据库/gi平台/gi的/ude1漏洞/n所致/nz;/nz后者/rzv主要/b是/vshi由于/p程序员/gi对/p输入/v未/d进行/vn细致/a地/ude2过滤/gi，/w从而/c执行/v了/ule非法/b的/ude1数据/gi查询/gi。/w基于/p此/rzs，/wsql注入/gi的/ude1产生/v原因/n通常/d表现/v在/p以下/f几/d方面/n:/w①不当/nz的/ude1类型/gi处理/vn;/nz②/nz不/d安全/gi的/ude1数据库/gi配置/gi;/nz③/nz不合理/nz的/ude1查询/gi集/q处理/vn;/nz④不当/nz的/ude1错误处理/i;/nz⑤转义/nz字符/gi处理/vn不/d合适/a;/nz⑥/nz多/a个/q提交/gi处理不当/l。/w三/nz、/w攻击/gi当/p应用程序/nz使用/gi输入/v内容/gi来/vf构造/n动态/gisql语句/gi以/p访问/gi数据库/gi时/qt，/w会/v发生/vsql注入/gi攻击/gi。/w如果/c代码/gi使用/gi存储过程/gi，/w而/cc这些/rz存储过程/gi作为/p包含/v未/d筛选/v的/ude1用户/gi输入/v的/ude1字符串/gi来/vf传递/v，/w也/d会/v发生/vsql注入/gi。/wsql注入/gi可能/v导致/gi攻击者/nz使用/gi应用程序/nz登陆/vi在/p数据库/gi中/f执行命令/n。/w相关/vn的/ude1sql注入/gi可以/v通过/p测试工具/nzpangolin/nz进行/vn。/w如果/c应用程序/nz使用/gi特权/n过/uguo高/a的/ude1帐户/n连接/gi到/v数据库/gi，/w这种/r问题/gi会/v变得/vi很/d严重/a。/w在/p一些/m表单/gi中/f，/w用户/gi输入/v的/ude1内容/gi直接/ad用来/v构造/n动态/gisql/gi命令/gi，/w或者/c作为/p存储过程/gi中的/v输入/v参数/gi，/w这些/rz表单/gi特别/d容易/ad受到/vsql注入/gi的/ude1攻击/gi。/w而/cc许多/m网站/gi程序/gi在/p编写/gi时/qt，/w没有/v对/p用户/gi输入/v的/ude1合法性/n进行/vn判断/gi或者/c程序/gi中/f本身/rz的/ude1变量/gi处理不当/l，/w使/v应用程序/nz存在/v安全隐患/nz。/w这样/rzv，/w用户/gi就/d可以/v提交/gi一段/nz数据库/gi查询/gi的/ude1代码/gi，/w根据/p程序/gi返回/v的/ude1结果/n，/w获得/v一/nz些/q敏感/gi的/ude1信息/gi或者/c控制/vn整个/b服务器/gi，/w于是/ccsql注入/gi就/d发生/v了/ule。/w四/nz、/w防护/gi归纳/v一下/m，/w主要/b有/vyou以下几点/l:/w1./nz永远/d不要/d信任/vn用户/gi的/ude1输入/v。/w对/p用户/gi的/ude1输入/v进行/vn校验/v，/w可以/v通过/p正则表达式/gi或/c限制/vn长度/gi;/nz对/p单引号/n和/cc双-进行/nz转换/gi等/udeng。/w2./nz永远/d不要/d使用/gi动态/gi拼装/nzsql/gi，/w可以/v使用/gi参数/gi化/v的/ude1sql/gi或者/c直接/ad使用/gi存储过程/gi进行/vn数据/gi查询/gi存取/gi。/w3./nz永远/d不要/d使用/gi管理员/gi权限/gi的/ude1数据库/gi连接/gi，/w为/p每个/r应用/gi使用/gi单独/d的/ude1权限/gi有限/a的/ude1数据库/gi连接/gi。/w4./nz不要/d把/pba机密信息/n直接/ad存放/v，/w加密/gi或者/chash/gi掉/v密码/gi和/cc敏感/gi的/ude1信息/gi。/w5./nz应用/gi的/ude1异常/gi信息/gi应该/v给出/v尽可能少/d的/ude1提示/gi，/w最好/d使用/gi自定义/nz的/ude1错误信息/nz对/p原始/a错误信息/nz进行/vn包装/n。/w