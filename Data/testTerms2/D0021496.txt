#盛科/nz网络/gi张卫峰/nzSDN/gi分享/gi
一/nz．/wsdn/gi现状/gi和/cc一/nz些/q误解/gi我/rr今天/t主要/b分享/gi一下/m我/rr目前/t看到/v的/ude1sdn/gi最新/a动态/gi，/w一/nz些/q技术/gi流派/n，/w一/nz些/qsdn/gi应用/gi，/w特别是在/l云计算/gi里面/f的/ude1应用/gi。/wsdn/gi在/p13/nz，/w14/nz这/rzv两年/nz被/pbei炒/v得/ude3非常/d火/n，/w到/v了/ule今年/t，/w感觉/gi声音/gi边/k小/a一/nz些/q了/ule，/w所以/c很/d多/a人/n在/p问/v，/w是不是/vsdn/gi不行/a了/ule？/w我/rr的/ude1看法/n不是/c这样/rzv的/ude1，/w我/rr认为/v按照/pgartner/nz的/ude1技术/gi成熟度/gi曲线/gi，/w现在/tsdn/gi走到/vf了/ule谷底/s之后/f，/w开始/v向上/vi。/w但是/c现在/t业界/n对/psdn/gi仍然/d存在/v很/d多/a误解/gi，/w我/rr这里/rzs得/ude3把/pba它/rr澄清/vi一下/m。/w最/d常见/a的/ude1一个/mq，/w尽管/c一再/d有人/r来/vf澄清/vi，/w但是/c还是/c会/v被/pbei误解/gi，/w就是/v总是/d把/pbaopenflow/gi等同于/visdn/gi，/w一说到/lsdn/gi，/w就/d以为/v是/vshiopenflow/gi的/ude1实现/gi。/w如果/c非/b要说/copenflow/gi=/nzsdn/gi，/w那/rzv只能/v说/v这/rzv就是/v狭义/b的/ude1sdn/gi。/w广义/n的/ude1sdn/gi则/d是/vshi控制/vn跟/p转发/gi分离/vi，/w有/vyou开放/gi的/ude1api/gi和/cc集中/v的/ude1控制器/n。/w这/rzv是/vshi广为/d接受/gi的/ude1定义/gi。/w第二个/nz误解/gi，/w总是/d有人/r觉得/v如果/c用/p了/ulesdn/gi，/w就是/v一个/mq或者/c几/d个/q控制器/n在/p那里/rzs控制/vn一切/rz，/w所以/c常常/d会/v质疑/vn，/w这样/rzvsdn/gi网络/gi如何/ryvscale/gi?/nz如果/c真的/dsdn/gi是/vshi这样的话/l，/w那/rzv确实/ad没有/v可扩展性/gi。/w但是/c实际上/d，/wsdn/gi并/cc不是/c要/v让/v控制器/n去/vf控制/vn一切/rz，/w而/cc只是/d让/v用户/gi可以/v通过/p控制器/n去/vf控制/vn他/rr想/v控制/vn的/ude1东西/n，/w对于/p对/p那些/rz业务/gi无价/vi的/ude1东西/n，/w完全/ad没/d必要/a去/vf控制/vn，/w而/cc可以/v仍然/d靠/v传统/n协议/gi去/vf做/v。/w举/v了/ule个/q例子/gi，/w在/p数据中心/gi出口/vn，/w相对/d公网/nzip/gi的/ude1出入/v两/nz个/q方向/gi进行/vn限流/nz，/w向下/vf的/ude1方向/gi，/w可以/v有/vyou很/d多/a个/q端口/gi，/w用户/gi使用/gisdn/gi想得到/vl的/ude1价/n，/w只是/d限流/nz，/w至于/p限流/nz之后/f，/w报文/n如何/ryv转发/gi，/w其实/d他/rr并/cc不想/v去/vf控制/vn，/w这个/rz时候/n，/w怎么办/ryv？/w让/v传统/n的/ude1mac/gi学习/gi去/vf做/v。/w再/d比如/v，/w在/p网络虚拟化/gi的/ude1应用/gi里面/f，/w对/p用户/gi最/d有/vyou价/n的/ude1部分/n，/w需要/vsdn/gi去/vf控制/vn的/ude1部分/n在/p哪里/rys？/w在/p边缘/n，/w边缘/n承担/v着/uzhe识别/givm/nz，/w识别/gi租户/gi，/w创建/gi虚拟/gi网络/gi的/ude1重任/n，/w而/cc核心/n汇聚/v呢/y？/w只是/d一个/mq报文/n转发/gi而已/y，/w那/rzv这种/r情况下/nz，/w你/rr为什么/ryv要用/vsdn/gi去/vf控制/vn核心/n汇聚/v呢/y？/w没/d必要/a。/w然后/c相关/vn的/ude1第三/nz点/gi误解/gi，/w跟/p第二/mq点/gi有/vyou关系/gi。/w就是/v认为/vsdn/gi交换机/gi，/w必须/d是/vshi交换/gi机上/s没有/v任何/rz控制协议/nz，/w所有/b的/ude1控制/vn都/d在/p控制器/n上/f，/w但/c实际上/d，/w很/d多/a场景/gi，/w在/p交换/gi机上/s仍然/d可以/v有/vyou控制协议/nz，/w只是/d它/rr需要/v提供/v出/vf接口/gi来/vf，/w让/v用户/gi去/vf控制/vn想/v控制/vn的/ude1东西/n。/w用/p一个/mq类比/vi来/vf说明/v，/w人体/gi有/vyou植物神经/nz和/cc动物/n神经/n，/w前者/rzv比如/v呼吸/v，/w心跳/vi，/w后者/rzv比如/v举手投足/n，/w如果/c前者/rzv也/d要/v靠/v大脑/gi来/vf控制/vn，/w那/rzv肯定/v来不及/v。/wsdn/gi也/d是/vshi同样/d道理/n。/w第四/nz点/gi，/w有人/r认为/vopenflow/gi交换机/gi需要/v任意/d灵活/a才/d行/ng。/w但是/c实际上/d，/w既/c无/v必要/a，/w也/d不/d可能/v。/wopenflow/gi交换机/gi的/ude1灵活性/gi，/w其实/d是/vshi体现/v在/p它/rr可以/v满足/v各种/rz不同/a场景/gi的/ude1需求/gi，/w但是/c在/p任何/rz一个/mq特定/b场景/gi下/f，/w其实/d不/d需要/v任意/d灵活/a，/w某个/rz特定/b场景/gi，/w总是/d有/vyou固定/a的/ude1模式/gi，/w比如/v匹配/gi特定/b的/ude1字段/gi，/w做/v特定/b的/ude1动作/gi。/w基于/p这样/rzv的/ude1一个/mq事实/n，/w其实/d可以/v通过/p组合/gi现有/v的/ude1转发/gi表项/nz，/w来/vf支持/v不同/a的/ude1openflow/gi场景/gi。/w并非/v说/v一定/b要/vsdn/gi芯片/gi才/d行/ng。/w当然/d，/w如果/c芯片/gi能够/v对/psdn/gi支持/v得/ude3好/a，/w那/rzv可以/v支持/v更多/ad的/ude1场景/gi，/w有/vyou更/d小/a的/ude1限制/vn。/w第五/nz点/gi，/w现在一/nz提到/v云计算/gi网络虚拟化/gi，/w说/v用/p到/v了/ulesdn/gi，/w马上/d就/d有人/r会/v问/v能/v跟/p不同/asdn/gi交换机/gi互通/v吗/y？/w或者/c能/v跟/pryu/nz,/nzodl/nz,/nzfl/nz,/nzonos/nz等/udeng控制器/n对接/vi吗/y？/w答案/gi是/vshi一般/ad情况/n都/d不能/v。/w因为/c对于/psdn/gi来说/uls，/w它/rr一定/b意味着/v基于/p场景/gi的/ude1定制/n，/w不/d可能/v随便/ad拿/v一个/mq控制器/n，/w随便/ad拿/v一个/mqsdn/gi交换机/gi，/w就/d能/v支持/v一个/mqsdn/gi应用/gi，/w特别/d是/vshi网络虚拟化/gi这种/r复杂/a应用/gi，/w一定/b是/vshi要/v特定/b的/ude1控制器/n，/w或者/c基于/p商业/n控制器/n做/v很/d多/a定制/n，/w还要/d对/psdn/gi交换机/gi做/v一/nz些/q定制/n。/w那种/r随便/ad拿/v一个/mq控制器/n和/cc交换机/gi就/d可以/v直接/ad用/p的/ude1想法/gi是/vshi理想化/a，/w不/d现实/n的/ude1。/w我/rr这里/rzs说/v的/ude1都/d是/vshi硬件/gisdn/gi交换机/gi，/w不/d包括/v纯/a软件/gi的/ude1，/w如/vovs/nz。/w二/nz．/wsdn/gi交换机/gi的/ude1各种/rz实现/gi流派/n其实/d误解/gi还有/v很/d多/a，/w我/rr就/d不/d去/vf一一列举/vl了/ule，/w接下来/vl再/d说说/vsdn/gi交换机/gi的/ude1各种/rz流牌/nz。/w§/nz第一种/nz实现/gi，/w就是/v纯/aopenflow/gi的/ude1实现/gi。/w不/d支持/v任何/rz传统/n协议/gi。/w像/v我们/rr的/ude1v/nz330/nz//nzv/nz350/nz//nzv/nz580/nz，/w目前/t就是/v这样/rzv。/w很/d多/a厂商/gi都/d宣称/v实现/gi了/uleopenflow/gi1.3/nz，/w但是/c实际上/d能力差异/i很大/d，/w这/rzv主要/b不是/c设备/gi商/vg的/ude1能力差异/i，/w而是/c芯片/gi的/ude1差异/n。/w但是/c很/d多/a人/n不/d知道/v，/w以为/v买了/v个/q宣称/vof/nz1.3/nz的/ude1交换机/gi，/w就/d真的/d都/d能/v支持/v所有/b能力/gi了/ule。/w实际上/d能/v支持/v到/v50%/nz就/d差不多/al了/ule。/w比如/v我们/rr在/p一个/mq客户/n那里/rzs竞标/vn，/w客户/n的/ude1一个/mq要求/n很/d简单/a，/w就是/v要求/n匹配/giip/gi后/f能/v修改/giip/gi，/w这/rzv是/vshiopenflow/gi1.0/nz就/d要求/n的/ude1。/w我们/rr的/ude1设备/gi报价/vn很高/d，/w对手/n的/ude1客户/n关心/v很硬/a，/w但是/c最后/f这个/rz标/v被/pbei我们/rr拿到/v了/ule，/w为什么/ryv？/w就是/v因为/c我们/rr能/v支持/v修改/giip/gi，/w对方/n不能/v。/w为什么/ryv会/v这样/rzv？/w因为/c我们/rr用/p了/ule盛科/nz自己/rr的/ude1能/v很好/ad支持/vsdn/gi的/ude1芯片/gi，/w对方/n用/p了/ule商业/n通用/gi芯片/gi。/w而/cc这个/rz需求/gi是/vshi客户/n刚/d需/v，/w没得/nz商量/v。/w§第/nz二种/nz实现/gi，/w是/vshihybrid/nz，/w所谓/v的/ude1混合/vn模式/gi，/w就是/v交换机/gi转发/gi面先/nz进行/vnopenflow/gi的/ude1pipeline/nz处理/vn，/w如果/copenflow/gi对/p这个/rz报文/n不感兴趣/l或者/c没有/v直接/ad丢弃/v也/d没/d直接/ad转发/gi掉/v，/w就/d继续走/nz后面/f的/ude1普通/a二三层/nz处理/vn。/w比如/v我/rr在/p前面/f举/v得/ude3那个/rz例子/gi，/w先/d使用/giopenflow/gi进行/vn限流/nz的/ude1处理/vn，/w处理/vn完/vi之后/f走/v普通/a二层/nzmac/gi转发/gi，/w学习/gi。/w应该/v说/v这/rzv是/vshi第一/mq种/q的/ude1超/v集/q，/wovs/nz就/d支持/v这种/r处理/vn。/w我们/rr很快/d也/d会/v支持/v。/w§/nz第三种/nz实现/gi，/w则/d是/vshi完全/ad跟/popenflow/gi没关系/vl，/w交换机/gi内部/f仍然/d是/vshi传统/n交换机/gi，/w有/vyou各种/rz传统/n二三层/nz协议/gi。/w但是/c比/p传统/n交换机/gi多/a了/ule一点/m，/w它/rr能够/v提供/v出/vfopenapi/nz来/vf，/w这里/rzs的/ude1openapi/nz有/vyou很/d多/a种/q，/w而且/c大多/d数/n都/d是/vshi私有/gi的/ude1，/w比如/vrestapi/nz,/nzjsonrpcapi/nz,/nznetconf/nz,/nzxmpp/nz。/w比如/vjuniper/nz的/ude1contrail/nz，/w就/d用/pxmpp/nz,/nzcisco/gi的/ude1aci/nz，/w是/vshi用/p它/rr自己/rr私有/gi的/ude1一个/mq协议/giopflex/nz。/warista/nz用/pjsonrpc/nz。/w我们/rr也/d支持/vjsonrpc/nz，/w我们/rr给/p客户/n做/v得/ude3云/gi方案/gi中/f，/w有一套/r方案/gi就是/v用/p了/ulejsonrpc/nz。/w这种/r方案/gi有/vyou一个/mq很大/d的/ude1好处/gi，/w就是/v不/d需要/v考虑/v跟/p传统/n网络/gi交互/gi的/ude1问题/gi，/w而/cc又/d可以/v通过/papi/gi控制/vn。/w只是/d它/rr不是/c标准/gi的/ude1，/w这一点/nz有人/r不/d喜欢/gi，/w但是/c更多/ad客户/n无所谓/vl，/w能/v解决问题/v就/d行/ng。/w基本上/d总结/gi下来/vf，/w就/d这/rzv三种/nz，/w其他/rzv万变不离其宗三/nz./nzsdn/gi在/p云计算/gi之外/f的/ude1一些/m应用场景/gi接下来/vl我/rr说/v一/nz下/fsdn/gi目前/t的/ude1一些/m主流/gi应用场景/gi，/w先/d说一个/nz相对/d简单一/nz些/q，/w但是/c现在/t很/d多/a大/a公司/nis都/d在/p做/v的/ude1，/w就是/v在/p广域/ns网/n的/ude1应用/gi。/w大家/rr所/usuo熟知/v的/ude1一个/mq就是/vgoogle/nz的/ude1b/nz4/nz网络/gi，/w用/psdn/gi来/vf做/v流量/gi调度/vn，/w带宽/n优化/gi，/w提高/v利用率/n。/w这/rzv是/vshi比较复杂/l的/ude1，/w现在/t很/d多/a运营商/gi都/d在/p搞/v。/w还有/v简单一/nz些/q的/ude1，/w比如/v一/nz些/qidc/gi在/p全国/n有/vyou很/d多/a机房/gi，/w一/nz些/q客户/n租用/v了/ule他们/rr多/a个/q机房/gi，/w需要/v连在一起/l，/w二层/nz互通/v。/w还要/d能/v限制/vn带宽/n。/w现在/t就/d有/vyouidc/gi要用/vsdn/gi来/vf做/v这事/r，/w有的/rz已经/d做/v了/ule（/w比如/v我们/rr一个/mq客户/n澳洲/ns电信/n）/w。/w用户/gi可以/v自助/b服务/gi，/w自助/b申请/v互联/vi，/w自助/b调整/vn带宽/n。/w光/n跟/p我/rr提过/v这个/rz需求/gi，/w让/v我们/rr帮/v他们/rr做/v的/ude1idc/gi就/d有/vyou5/nz家/q，/w现在/t电信/n要/v建立/gi除了/p移动/vn和/cc固网/nz之外/f的/ude1第三张网/nz，/w就是/vdci/nz网络/gi。/w还有/v一/nz些小/a的/ude1应用/gi，/w比如/v基于/psdn/gi的/ude1方案/gi，/w来/vf做/v扛/vd/nz攻击/gi，/w入侵/gi检测/gi服务器/gi检测/gi到/v攻击/gi之后/f，/w通过/p控制器/n给/psdn/gi交换机/gi下发/v流表/nz，/w同时/c控制/vn边界/n路由器/gi，/w将/d流引/nz到/vsdn/gi交换机/gi，/w进行/vn流量/gi清洗/v，/w这/rzv是/vshi我们/rr日本/ns一个/mq客户/n的/ude1做法/n。/w国内/s还有/v一个/mq一线/n的/ude1idc/gi客户/n，/w玩法/n则/d另有/v不同/a，/w说/v起来/vf比较复杂/l，/w有兴趣/v的/ude1后面/f可以/v细聊/nz。/w这里/rzs我/rr就/d不/d多/a说/v了/ule。/w还有/v一些/m边边角角/n的/ude1奇怪/v的/ude1应用/gi，/w比如/v我们/rr一个/mq客户/n，/w因为/c视频/gi接收/gi设备/gi接在/v网络/gi里面/f，/w收到/v一/nz些/q报文/n的/ude1干扰/gi，/w导致/gi有/vyou马赛克/n。/w他们/rr又/d查不出/v原因/n在/p哪里/rys，/w索性/d就/d在/p链路/gi上/f，/w串/q一个/mqsdn/gi交换机/gi，/w这个/rz交换机/gi把/pba需要/v的/ude1视频/gi节目/n放过/v，/w其他/rzv报文全部/nz丢弃/v，/w然后/c问题/gi就/d解决/v了/ule。/w四/nz./nzsdn/gi在/p云计算/gi里面/f的/ude1应用场景/gi前面/f把/pba一/nz些/q次要/b的/ude1场景/gi都/d讲完/v了/ule，/w最后/f我/rr就/d专门/d来讲/uls一下/m，/wsdn/gi在/p云计算/gi里面/f的/ude1应用/gi。/w这/rzv是/vshi重头戏/n，/w也/d是/vshi目前/tsdn/gi应用/gi最/d广泛/a的/ude1领域/gi。/w说/v到/vsdn/gi在/p云计算/gi网络虚拟化/gi里面/f的/ude1应用/gi，/w也/d有/vyou误解/gi。/w一说到/lsdn/gi，/w有人/r马上/d就/d想到/vsdn/gi交换机/gi，/w但是/c其实/d，/w目前/t的/ude1各种/rz网络虚拟化/gi方案/gi，/w有/vyou很/d多/a是/vshi用/p纯/a软件/gi的/ude1方案/gi来/vf做/v的/ude1。/w典型/n代表/nnt：/wopenstackneutron/nz原生态/n方案/gi，/wvmware/gi的/ude1nsx/nz，/wmidokura/nz公司/nis的/ude1midonet/nz，/wnuage/nz公司/nis的/ude1方案/gi等等/udeng。/w他们/rr用/p的/ude1都/d是/vshi纯/a软件/gi，/w网络虚拟化/gi的/ude1所有/b动作/gi都/d发生/v在/p服务器/gi，/w国内/s的/ude1比如/v青云/n，/w也/d是/vshi如此/rzv。/w而且/c，/w并非/v这些/rz方案/gi都/d是/vshi用/p到/v了/uleopenflow/gi，/w基本上/d没有/v用/p纯/aopenflow/gi的/ude1，/w就算/d用/p了/uleopenflow/gi，/w也/d都/d是/vshi结合/v了/ule传统/n的/ude1东西/n。/w有的/rz方案/gi压根/nz跟/popenflow/gi无关/v，/w比如/vnuage/nz，/wjunipercontrail/nz。/w当然/dneutron/nz原生/b方案/gi，/wl/nz2/nz部分/n确实/ad用/p到/v了/uleopenflow/gi，/w而且/c是/vshi很复杂/nz的/ude1多级/b流表/nz。/w华为/gi的/ude1dragonflow/nz也/d是/vshi，/w而且/c华为/gi的/ude1dragonflow/nz是/vshil/nz2/nz//nzl/nz3/nz都/d用/popenflow/gi，/w不/d像/vneutron/nz，/w是/vshi个/q混杂品/nz。/w这里/rzs还有/v一个/mq说法/n需要/v矫正/v，/w就是/v有人/r把/pbaopenflow/gi跟/poverlay/nz对立/vi或者/c并列/v，/w其实/d这个/rz不/d对/p。/woverlay/nz只是/d一种/nz组网/v方案/gi，/wopenflow/gi是/vshi一个/mq控制协议/nz，/w所以/c实际/n网络/gi中/f，/w可以/v是/vshi这样/rzv的/ude1：/w控制器/n通过/popenflow/gi协议/gi控制/vnvswitch/nz来/vf构建/gi一个/mqoverlay/nz网络/gi。/w纯/a软件/gi方案/gi大家/rr实现/gi各异/z，/w细节/gi没/d办法/gi在/p这里/rzs讲/v，/w这个/rz得/ude3另外/c写文章/n。/w我/rr后面/f再/d讲/v一下/m，/w硬件/gisdn/gi在/p网络虚拟化/gi中/f可以/v起到/v什么/ry作用/gi。/w硬件/gisdn/gi实现/gi网络虚拟化/gi的/ude1典型/n代表/nnt是/vshicisco/gi。/w它/rr的/ude1aci/nz就是/v这样/rzv一个/mq方案/gi，/w其他/rzv一些/m设备/gi商/vg或多或少/d也/d都/d有/vyou一/nz些/q自己/rr的/ude1方案/gi。/w但是/c也/d有/vyou设备/gi商/vg只/d推/v软件/gi方案/gi的/ude1。/w当然/d，/w我们/rr公司/nis也/d有/vyou自己/rr的/ude1基于/p硬件/gisdn/gi的/ude1一套/nz方案/gi，/w目前/t已经/d在/p多/a家/q客户/n那里/rzs部署/gi或者/cpoc/nz了/ule。/w很/d多/a人/n都/d知道/vucloud/nz用/p了/ule我们/rr很/d多/asdn/gi设备/gi，/w这个/rz涉及/v到/v客户/n机密/gi我/rr不好/a多/a说/v，/w只能/v说一点/nz，/wucloud/nz有/vyou它/rr自己/rr的/ude1用法/gi，/w而且/c实际上/d，/w我们/rr已经/d正式/ad部署/gi的/ude1那些/rz客户/n，/w每家/r都/d有/vyou不同/a，/w都/d体现/v了/ule云计算/gi对/psdn/gi的/ude1一些/m需求/gi，/w我/rr后面/f一个一个/nz列举/v一/nz下/f。/w使用/gi硬件/gisdn/gi交换机/gi做/v网络虚拟化/gi，/w大概/d的/ude1思路/gi就是/v，/w把/pbatunneloverlay/nz的/ude1工作/gi，/w做到/vtor/nz交换机/gi上/f，/w交换/gi机上/s可以/v来/vf识别/givm/nz，/w识别/gi组网/v，/wpush/nz//nzpoptunnelheader/nz，/w如果/c再进一步/l，/w还/d可以/v做/v一/nz些/q限流/nz，/wsecuritygroup/nz（/w静态/gi，/w无/v状态/gi的/ude1）/w。/w如果/c做/v得/ude3更好/d一些/m，/w可以/v把/pba分布式/gil/nz2/nz//nzl/nz3/nz都/d做/v在/p硬件/gisdntor/nz。/w每个/rtor/nz都/d是/vshi它/rr所/usuo挂/v的/ude1vm/nz的/ude1l/nz3/nzgw/nz。/w这/rzv就是/v所谓/v的/ude1分布式/gi路由/gi。/w但是/c硬件/gisdn/gi来/vf做/v这个/rz网络虚拟化/gi，/w有/vyou不/d少/a限制/vn，/w第一个/gi，/w流表/nz数量/n没有/v软件/gi那么/c大/a，/w当然/d，/w我们/rr计算/gi过/uguo，/w应该/v够用/vi。/w第二个/nz，/w有些/rz工作/gi做不了/v，/w比如/vnat/nz//nzlb/nz//nzfw/nz//nzvpn/gi等等/udeng，/w这些/rz仍然/d需要/v专门/d的/ude1南北向/ninternetgw/nz，/w只不过/dsdntor/nz仍然/d可以/v帮/v这些/rzgw/nz来/vfoffloadtunnel/nz。/w这样/rzv有些/rz硬件/gi防火墙/gi不/d支持/vtunnel/gi的话/udh，/w可以/v跟/psdn/gi交换机/gi一起/s工作/gi。/w这/rzv是/vshi一个/mq概览/v。/w下面/f我/rr就/d分别/d说/v一/nz下/f几个/nz需求/gi点/gi，/w或者说/c场景/gi。/w硬件/gisdn/gi做/v网络虚拟化/gi的/ude1第一个/gi需求/gi点/gi是/vshi希望/v通过/psdn/gi交换机/gi来/vfoffload/nz一/nz些/q工作/gi，/w提升/gi性能/gi。/w我们/rr自己/rr做/v过/uguo对比/gi测试/gi，/w确实/ad比/p原生态/nneutron/nz提升/gi很大/d，/w而且/c很/d重要/a的/ude1一点/m是/vshi，/w性能/gi恒定/an。/w不/d像/v我们/rr测试/gi纯/a软件/gi方案/gi的/ude1时候/n，/w每次/r测/v出来/vf的/ude1结果/n都/d不同/a，/w挺/d郁闷/a。/w它/rr能/v提升/gi性能/gi的/ude1原因/n主要/b有着/v几个/nz1/nz）/w把/pbatunnel/gi工作/gi放到/v交换机/gi，/w网卡/gi的/ude1toe/gi模块/gi就/d仍然/d可以/v发挥作用/n，/w做/vtcp/gi分片/gi加速/gi2/nz）/w，/wtunnel/gi操作/gi本身/rz也/d消耗/gicpu/gi3/nz）/w如果/c能/v把/pba一/nz些/q复杂/a流表/nz操作/gi也/d放到/vtor/nz，/w那/rzv就/d更好/d了/ule。/w当然/d现在/t也/d开始/v有/vyou一/nz些/q网卡/gi可以/v做/vvxlan/gi，/w具体/a效果/gi如何/ryv我/rr没试/v过/uguo，/w不/d知道/v。/w第二个/nz场景/gi，/w用/psdn/gi交换机/gi来/vf做/vpv/nz所谓/v的/ude1pv/nz就是/v物理/n裸机/gi接入/vn到/v虚拟/gi网络/gi，/w因为/c在/p纯/a软件/gi方案/gi中/f，/wvxlan/gi可以/v终结/vi在/pvswitch/nz，/w但是/c对于/p物理机/nz，/w没有/vvswitch/nz，/w所以/c最好/d的/ude1方案/gi其实/d就是/v把/pbavxlan/gi终结/vi在/psdntor/nz，/wsdntor/nz作为/ptunnelgateway/nz。/w这种/r方案/gi包括/vvmware/gi都/d支持/v，/w支持/v跟/p一/nz些/q硬件/gisdntor/nz对接/vi，/w所以/c可以/v认为/v是/vshi一个/mq刚/d需/v。/w我们/rr有/vyou四五/nz家/q客户/n都/d是因为/c场景/gi1/nz和/cc2/nz找/v我们/rr的/ude1。/w第三/nz个/q场景/gi，/w使用/gisdn/gi来/vf支持/vservicechain/nz引流/v，/w特别/d是/vshi跟/p云安全/gi结合/v。/w在/p传统/n网络/gi里面/f，/w要/v做/v安全/gi，/w很好/ad做/v，/w安全/gi方案/gi跟/p网络/gi是/vshi松耦/nz合/v，/w只/d需要/v在/p出口/vn设备/gi旁/f挂/v或者/c串接/vfw/nz就/d可以/v了/ule。/w但是/c到/v了/ule云/gi里面/f，/w一切/rz都/d变/v了/ule。/w我/rr至少/d聊过/v国内/s20/nz家/q以上/f做/v云安全/gi的/ude1，/w大家/rr都/d跟/p我/rr讲/v了/ule同一个/b需求/gi，/w如何/ryv在/p云/gi里面/f，/w把/pba东西向/f流量/gi引导/vvfw/nz,/nzvwaf/nz,/nz或者/c硬件/gifw/nz上去/vf。/w为什么/ryv这个/rz这么/rz难做/v？/w因为/c在/p云/gi里面/f，/w一方面/c，/wvm/nz都/d是/vshi动态/gi的/ude1，/w但是/c它/rr应用/gi的/ude1安全策略/gi却是/d固定/a的/ude1，/w那么/c你/rr如何/ryv做到/v策略/gi跟随/v？/w策略/gi跟随/v是/vshi思科/ntcaci/nz一直/d强调/v的/ude1一个/mq卖点/n。/w第二个/nz原因/n，/w现在/t很/d多云/n使用/gitunneloverlay/nz，/wvm/nz的/ude1原始/a报文/n，/w在/p服务器/gi内部/f就/d封装/gi到/vtunnel/gi里面/f去/vf了/ule，/w对/p物理/n网络/gi不/d可见/c，/w这种/r情况/n对/p引流/v就/d造成了/v更大/d的/ude1困扰/v。/w刚刚/d一个/mq小时/n之前/f，/w国内/s一个/mq做/v安全/gi的/ude1兄弟/n还/d在/p问/v我/rr这个/rz问题/gi，/w说/v如果/c解决/v了/ule这个/rz问题/gi，/w他们/rr可以/v去/vf影响/gi政务/n云/gi标准/gi。/w如果/c使用/gisdntor/nz来/vf做/vtunneloverlay/nz，/w那么/c这个/rz问题/gi就/d会/v容易/ad多/a了/ule，/w因为/csdntor/nz可以/v来/vf识别/givm/nz，/w识别/gi报文/n，/w可以/v接受/gi来自/v控制器/n的/ude1安全策略/gi，/w可以/v在/psdntor/nz和/cc安全设备/i之间/f建立/gi起/vftunnel/gi连接/gi，/w把/pba流引/nz过去/vf。/w当然/d，/w这个/rz从/p原理/gi上/f来看/u，/w是/vshi没问题/nz，/w但是/c实际操作/n的/ude1时候/n，/w实现/gi还是/c会/v比较复杂/l。/w但是/c我们/rr看看/v思科/ntcaci/nz的/ude1宣传/gi点/gi就/d知道/v，/w这/rzv肯定/v是/vshi一个/mq很好/ad的/ude1路子/n，/w关键在于/n你/rr能/v把/pba它/rr做/v得/ude3足够/v好/a用/p。/w第四个/nz场景/gi也/d很/d奇葩/n，/w我们/rr有/vyou三家/nz客户/n（/w据/p合作伙伴/nz说/v其实/d还有/v别的/rzv客户/n也/d有/vyou需求/gi）/w，/w是因为/c这个/rz原因/n找/v我们/rr的/ude1。/w这/rzv里面/f，/w有/vyou两/nz个/q客户/n，/w要/v解决/v的/ude1问题/gi是/vshi，/w他们/rr自己/rr或者/c他们/rr的/ude1客户/n有/vyou很/d多/avmware/gi的/ude1传统/n产品/gi（/w不/d支持/vnsx/nz）/w，/w他们/rr现在/t又/d引入/v了/ulekvm/nz,/nzxen/nz，/w要/v跟/pvmware/gi混合/vn组网/v，/w而且/c要/v使用/givxlan/gi。/w但是/cnsx/nz太贵/nz，/w不想/v买/vnsx/nz。/w那/rzv怎么办/ryv？/w业界/n对此/d也/d有/vyou方案/gi，/w有人/r是/vshi在/pvmware/gi计算/gi节点/gi里面/f起/vf一个/mqvm/nz，/w在/p这个/rzvm/nz里面/f实现/gi了/ule一个/mqvswitch/nz的/ude1功能/gi，/w所有/b同/p服务器/gi内/f的/ude1其他/rzvvm/nz要/v往/p外/f发包/vi，/w就/d先/d到/v这个/rzvm/nz里面/f绕一圈/nz，/w比如/v我/rr看/vhp/gi的/ude1helion/nz就/d有/vyou这样/rzv的/ude1做法/n。/w但是/c这种/r做法/n的/ude1问题/gi显而易见/bl，/w性能/gi太差/d。/w还有/v一个/mq客户/n，/w因为/c他们/rr用/p了/ulepower/nz服务器/gi，/w而且/c还有/vaix/nz，/w里面/f的/ude1vswitch/nz更是/d简单/a的/ude1要命/vi。/w也/d是/vshi想/v支持/vtunneloverlay/nz。/w无论是/c前者/rzv还是/c后者/rzv，/w要/v解决/v的/ude1问题/gi是/vshi一样/uyy的/ude1。/w所以/c我们/rr给出/v的/ude1方案/gi就是/v使用/gisdntor/nz，/w在/pvswitch/nz里面/f只是/d做/v基本/a的/ude1vlan/nz，/w这个/rz不用/dnsx/nz就/d能/v支持/v，/wpower/nz自己/rr也/d能/v支持/v。/w但是/c报文/n送/v出来/vf之后/f，/wsdntor/nz上/f把/pbavlan/nz转换成/ivxlanvni/nz。/w这样/rzv就/d可以/v很好/ad的/ude1解决/v这个/rz问题/gi。/w我们/rr有/vyou一个/mq国内/s给/p广电/n领域/gi提供/v服务/gi的/ude1客户/n，/w就/d用/p这个/rz方案/gi给/p各个/rz电视台/nis做/v。/w电视台/nis用/p了/ule大/a量/nvmware/gi。/w基本上/d云计算/gi的/ude1场景/gi，/w主要/b就是/v这些/rz。/w如果/c非要/b再加/nz一个/mq的话/udh，/w那/rzv是/vshi一个/mq小/a场景/gi。/w一/nz些/qidc/gi，/w客户/n买了/v多/a个/q公网/nzip/gi，/w然后/c是/vshi每个/rip/gi给/p一个/mq带宽/n，/w比如/v10/nz个/q公网/nzip/gi，/w每个/r给/p10/nzm/nz带宽/n，/w坏处/n是/vshi彼此之间/nz不能/v共享/gi，/w然后/c需求/gi就是/v在/p出口处/s，/w放/v一个/mqsdn/gi交换机/gi，/w把/pba这些/rz公网/nzip/gi捆绑/gi起来/vf共享/gi带宽/n，/w用户/gi就/d很/dhappy/nz了/ule，/w而且/c不能/v是/vshi手动/b来/vf做/v，/w是/vshi要/v跟/p云平台/gi联动/vn。/w五./nz问答/gi环节/giq/nz：/w是否/v觉得/v云/gi方面/n或/c是/vshi虚拟化/gi方面/n的/ude1sdn/gi的/ude1需求/gi比/p来自/v其他/rzv的/ude1越来越/d多/a？/wa/nz：/w对/p，/w需求/gi特别/d多/a。/w特别/d是/vshi很/d多/a做/v云/gi的/ude1公司/nis，/w没有/v网络人才/n，/w对/p网络/gi比较/gi恐惧/an，/w所以/c更容易/nz有/vyou需求/gi。/w这/rzv里面/f有些/rz其实/d是/vshi伪/ag需求/gi，/w只是/d因为/c不懂/v，/w而/cc有些/rz是/vshi真的/dq/nz：/w盛/v科/n的/ude1servicechain/nz方案/gi，/w如何/ryv标记流/nz的/ude1？/wa/nz：/w这个/rz一般/ad是/vshi根据/p五元组/nzq/nz：/w重叠/vi地址/gi五元组/nz可能会/nz失效/vi吧/y？/wa/nz：/wvni/nz五元组/nzq/nz：/w感谢/v大神/nz的/ude1精彩/a分享/gi，/w关于/pdci/nz，/w如果/c木/ng有/vyoumpls/nz骨干网/n，/w怎么/ryv解决/v？/wa/nz：/w现在/t也/d有/vyou用/pgre/nz或者/cvxlan/gi的/ude1，/w我/rr觉得/v没/d必要/a非用/bmplsq/nz：/w不是/c需要/v组/n播/v支持/v吗/y？/wa/nz：/w既然/c说/v到/v这个/rz问题/gi，/w我/rr就/d再多/d讲/v一点/m，/w这里/rzs存在/v另外/c一个/mq误解/gi很/d多/a人/n都/d认为/vvxlan/gi跟/pnvgre/nz的/ude1区别/gi是/vshivxlan/gi需要/v组播/nz，/w这/rzv完全/ad是/vshi无稽之谈/n。/w两者/rzv都/d可以/v不/d需要/v组播/nz。/w两者/rzv的/ude1区别/gi只是/d在于/v第一/mq，/w封装式/nz不同/a，/w前者/rzv是/vshiudp/gi，/w后者/rzvgre/nz，/w第二/mq用来/v做/v负载均衡/gi的/ude1方式/n不同/a，/w前者/rzv把/pbahash/gi放在/vudpsourceport/nz里面/f，/w后者/rzv把/pbahash/gi指/v放在/vgrekey/nz里面/f，/w除此之外/al就/d没/d区别/gi了/ule。/w哦/e，/w不/d对/p，/w还有/v区别/gi，/w前者/rzv是/vshi思科/ntc，/warista/nz等/udeng推/v的/ude1，/w后者/rzv是/vshi微软/ntc，/w阵营/n不同/a：/w)/nzq/nz：/w听/v人/n讲/v华三/nz的/ude1说/v可以/v不用/dnsx/nz直接/advmware/gi接/vsdntor/nz支持/vvxlan/gi，/w盛/v科/n有/vyou这个/rz方案/gi？/w是否/v可行/aa/nz：/w见/v我/rr上面/f第四个/nz场景/giq/nz：/w你们/rr的/ude1产品/gi有/vyou用来/v解决/v裸机/gi和/cc虚拟/gi网络/gi打通/v的/ude1商用/b案例/gi么/y？/wa/nz：/w见/v我/rr上面/f第二个/nz场景/gi。/wq/nz：/w有/vyou集成/vn的/ude1管理/gi方案/gi吗/y？/w我/rr碰上/v这个/rzcase/gi了/ule，/w管理/gi方案/gi太/d复杂/a了/ule，/w好/a几层/nza/nz：/w这个/rz是/vshi我们/rr客户/n自己/rr做/v得/ude3管理/gi平台/gi，/w如果/c需要/v，/w我/rr可以/v帮忙/vi问问/v他们/rr卖/v不卖/vq/nz：/w前面/f提到/v某/rz用户/gi希望/v用/p盛科/nzsdn/gi交换机/gi修改/giip/gi地址/gi，/w能/v介绍/gi下/f需求/gi吗/y？/w是/vshi要/v做/vnat/nz？/wthxa/nz：/w这里/rzs有/vyou很/d多/a个/q场景/gi，/w日本/ns那个/rz客户/n，/w是/vshi做完/v流量/gi清洗/v之后/f，/w把/pba目的/giip/gi改掉/v，/w原路/n返回/v去/vf，/w避免/v对/p端/v再/d把/pba它/rr送/v回来/v，/w然后/c在/p内/f网络/gi里面/f这个/rz被/pbei修改/gi过/uguo的/ude1ip/gi可/v路由/gi，/w这样/rzv避免/v使用/gitunnel/gi。/w还有/v是/vshi做/v简单/a的/ude1负载均衡/gi，/w类/gilvs/gi，/w只是/d不/d需要/v有/vyou状态/gi，/w不/d需要/v到/v7/nz层/gi还有/v一个/mq则/d是/vshi广电/n把/pba外部/f的/ude1节目源/n统一/vn编址/gi。/wq/nz：/w能/v介绍/gi一下/msdn/gi交换机/gi的/ude1硬件/gi架构/gi么/y，/w是/vshiasic/nz还是/cnpua/nz：/w对于/p交换机/gi来说/ulsasic/nz是/vshi主流/gi。/w华为/gi有/vyounpu/nz，/w但是/c这个/rz只能/v作为/p补充/vn，/w不能/v作为/p主力/nnt。/w成本/n，/w功耗/gi，/w吞吐量/gi都/d是/vshi问题/giq/nz：/w为什么/ryv不用/dnpu/nz去/vf做/v？/wasic/nz不够/a灵活/aa/nz：/w成本/n太高/d，/w研发/gi成本/n也/d很高/d，/w如果/c市场/gi足够/v大/a，/w需求/gi足够/v刚性/n，/w那/rzv说不定/vl也/d会/v有人/r做/v，/w呵呵/e。/w否则/c都/d是/vshi吸引/v球/n宣传/gi宣传/gi。/wq/nz：/w盛/v科/n交换机/gi是不是/v已经/d有/vyou出/vf方向/giopenflow/gi流表/nz支持/v？/wa/nz：/w这个/rz是/vshi可以/v做/v的/ude1q/nz：/w问下/n抗/vd/nz场景/gi，/w用/p的/ude1sdn/gi交换机/gi是/vshi纯/aopenflow/gi的/ude1还是/chybrid/nz？/w检测/gi到/v攻击/gi模式/gi=/nz》/w切换/vnof/nz下流/a表/ndrop/nz…/w…/wa/nz：/w对/p，/w用/p流表/nz来/vf做/v清洗/v。/w关于/p这个/rz案例/gi，/w我们/rr那个/rz日本/ns客户/n写/v了/ule三篇/nz非常/d详细/gi的/ude1帖子/n，/w发在/v网上/s，/w把/pba来龙去脉/n前因后果/n都/d写/v了/ule，/w你们/rr可以/v去/vf看看/v。/w连/ulian测试步骤/n都/d写/v得/ude3很/d清楚/a。/w我们/rr国内/s还有/v一个/mq大/a的/ude1idc/gi，/w用法/gi跟/p这个/rz日本/ns的/ude1不同/a，/w但是/c目前/t我/rr还/d不能/v透露/v。/wq/nz：/w检测/giddos/nz用/p什么/ry？/win/nz-/nzmon/nz？/wa/nz：/w检测/gi跟/p我们/rr无关/v，/w我/rr也/d不/d知道/v他们/rr怎么做/nz的/ude1。/wq/nz：/w刚才/t介绍/gi的/ude1分布式/gi路由/gi，/w有/vyou案例/gi介绍/gi下/f吗/ya/nz：/w有的/rz啊/y，/w都/d部署/gi了/ule几/d个/q了/ule。/w理论上/nz就是/v把/pbadvr/nz那/rzv一套/nz做到/vsdn/gi交换机/gi。/wq/nz：/w说/v到/v的/ude1国内/s服务商/nnddci/nz互联/vi自服/nz服务/gi，/w自助/b调整/vn带宽/n等/udeng是/vshi直接/ad你们/rr平台/gi上/f（/wcloudmanager/nz）/w，/w还是/c跟/p用户/giossapi/nz？/wa/nz：/wdci/nz这个/rz跟/p云/gi没关系/vl，/w是/vshi目前/t他们/rr是/vshi给/p客户/n提供/v了/uleweb/gi界面/gi，/w用户/gi可以/v自己/rr去/vf操作/gi，/w你们/rr可以/v去/vf看看/vpacnet/nz的/ude1服务/gi，/w如果/c是/vshi他们/rr用户/gi的话/udh。/wq/nz：/wdvr/nz做/v在/ptorsw/nz上/f，/w物理/ntorsw/nz的/ude1冗余/n是/vshi如何/ryv解决/v的/ude1？/wa/nz：/w这/rzv是/vshi个/q好/a问题/gi，/w现在/t是/vshi使用/gimlag/nz，/w确实/ad这里/rzs处理/vn起来/vf比较复杂/l，/w需要/v复制/giq/nz：/wpacnet/nz的/ude1案例/gi，/w很/d好奇/a你们/rr怎么/ryv跟/pvello/nz集成/vna/nz：/wvello/nz的/ude1平台/gi，/w集成/vn了/ule我们/rr的/ude1交换机/gi和/cc另外/c一个/mq公司/nis的/ude1光传输/nz设备/gi，/w给/p客户/n提供/v整体/n方案/gi。/w我们/rr帮/v他们/rr做/v了/ule不/d少/a定制/n。/w国内/s现在/t缺少/v像/vvello/nz这样/rzv独立/a的/ude1第三方/nzsdn/gi应用/gi和/cc服务提供商/nz。/w魏/tg总的/b未来/t网络/gi准备/v朝/tg这/rzv方面/n努力/gi作者简介/nz：/w张卫峰/nz，/w盛科/nz网络/gisdn/gi云计算/gicto/nz，/w《/w深度/gi解析/gisdn/gi-利益/nz、/w战略/gi、/w技术/gi、/w实践/gi》/w一/nz书/gi作者/nnt。/w数据/gi通信/gi和/cc芯片/gi设计/gi领域/gi资深/b专家/gi，/w有/vyou十几年/nz的/ude1网络/gi实践经验/nz，/w对/psdn/gi、/w网络虚拟化/gi、/w传统/n二三层/nz交换机/gi、/w数据传输/gi设备/gi，/w从/p管理/gi面/nf到/v协议/gi控制/vn面/nf一直/d到/v芯片/gi转发/gi面/nf，/w都/d有着/v深刻/a的/ude1理解/gi。/w本文/r转载自/nz，/w原文/n链接/gi：/w