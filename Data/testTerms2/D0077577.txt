#如何/ryv构建/gi高性能计算/gi云/gi
如今/t，/w“/w云计算/gi”/w已经/d成为/vit/gi业界/n的/ude1热门/a词汇/gi，/w无论是/c专业人士/nz还是/c厂商/gi，/w都/d希望/v数据中心/gi能/v发生/v翻天地覆/nz的/ude1变化/gi，/w很/d多/a人/n高性能计算/gi（/whpc/gi）/w用户/gi也/d在/p评估/gihpc/gi负载/gi是否/v适合于/v部署/gi在/p云/gi环境/n中/f。/w导致/gi这种/r争论/vn的/ude1原因/n之一/rz是/vshi人们/n不/d清楚/a“/w究竟/d什么/ry是/vshi云计算/gi？/w”/w以及/cc“/w什么样/ryv的/ude1应用/gi算得/v上/f是/vshihpc/gi应用/gi？/whpc/gi应用/gi是/vshi无法/v“/w一刀切/vi”/w的/ude1，/w我们/rr很难/d简单/a地/ude2把/pba某类/nz应用/gi归/v为/phpc/gi应用/gi，/w /x2000/nz年初/t，/w计算机/gi应用/gi从/p集中控制/gi的/ude1大型/b主机/gi转向/vi分布式/gi的/ude1计算/gi集群/gi就/d清楚/a地/ude2说明了/v这/rzv一/nz事实/n。/w这种/r做法/n不仅/c将/d普通/a的/ude1商用/b硬盘数据/nz恢复/gi带入/v了/ulehpc/gi领域/gi，/w也/d给/p客户/n提供/v了/ule更多/ad的/ude1选择/gi。/w hpc/nz用户/gi可以/v按照/p最低/a需求/gi来/vf构建/gihpc/gi，/w从而/c节省/v投资/vn成本/n。/w你/rr会/v发现/v，/w有些/rz hpc/nz系统/gi的/ude1节点/gi数/n较少/ad，/w但/c每个/r处理器/gi配备/v的/ude1内存/gi较大/d，/w带宽/n较窄/d或/c节点/gi之间/f的/ude1延时/v较长/d；/w而/cc另一些/nz hpc/nz系统/gi则/d可能/v按照/p不同/a的/ude1参数/gi要求/n来/vf设计/gi，/w所有/b这些/rz都/d是/vshi针对/gi应用/gi需求/gi量身定做/nz的/ude1。/w然而/c，/w对/p大/a多数/a企业/gi或/cit/gi部门/gi来说/uls，/w降低成本/v的/ude1压力/n都/d在/p与日俱增/vl，/w因此/c“/w按/p用量/n付费”/nz的/ude1云计算/gi模式/gi也/d就/d应运而生/vl。/w问题/gi的/ude1关键/n是/vshi，/w并非/v所有/b的/ude1计算/gi类型/gi都/d适合于/v云架构/gi。/wrackspace/nz、/w亚马逊/nrf、/wsavvis/nz以及/cc其他/rzv一些/m iaas/nz提供商/n都/d采用/v不同/a的/ude1虚拟化技术/gi来/vf管理/gi其/rz底层/n的/ude1硬件资源/l，/w遗憾/gi的/ude1是/vshi每家/r厂商/gi采用/v的/ude1虚拟化技术/gi是/vshi不同/a的/ude1，/w而且/c有时/d是/vshi保密/vn的/ude1，/w比如/vaws ec/nz2。/nz因此/c，/w对/phpc/gi应用/gi来说/uls，/w究竟/d是/vshi采用/v虚拟机/gi还是/c物理机/nz就/d成为/v构建/gihpc/gi云/gi之前/f需要/v特别/d讨论/gi的/ude1一个/mq问题/gi。/w虚拟化/gi问题/gi高性能计算/gi（/whpc/gi）/w架构师/gi迟迟/d没有/v采用/v虚拟化技术/gi的/ude1主要/b原因/n有/vyou两/nz个/q：/w其/rz一/nz是/vshi人们/n通常/d认为/v的/ude1虚拟化/gi会/v严重影响/v应用程序/nz的/ude1性能/gi，/w虚拟化/gi提升/gi灵活性/gi的/ude1优点/gi被/pbei其/rz降低/v了/ule应用程序/nz吞吐量/gi的/ude1缺点/gi所/usuo压倒/v；/w其二/r是/vshi传统/n的/ude1hpc/gi基础架构/n的/ude1利用率/n已经/d非常/d高/a了/ule（/w通常/d为/p80%/nz~/nz95%/nz）/w，/w因此/c，/w通常/d推动/v企业/gi采用/v虚拟化/gi的/ude1动因/n（/w提高/v硬件/gi利用率/n、/w整合/gi服务器/gi或/c提高/v许可证/n利用率/n）/w不足以/v抵消/v使用/gi虚拟化/gi资源/gi运行/gi工作/gi负载/gi带来/v的/ude1复杂性/gi和/cc费用/n增加/v的/ude1缺点/gi。/w然而/c在/p很/d多/a情况下/nz，/whpc/gi架构师/gi又/d愿意/v牺牲/v5%/nz的/ude1应用程序/nz性能/gi来/vf获得/v虚拟化/gi带来/v的/ude1灵活性/gi和/cc弹性/n。/whpc/gi用户/gi愿意/v这样/rzv做/v的/ude1主要/b原因/n有/vyou以下/f几个/nz：/w?/nz /x安全性/gi―/w―/w虚拟机/gi可以/v作为/p实例/gi添加/gi到/v虚拟/gi局域网/gi中/f，/w或者/c从/p虚拟/gi局域网/gi中/f删除/gi。/w一/nz些/qhpc/gi环境/n要求/n多/a组/n用户/gi之间/f，/w甚至/d用户/gi本身/rz之间/f实现/gi数据/gi和/cc宿主/n相互/d隔离/vn。/w传统/n的/ude1虚拟/gi局域网/gi通常/d与/cc物理/n服务器/giraid/gi数据恢复/gi结合/v使用/gi，/w结果/n造成了/v资源/gi孤岛/n，/w在/p变化/gi的/ude1负载/gi环境/n中/f，/w孤岛/n将/d导致/gi孤/ag岛内/s资源/gi利用率/n低下/a。/w虚拟机/gi和/cc虚拟/gi局域网/gi可以/v配合/v使用/gi，/w把/pba用户/gi彼此/rr隔离/vn开来/v，/w并/cc将/d数据/gi隔离/vn起来/vf，/w有权/nz访问/gi的/ude1用户/gi才/d可以/v访问/gi。/w?/nz /x应用程序/nz堆栈/n控制/vn―/w―/w很/d多/a应用程序/nz需要/v特定/b的/ude1操作系统/gi版本/n、/w更新版/l、/w代码/gi库/n和/cc配置/gi等/udeng。/w在/p混合/vn应用环境/l下/f，/w多/a个/q应用/gi共享/gi同一/b物理/n硬件/gi，/w这种/r情况下/nz，/w就/d很难/d满足/v所有/b应用/gi对/p特定/b堆栈/n的/ude1要求/n。/w采用/v虚拟化技术/gi，/w这个/rz难题/n就/d迎刃而解/vl了/ule，/w因为/c，/w在/p虚拟化/gi环境/n下/f整个/b堆栈/n可以/v作为/p应用程序/nz的/ude1一/nz部分/n来/vf部署/gi。/w?/nz /x充分利用/n高价/n资产/n―/w―/w在/p异构/gi的/ude1hpc/gi系统/gi中/f，/w最新/a（/w因而/c最快/d）/w的/ude1机器/gi常常/d需求量/n最大/gm。/w为了/p满足/v这个/rz需求/gi，/w一/nz些/q企业/gi采用/v预留/v系统/gi以/p尽量/d减小/v用户/gi之间/f的/ude1冲突/gi。/w但/c遗憾/gi的/ude1是/vshi，/w这种/r预留/v系统/gi常常/d没有/v得到/v充分/ad的/ude1利用/v。/w相比之下/vl，/w使用/gi虚拟机/gi处理/vn计算/gi作业/gi时/qt，/w大/a多数/a虚拟机/gi管理程序/gi内部/f的/ude1迁移/gi工具/gi允许/v机会/gi性/ng工作/gi负载/gi使用/gi服务器/gi数据恢复/gi高价/n资产/n，/w甚至/d为/p一个/mq不同/a的/ude1用户/gi打开/gi了/ule预留/v窗口/s后/f也/d可以/v使用/gi。/w如果/c提出/v预留/v要求/n的/ude1用户/gi最终/d提交/gi工作/gi负载/gi，/w要求/n处理/vn负载/gi，/w机会/gi性/ng工作/gi负载/gi随后/d可以/v迁移/gi到/v价/n较低/d的/ude1资产/n，/w以便/d继续/v处理/vn，/w而/cc不/d浪费/gi任何/rz处理器/gi周期/n。/w?/nz /x处理/vn执行/v时间/gi长/a的/ude1作业/gi―/w―/w几种/nzhpc/gi应用程序/nz不/d提供/v检查点/n重启/gi功能/gi。/w然而/c，/w虚拟机/gi技术/gi可以/v获取/gi和/cc检查/gi虚拟机/gi的/ude1整个/b状态/gi，/w以便/d检查/gi以前/f无法/v检查/gi的/ude1应用程序/nz设置/gi。/w如果/c作业/gi运行时间/gi足够/v长/a，/w对于/p整个/b解决方案/gi来说/uls有/vyou一样/uyy的/ude1平均/a无故障/b时间/gi（/wmtbf/nz）/w，/w那么/c虚拟机/gi内部/f的/ude1检查点/n工具/gi可能/v非常/d吸引/v人/n。/w此外/c，/w如果/c服务器/gi维护/gi是/vshi经常/d进行/vn或/c具有/v可预测性/n，/w那么/c虚拟机/gi内部/f的/ude1检查点/n迁移/gi或/c暂停/v运行时间/gi长/a的/ude1作业/gi，/w可以/v防止/gi计算/gi时间/gi流失/vn，/w同时/c消除/v执行/v常规/n服务器/gi维护/gi工作/gi所/usuo面临/v的/ude1任何/rz障碍/gi。/w使用/gihpc/gi云/gi的/ude1商业/n理由/n有/vyou几/d个/q关键因素/nz促使/v企业/gi考虑/v实施/gi云计算/gi，/w这些/rz因素/gi可以/v帮助/v企业/gi削减/v成本/n，/w为/p内部/f用户/gi提供/v更好/d的/ude1服务/gi。/w这些/rz因素/gi是/vshi：/w?/nz /x按/p使用量/n付费/v―/w―/w客户/n可以/v按照/p应用程序/nz的/ude1运行时间/gi或者/c按/p使用/gi存储/gi和/cc数据传输/gi服务/gi的/ude1时间/gi支付/gi费用/n。/w?/nz /x近乎/v无限/b的/ude1基础架构/n―/w―/w几乎/d可以/v实时/n享用/v基础架构/n；/w反过来/d，/w没有/v工作/gi负载/gi时/qt，/w基础架构/n可以/v缩/vi回到/v近乎/v零资源/nz。/w?/nz /x根据/p工作/gi负载/gi配置/gi资源/gi―/w―/w可以/v根据/p工作/gi负载/gi，/w随时/d分配/gi操作系统/gi或/c服务器/gi的/ude1类型/gi，/w大幅/d改进/gi了/ule资源配置/nz方面/n的/ude1灵活性/gi。/w实施/gihpc/gi云/gi面临/v的/ude1障碍/gi尽管/c云计算/gi有/vyou诸/rz多/a优势/gi，/w但是/c在/p考虑/v云计算/gi是否/v适合/vhpc/gi环境/n时/qt还有/v很/d多/a障碍/gi需要/v克服/v。/w?/nz /x安全性/gi和/cc知识产权/nz―/w―/w云/gi环境/n中的/v数据/gi对/p商业企业/nt来说/uls常常/d是/vshi核心/n的/ude1知识产权/nz。/w绝不能/v忽视/v这种/r可能性/gi：/w商业/n竞争对手/nz可能/v使用/gi相同/a的/ude1共享/gi计算/gi资?/nz /x软件/gi许可/vn―/w―/w大多/d数/n商业企业/nt使用/gi独立/a软件/gi开发商/gi（/wisv/nz）/w提供/v的/ude1第三方/nz软件/gi来/vf运行/gi或/c管理/gihpc/gi作业/gi。/w这些/rz应用软件/gi在/p购买/gi时/qt都/d附有/v法律/n协议/gi，/w明确/a了/ule该/rz应用程序/nz可以/v在/p何处/rys运行/gi，/w通常/d都/d规定/n该/rz应用程序/nz只能/v在/p客户/n的/ude1场地/n运行/gi。/w?/nz /x数据/gi转移/v―/w―/w除非/c企业/gi完全/ad采用/v云计算/gi，/w弃/vg用/p自己/rr的/ude1数据中心/gi，/w否则/c用于/v模拟/gi的/ude1模/ng和/cc结果/n就/d必须/d在/p云计算/gi提供商/n与/cc客户/n数据中心/gi之间/f进行/vn传输/gi。/w然而/c这项/r工作/gi很复杂/nz，/w因为/c就/d传输/gi大容量/n文件/gi而言/uls，/w互联网/gi带宽/n很/d有限/a；/w而且/c对/p大多/d数据恢复/gi数/n基础架构/n即/v服务/gi（/wiaas/gi）/w提供商/n来说/uls，/w进出/v云/gi环境/n传输/gi的/ude1所有/b数据/gi都/d是/vshi按/p字节数/nz计费/vn的/ude1“/w收费/gi服务/gi”/w。/w?/nz /x定价/n模式/gi―/w―/w按/p使用量/n付费/v的/ude1模式/gi常常/d对/p客户/n有/vyou很大/d的/ude1吸引力/n，/w但/c如果/c长期/d使用/gi公共/b云/gi，/w其/rz费用/n通常/d比/p在/p两年/nz内/f自己/rr拥有/v和/cc维护/gi硬件/gi的/ude1成本/n贵两三倍/nz。/w公司/nis应/v认真/ad确定/v在/p多长时间/n内/f使用/gi公共/b云/gi比/p使用/gi本地/gi服务器/gi更/d有/vyou优势/gi。/w面向/vhpc/gi的/ude1云计算/gihpc/gi数据中心/gi必须/d综合/vn考虑/v采用/v云计算/gi的/ude1商业/n理由/n及其/cc面临/v的/ude1障碍/gi，/w才能/n确定/v这种/r模式/gi是否/v适合/v本/rz企业/gi以及/cc哪种/ry模式/gi最/d适合/v自己/rr。/w实现/gihpc/gi云/gi需要/v几/d款/q工具/gi，/w包括/v虚拟机/gi管理程序/gi平台/gi、/w工作/gi负载/gi管理器/nz和/cc基础架构/n管理/gi工具包/n。/w管理/gi工具包/n应该/v提供/v策略/gi定义/gi及/cc执行/v、/w配置管理/gi、/w资源/gi预留/v及/cc报告/gi等/udeng功能/gi。/w虚拟机/gi管理程序/gi平台/gi应该/v为/p云计算/gi资源/gi的/ude1虚拟/gi部分/n提供/v良好/a的/ude1基础/gi。/w最后/f，/w工作/gi负载/gi管理器/nz应该/v提供/v作业/gi管理/gi功能/gi。/w对/p多数/a大型/bhpc/gi环境/n来说/uls，/w用户/gi需要/v考虑/v采用/v私有云/nz还是/c混合云/nz解决方案/gi。/w在/p混合云/nz环境/n中/f，/w可以/v在/p峰/ng需求/gi期间/f使用/gi外部/f公共/b云/gi，/w这/rzv又叫/v“云/nz爆发/v”/w（/wcloud bursting/nz）/w；/w比较/gi小/a的/ude1hpc/gi环境/n可能/v应该/v考虑/v公共/b云/gi，/w使用/gi的/ude1所有/b资源/gi都/d在/p云端/n。/w不管/c使用/gi哪/ry一种/nz模式/gi的/ude1云/gi，/w特别/d重要/a的/ude1是/vshi确保/v基础架构/n包含/v可以/v同时/c充分利用/n物理/n资源/gi和/cc虚拟/gi资源/gi的/ude1管理层/n，/w因为/chpc/gi应用程序/nz仍/d主要/b放置/gi在/p物理/n机器/gi上/f。/w在/p理想/n情况下/nz，/w该/rz管理层/n应该/v能够/v把/pba虚拟机/gi管理程序/gi环境/n和/cc物理/n环境/n合并/gi为/p一个/mq动态/gi共享/gi的/ude1基础架构/n，/w既/c支持/v多/a种/q操作系统/gi，/w又/d支持/v异构/gi环境/n。/w混合云/nz方案/gi对/phpc/gi环境/n来说/uls可能/v非常/d有/vyou优势/gi，/w因为/c它/rr可以/v提供/v完成/v作业/gi所/usuo需要/v的/ude1额外/b计算/gi能力/gi。/w在/p下列/b情况/n尤其/d应该/v考虑/v采用/v云/gi爆发/v方案/gi：/w?/nz /x预计/v作业/gi在/p本地/gi运行/gi的/ude1等待时间/gi过长/n时/qt；/w?/nz /x如果/c作业/gi在/p本地/gi运行/gi所需/nz的/ude1累计/vd运行时间/gi过长/n时/qt；/w?/nz /x当/p作业/gi对/p进出/v云/gi环境/n的/ude1数据传输/gi要求/n不/d高/a时/qt。/w一旦/d确定/v了/ule企业/gi实施/gi云计算/gi的/ude1最佳/z方案/gi，/w就/d可以/v采用/v多/a种/q方法/gi来/vf评估/giiaas/gi提供商/n，/w看看/v哪/ry一家/n提供商/n最/d适合/v本/rz企业/gi的/ude1应用/gi和/cc工作/gi负载/gi要求/n。/w评估/gi时/qt要/v考虑/v的/ude1因素/gi包括/v性能/gi、/w可靠性/gi、/w创建/gi实例/gi的/ude1速度/n、/w价/n等/udeng，/w此外/c，/w还/d应该/v考虑/v每/rz一家/niaas/gi提供商/n的/ude1洽谈/vn和/cc定价/n流程/gi以及/cc政策/n，/w还要/d对照/v服务/gi级别/n协议/gi（/wsla/nz）/w评估/gi可靠性/gi。/w考虑/v上述/b每一个/nz因素/gi对于/p企业/gi选择/gi最/d适合/v其/rz用途/n的/ude1提供商/n大/a有/vyou帮助/v。/w