#TIME/nz_/nzWAIT/nz状态/gi详解/v
引入/v问题/gi前/f几天/nz在/p生产/gi环境/n的/ude1windows服务器/gi上/f碰到/v一个/mq奇怪/v的/ude1问题/gi。/w使用/gisqldeveloper/nz访问/gioracle数据库/gi，/w已经/d连接/gi的/ude1实例/gi可以/v正常/a访问/gi数据库/gi，/w而/cc新建/v连接/gi时/qt，/w提示/gi连接/gi不/d上/f数据库/gi异常/gi。/w排查/v原因/n网络/gi上/f的/ude1问题/gi，/w首先/d考虑/v用/p命令/gi检查一下/n本机/nz的/ude1网络连接/nz情况/n。/w /x+/nz /x发现/vtcp/gi协议/gi的/ude1端口/gi被/pbei占用/v完/vi，/w并且/c状态/gi都/d是/vshi「/nztime/nz_/nzwait/nz」/nz，/w进一步/d发现/v问题/gi的/ude1源头/n是/vshi某个/rz程序/gi连续/gi地/ude2新建/vhttp/gi连接/gi去/vf访问/giweb/gi服务/gi，/w但/c释放/gi连接/gi却/d有/vyou延时/v，/w导致/gi所有/b的/ude1tcp/gi端口/gi在/p短时间/nz内/f耗尽/v，/w系统/gi没有/v额外/b的/ude1tcp/gi端口/gi资源分配/gi给/p新的/a请求/gi，/w然后/c报错/nz。/w那么/c，/w为什么/ryv断开/gitcp/gi连接会/nz有/vyou延时/v？/w如何/ryv规避/vtcp/gi端口/gi耗尽/v呢/y？/w为什么/ryv断开/gitcp/gi连接会/nz有/vyou延时/vtcp/gi的/ude1连接/gi过程/gi及/cc状态/gi可/v参见/v。/w对于/p本文/r中/f出现/v的/ude1问题/gi，/w其实/d是/vshi「/nztime/nz_/nzwait/nz」/nz状态/gi在/p作祟/vi。/w如何/ryv规避/vtcp/gi端口/gi耗尽/v建立/gi长连接/gi。/w