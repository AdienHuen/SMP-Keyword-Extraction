#拿/v什么/ry保护/gi你---/nzTDW/gi数据安全/gi
互联网/gi时代/gi，/w大数据/gi扮演着/n极为重要/nz的/ude1角色/gi；/w腾讯/ntc作为/p中国/gi最大/gm社交/gi平台/gi，/w具备/v最/d具/vg权威/n、/w代表性/n的/ude1互联网/gi大数据/gi。/w数据/gi平台/gi部/qtdw/nz作为/p公司级/b的/ude1海量数据/gi存储/gi和/cc计算/gi平台/gi，/w集中/v了/ule公司/nis90%/nz以上/f产品/gi（/w近/a400/nz款/q）/w的/ude1核心/n数据/gi，/w覆盖/gi全部/mbg/nz，/w积累/gi约/d4000/nz个/q开发者/gi，/w如何/ryv保障/vn如此/rzv之/uzhi多/a的/ude1用户/gi安全/gi合理/a地/ude2使用/gi这么/rz丰富/a珍贵/a的/ude1数据/gi？/w本文/r将/d从/p数据生命周期/gi（/w传输/gi―/w存储/gi―/w使用/gi）/w角度/n揭密/nz数/n平/v的/ude1数据安全/gi体系/gi如何/ryv为/p腾讯/ntc大数据/gi保驾护航/nz。/w1/nz /x传输/gi安全/gi所有/b数据/gi通过/ptdbank/nz自动/d采集/v接入/vn，/w只要/c告诉/vtdbank/nz数据/gi在/p哪里/rys，/w数据/gi是/vshi什么/ry，/w数据/gi要/v怎么/ryv用/p，/wtdbank/nz就/d会/v自动/d完成/v一/nz整套/b的/ude1数据采集/gi分拣/v和/cc处理/vn流程/gi，/w无需/v人工干预/gi，/w /x缩短/v流程/gi，/w降低/v风险/gi。/w针对/gi敏感数据/gi，/w在/p通道/n中/f设置/gi加密/gi，/w密钥/gi由/p数据/giowner/nz掌握/v，/w同时/ctdw/nz支持/v运行/gi加密/gi数据/gi的/ude1sql/gi，/w数据/gi在/ptdw/nz中/f可用/v但/c不/d可见/c，/w犹如/v数据/gi咖啡馆/nis，/w既/c让/v数据/gi流动/vn碰撞/vn发挥/v价/n，/w又/d保护/gi了/ule数据安全/gi。/w2/nz /x系统安全/nz2.1/nz /x洋葱/n入侵/gi检测/gitdw/nz所有/b机器/gi在/p机器/gi初始化/v后/f默认/v安装/gi洋葱/n客户端/gi，/w上报/vi所有/b用户/gi行为/n数据/gi至/p洋葱/n服务端/nz，/w并/cc对/p行为/n分析/gi、/w分类/gi，/w针对/gi对/p检测/gi入侵/gi行为链/nz和/cc对/p敏感/gi操作/gi进行/vn有效/gi监控/gi、/w分析/gi、/w告警/gi。/w2.2/nz /x铁/n将军/nnt管理/gi通过/p接入/vn铁将军/nz系统/gi，/w建立/gi帐号/n管理/gi、/w权限管理/gi及/cc运维/gi审计/vn体系/gi：/w集中管理/nz账户/n：/w实名制/nz用户/gi通过/ppintolken/nz动态/gi口令/n进行/vn登录/gi帐号/n权限管理/gi：/wsudo/nz权限管理/gi实名/gi审计/vn：/w实名/gi审计/vn操作/gi行为/n及/cc可/v回溯/gi3/nz /x存储/gi安全/gi数据量/n大/a（/wvolume/nz）/w且/c类型/gi繁多/a（/wvariety/nz）/w是/vshi大数据/gi的/ude1两/nz大/a特征/gi，/w这/rzv为/p数据/gi应用/gi带来/v了/ule福音/n。/w同时/c，/w对于/p大数据存储/gi来说/uls，/w这/rzv是/vshi一/nz项/q大/a的/ude1考验/vn，/w如此/rzv大而全/i的/ude1数据/gi我们/rr如何/ryv保证数据/n的/ude1完整/a存储/gi，/w不/d丢失/v，/w不/d删除/gi？/w3.1/nz /x多/a副本/n存储/gi，/w防止/gi数据/gi丢失/v热/a数据/gi：/w3/nz个/q副本/n存放在/v不同/a机架/n，/w任意/d2/nz台/q机器/gi故障/gi不会/v丢/v数据/gi冷/a数据/gi：/w采用/vraid/gi压缩/gi（/w10/nz数据/gi块/q4/nz校验块/nz，/w可容忍/nz任意/d4/nz块/q丢失/v）/w自动/d修复/gi：/w系统/gi后台/gi自动/d扫描/gi，/w及时/ad修复/gi丢失/v或/c损坏/v的/ude1副本/n，/w业务/gi无/v感知/gi3.2/nz /x多/a层/gi保护/gi，/w防止/gi数据/gi删除/gi3.2.1/nz /x防/v db/nz删除/gi对于/pdatabase/gi层/gi的/ude1目录/gi，/w在/p源码/gi中/f进行/vn保护/gi，/w设置/gi目录/gi删除/gi黑名单/n，/w要/v删除/gidatabase/gi或者/c目录/gi，/w需要/v更改/gi源码/gi，/w并且/c重启/gi服务/gi防止/gidrop database/nz操作/gi：/w在/ptdw/nz中/fdrop database/nz会/v失败/vi防止/gi在/p文件系统/gi中/f删除/gi目录/gi：/w在/p文件系统/gi中/f，/w直接/ad删除/gi目录/gi会/v失败/vi3.2.2/nz /x防/vtable/nz删除/gi设置/gi回收站/nis，/w延迟/v删除/gi数据/gi并/cc不会/v被/pbei立刻/d删除/gi，/w而是/c移入/gi回收站/nis数据/gi会/v在/p回收站/nis保存/gi大于/v48/nz小时/n，/w大数据/gi需/v手工/gi确认/v之后/f被/pbei真正/d删除/gi节点/gi延迟/v删除/gi先/d将/d元数据/gi删除/gi，/w数据/giblock/nz块/q延迟/v一天/nz删除/gi通过/p元数据/gi冷备/nz，/w可以/v恢复/gi数据/gi4/nz /x使用/gi安全/gitdw/nz中/f数据/gi的/ude1产品线/nz众多/a，/w用户/gi也/d来源于/v各个/rz不同/a的/ude1产品/gi，/w自然而然/al，/w数据共享/gi的/ude1需求/gi日益/d增多/v，/w那么/c如何/ryv做到/v数据共享/gi的/ude1同时/c保障/vn数据安全/gi可控/nz呢/y？/w下面/f将/d从/p数据/gi使用/gi这个/rz动作/gi的/ude1三个/nz要素/gi（/wwho/nz,/nz what/nz,/nzwhere/nz）/w来/vf说明/v如何/ryv保障/vn数据/gi的/ude1使用/gi安全/gi。/w4.1/nz who /nz--谁/nz可以/v使用/gi平台/gi秉承/v开放/gi的/ude1心态/n，/w拥抱/v公司/nis内部/f所有/b用户/gi。/w但/c鉴于/p安全/gi考虑/v，/w平台/gi各/rz子系统/gi均/d对/p用户/gi身份/n进行/vn双重/b验证/v，/w通过/p认证/gi的/ude1用户/gi方可/d使用/gi平台/gi。/w此外/c，/w经过/p各/rz系统/gi严谨/a的/ude1鉴权/nz校验/v后/f，/w方能/v真正/d触达/nz目标/gi数据/gi。/w同时/c，/w账户/n实行/v个人/n实名/gi精细化/n管理/gi，/w保证系统/n内/f所有/b操作/gi记录/gi均可/v追踪/gi到/v个人/n。/w4.2/nz what/nz―/w可以/v使用/gi什么/ry数据/gi不同/a的/ude1用户/gi对/p数据/gi需求/gi不同/a，/w用户/gi按/p需/v申请/v使用/gi权限/gi。/w其中/rz，/w不同/a级别/n数据/gi权限/gi流程/gi不同/a，/w不同/a类别/gi数据/gi的/ude1权限/gi类型/gi不同/a。/w数据/gi分级管理/l：/w数据/gi根据/p不同/a的/ude1敏感度/n分级管理/l，/w不同/a级别/n的/ude1数据/gi权限/gi需/v走/v不同/a的/ude1申请/v通道/n，/w部分/n敏感数据/gi权限/gi需/v由/p部门/gi最高/a领导人/nnt进行/vn审批/vn。/w数据/gi分类管理/n：/w对于/p入库/vi层/gi数据/gi，/w只/d开放/gi只读/v权限/gi，/w防止/gi源/ng数据/gi被/pbei污染/vn，/w保持/v数据源/gi的/ude1完整性/gi。/w4.3/nz where/nz―/w在/p哪里/rys使用/gi非/btdw/nz系统/gi的/ude1ip/gi不能/v直接/ad访问/gi。/wip/gi白名单/nz控制/vn：/w只有/c指定/v安全/giip/gi方可/d访问/gi数据库/gi，/w白名单/nzip/gi都/d是/vshi我们/rr自己/rr的/ude1。/w平台/gi内/f流转/vn：/w数据/gi控制/vn在/ptdw/nz平台/gi内/f流转/vn，/w不/d流出/v；/w导出申请/nz：/w如有/c特殊/a导出/gi需求/gi，/w需/v申请/v，/w由/p上级/n确认/v；/w4.4/nz how /nz―/w /x审计/vn用户/gi如何/ryv使用/gi平台/gi提供/v用户/gi全/a流程/gi操作/gi记录/gi审计/vn功能/gi，/w用户/gi拥有/v哪些/ry权限/gi，/w使用/gi哪些/ry表/n，/w什么/ry时间/gi，/w在/p哪个/ry系统/gi进行/vn了/ule什么/ry操作/gi均/d有迹可循/i。/w权限/gi开放/gi审计/vn：/w权限/gi系统/gi提供/v权限/gi开放/gi审计/vn功能/gi，/w供/vi数据/giowner/nz审计/vn名下/n数据/gi权限/gi开放/gi情况/n，/w权限管理/gi透明化/n；/w针对/gi高/a敏感/gi表/n，/w权限/gi开放/gi实时/n监控/gi。/w使用/gi情况/n审计/vn：/w /x构建/gi统一/vn操作/gi流水/n查询/gi系统/gi，/w各/rz系统/gi的/ude1操作/gi流水/n永久/b保存/gi；/w其中/rz针对/gi敏感数据/gi，/w每日/r定期/d统计/gi使用/gi情况/n，/w供/vi管理员/gi每日/r审计/vn。/w内部人员/n审计/vn：/w /x在/p机器/gi上/f所有/b操作/gi都会/n上报/vi到/v到/v审计/vn系统/gi;/nz /x对/p敏感/gi操作/gi实时/n审计/vn，/w邮件/n上级/n及/cc本人/rr确认/v。/w