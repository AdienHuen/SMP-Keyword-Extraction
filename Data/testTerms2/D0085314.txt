#云存储/gi之/uzhi网盘/nz浅析/gi
网盘/nz最/d基础/gi两/nz个/q功能/gi /x―/w―/w /x存储/gi备份/gi和/cc文件共享/gi。/w目前/t主要/b采用/v分布式文件系统/nz进行/vn管理/gi，/w目前/t主要/b的/ude1分布式文件系统/nz包括/vgoogle/nz的/ude1gfs/nz,/nzhadoop/gi的/ude1hdfs/gi,/nzmogiledfs/nz以及/ccfastdfs/gi。/w由于/pgfs/nz和/cchdfs/gi主要/b是/vshi考虑/v为/p其/rz搜索引擎/gi服务/gi的/ude1，/w主要/b以/p文本/gi文件/gi为主/vi，/w并不/d适合于/v数据式/nz多样化/vi的/ude1网盘/nz系统/gi。/wmogiledfs/nz和/ccfastdfs/gi均/d为/p开源/gi分布式文件系统/nz。/w相比较/nz而言/uls，/wfastdfs/gi更/d高效/b。/w针对/gi可靠性/gi问题/gi。/w fastdfs/nz采用/v了/ule分组/gi存储/gi /x方式/n。/w集群/gi由/p一个/mq或/c多/a构成/v，/w集群/gi存储/gi总/b容量/gi为/p集群/gi中/f所有/b组/n的/ude1存储/gi之/uzhi和/cc。/w一个/mq组/n由/p一/nz台/q火/n多/a台/q存储/gi服务器/gi组成/gi，/w同组/nz内/f的/ude1多/a台/qstorage server/nz之间/f是/vshi互备/nz关系/gi，/w同组/nz存储/gi服务器/gi上/f的/ude1文件/gi是/vshi完全一致/i的/ude1。/w文件/gi上传/v，/w下载/gi删除/gi等/udeng操作/gi可以/v在/p组/n内/f任意/d一台/nzstorage server/nz上/f进行/vn，/w采用/v分组/gi存储/gi方式/n的/ude1好处/gi是/vshi灵活/a，/w可/v控制性/n较强/d。/w比如/v文件/gi上传/v时/qt，/w可以/v由/p客户端/gi之间/f指定/v上/f传到/v的/ude1组/n，/w一个/mq分组/gi的/ude1存储/gi服务器/gi访问/gi压力/n较大/d时/qt，/w可以/v在/p该组/r增加/v存储/gi服务器/gi来/vf扩/vg从/p服务/gi能力/gi（/w纵向/n扩容/v）/w，/w当/p系统/gi容量/gi不足/an时/qt，/w可以/v增加/v组/n来/vf扩充/v存储容量/gp（/w横向/n扩容/v）/w。/w采用/v这样/rzv的/ude1分组/gi存储/gi方式/n，/w可以/v使用/gifastdfs/gi对/p文件/gi进行/vn管理/gi，/w使用/gi流行/v的/ude1web server/nz如/vapache/gi,/nznginx/gi等/udeng进行/vn文件/gi下载/gi。/w针对/gi同步性/gm文件/gi，/wfastdfs/gi采用/vpush/nz方式/n，/w而且/c只/d在/p同组/nz内/f的/ude1storage server/nz之间/f进行/vn，/w即/v源头/n服务器/gi同步/gi给/p目标/gi服务器/gi，/w只有/c源头/n服务器/gi才/d需/v同步/gi。/w备份/gi数据/gi并不需要/l再次/d同步/gi，/w这/rzv就/d避免/v构成/v了/ule环路/n的/ude1可能性/gi，/w为了/p最大/gm程度/n地/ude2避免/v互相/d影响/gi以及/cc出于/v系统/gi简洁性/gi考虑/v，/wstorage server/nz对/p组/n内/f除/p自己/rr以外/f的/ude1每/rz台/q服务器/gi都会/n启动/gi一个/mq线程/gi来/vf进行/vn文件/gi同步/gi。/w针对/gi目录/gi管理/gi问题/gi，/w在/pfastdfs/gi中/f，/wstorage server/nz通过/p文件/giid/nz对/p文件/gi进行/vn识别/gi管理/gi，/w文件/giid/nz由/pstorage server/nz生成/v后/f返回/v给/p客户端/gi，/w文件/giid/nz中/f包含/v了/ule组/n名/q，/w文件/gi相对路径/nz和/cc文件名/gi，/wstorage server/nz可以/v根据/p文件/giid/nz直接/ad定位/gi到/v文件/gi，/w（/w这/rzv点/gi类/gi于/pp/nz2/nzp/nz的/ude1文件/gi管理/gi）/w采用/v这种/r方式/n不/d需要/v存储/gi文件/gi索引/gi信息/gifastdfs/gi的/ude1系统架构/gi从根本上/nz来说/uls，/w云/gi存储技术/nz是/vshi一种/nz实用型/nz服务/gi，/w它/rr可以/v为/p众多/a用户/gi提供/v一个/mq通过/p网络/gi访问/gi的/ude1共享/gi存储池/nz。/w云存储/gi不是/c一个/mq设备/gi，/w而是/c一种/nz服务/gi。/w具体/a说来/v，/w它/rr是/vshi把/pba数据存储/gi和/cc访问/gi作为/p一种/nz服务/gi并/cc通过/p网络/gi提供/v给/p用户/gi./nz云存储/gi是/vshi在/p云计算/gi概念/gi上/f延伸/v和/cc发展/gi出来/vf的/ude1一个/mq新的/a概念/gi，/w与/cc云计算/gi类/gi，/w它/rr是/vshi指/v通过/p集群/gi应用/gi、/w网/n技术/gi或/c分布式文件系统/nz等/udeng功能/gi，/w将/d网络/gi中/f大量/m各种/rz不同/a类型/gi的/ude1存储设备/nz通过/p应用软件/gi集合起来/l协同工作/n，/w共同/d对外/vn提供数据/n存储/gi和/cc业务/gi访问/gi功能/gi的/ude1一个/mq系统/gi。/w云/gi存储技术/nz架构/gi无论/c存储虚拟化/gi也好/y，/w /x还是/c集群/gi存储/gi、/wsannas/nz等/udeng都/d是/vshi一种/nz技术/gi，/w二者之间/nz没有/v必然/d的/ude1联系/gi。/w但是/c从/p架构/gi上/f看/v，/w云存储/gi会/v利用/v到/v现有/v的/ude1存储技术/nz。/w例如/v存储虚拟化/gi，/w云存储/gi可以/v借助/v该/rz技术/gi构建/gi庞大/a的/ude1存储池/nz，/w屏蔽/v底层/n存储/gi差异/n，/w从而/c对外/vn提供/v一致/a的/ude1服务/gi。/w从/p形式/gi上/f看/v，/w与/cc软件/gisaas/gi服务/gi有些/rz类/gi，/w所/usuo不同/a的/ude1是/vshi云存储/gi所/usuo提供/v的/ude1存储管理/gi和/cc服务/gi。/w与/cc传统/n的/ude1存储设备/nz相比/vi，/w云存储/gi不/d只是/d一个/mq硬件/gi，/w而是/c一个/mq网络设备/gi、/w存储设备/nz、/w服务器/gi、/w应用软件/gi、/w公用/gi访问/gi接口/gi、/w接入网/n、/w和/cc客户端程序/n等/udeng多/a个/q部分/n组成/gi的/ude1复杂/a系统/gi。/w云存储/gi系统/gi的/ude1结构模型/gi如下/vi：/w存储层/nz存储层/nz是/vshi云存储/gi最/d基础/gi的/ude1部分/n。/w存储设备/nz可以/v是/vshifc/nz光纤/n通道/n存储设备/nz，/w可以/v是/vshinas/gi和/cc iscsi/nz等/udengip/gi存储设备/nz，/w也/d可以/v是/vshi scsi/nz或/csas/nz等/udeng das/nz存储设备/nz。/w云存储/gi中的/v存储设备/nz往往/d数量/n庞大/a且/c分布/vi于/p多/a个/q不同/a地域/n，/w彼此之间/nz通过/p广域网/n、/w互联网/gi或者/cfc/nz光纤/n通道/n网络连接/nz在/p一起/s。/w存储设备/nz之上/f是/vshi一个/mq统一/vn存储设备/nz管理系统/gi，/w可以/v实现/gi存储设备/nz的/ude1逻辑/n虚拟化/gi管理/gi、/w多/a链路/gi冗余/n管理/gi，/w以及/cc硬件/gi设备/gi的/ude1状态/gi监控/gi和/cc故障/gi维护/gi。/w基础/gi管理层/n基础/gi管理层/n是/vshi云存储/gi最/d核心/n的/ude1部分/n，/w也/d是/vshi云存储/gi中/f最/d难以实现/l的/ude1部分/n。/w基础/gi管理层/n通过/p集群/gi、/w分布式文件系统/nz和/cc网/n计算/gi等/udeng技术/gi，/w实现/gi云存储/gi中/f多/a个/q存储设备/nz之间/f的/ude1协同工作/n，/w使/v多/a个/q存储设备/nz可以/v对外/vn提供/v同一/b种/q服务/gi，/w并/cc提供/v更大/d更/d强/a更好/d的/ude1数据/gi访问/gi性能/gi。/wcdn/gi内容/gi分发/v系统/gi、/w数据/gi加密技术/nz保证/v云存储/gi中的/v数据/gi不会/v被/pbei未/d授权/v的/ude1用户/gi所/usuo访问/gi。/w同时/c，/w通过/p各种/rz数据备份/nz和/cc容灾/gi技术/gi和/cc措施/gi可以/v保证/v云存储/gi中的/v数据/gi不会/v丢失/v，/w保证/v云存储/gi自身/rr的/ude1安全/gi和/cc稳定/an。/w应用/gi接口/gi层/gi应用/gi接口/gi层/gi是/vshi云存储/gi最/d灵活/a多变/z的/ude1部分/n。/w不同/a的/ude1云存储/gi运营/gi单位/n可以/v根据/p实际/n业务/gi类型/gi，/w开发/gi不同/a的/ude1应用服务/n接口/gi，/w提供/v不同/a的/ude1应用服务/n。/w比如/v视频/gi监控/gi应用/gi平台/gi、/wiptv/nz和/cc视频点播/gi应用/gi平台/gi、/w网络/gi硬盘/gi引用/gi平台/gi，/w远程/gi数据备份/nz应用/gi平台/gi等/udeng。/w访问/gi层/gi任何/rz一个/mq授权/v用户/gi都/d可以/v通过/p标准/gi的/ude1公用/gi应用/gi接口/gi来/vf登录/gi云存储/gi系统/gi，/w享受/v云存储/gi服务/gi。/w云存储/gi运营/gi单位/n不同/a，/w云存储/gi提供/v的/ude1访问/gi类型/gi和/cc访问/gi手段/n也/d不同/a。/w从/p云存储/gi结构模型/gi可知/v，/w云存储/gi系统/gi是/vshi一个/mq多/a设备/gi、/w多/a应用/gi、/w多/a服务/gi协同工作/n的/ude1集合体/nz，/w它/rr的/ude1实现/gi要以/c多/a种/q技术/gi的/ude1发展/gi为/p前提/n。/w总共/d可以/v分为/v六类/nz：/w宽带/n网络/gi的/ude1发展/gi；/wweb/gi2.0/nz技术/gi；/w应用/gi存储/gi的/ude1发展/gi；/w集群/gi技术/gi、/w网/n技术/gi和/cc分布式文件系统/nz；/wcdn/gi内容/gi分发/v、/wp/nz2/nzp/nz技术/gi、/w数据压缩/nz技术/gi、/w重复/gi数据/gi删除/gi技术/gi、/w数据/gi加密技术/nz；/w存储虚拟化/gi技术/gi、/w存储/gi网络化/vn管理/gi技术/gi。/wweb/gi2.0/nz技术/gi的/ude1核心/n是/vshi分享/gi。/w只有/c通过/pweb/gi2.0/nz技术/gi，/w云存储/gi的/ude1使用者/n才/d有可能/nz通过/ppc/nz、/w手机/gi、/w移动/vn多媒体/gi等/udeng多/a种/q设备/gi，/w实现/gi数据/gi、/w文档/gi、/w图片/gi和/cc视音频/n等/udeng内容/gi的/ude1集中/v存储/gi和/cc资料/gi共享/gi。/wweb/gi2.0/nz技术/gi的/ude1发展/gi使得/vi使用者/n的/ude1应用/gi方式/n和/cc可得/v服务/gi更加/d灵活/a和/cc多样/a。/wcdn/gi内容/gi分发/v系统/gi、/w数据/gi加密技术/nz保证/v云存储/gi中的/v数据/gi不会/v被/pbei未/d授权/v的/ude1用户/gi所/usuo访问/gi，/w同时/c，/w通过/p各种/rz数据备份/nz和/cc容灾/gi技术/gi保证/v云存储/gi中的/v数据/gi不会/v丢失/v，/w保证/v云存储/gi自身/rr的/ude1安全/gi和/cc稳定/an。/w如果/c云存储/gi中的/v数据安全/gi得不到/v保证/v，/w也/d就/d没有人/nz敢用/n云存储/gi。/w云存储/gi分为/v公共/b云存储/gi与/cc私有云/nz存储/gi。/w公共/b云/gi是/vshi一种/nz即/v付费/v即/v使用/gi的/ude1存储/gi服务/gi，/w由/p第三方/nz提供/v。/w它/rr的/ude1所有/b组件/gi都/d处于/v客户/n的/ude1防火墙/gi之外/f，/w共享/gi的/ude1基础设施/gi是/vshi彼此/rr分隔/vi的/ude1，/w可以/v通过/p安全/gi的/ude1网络连接/nz来/vf访问/gi。/w公共/b云/gi存储技术/nz与/cc私有云/nz存储技术/nz之间/f的/ude1差别/n在于/v用户/gi连接云/nz的/ude1方式/n不同/a。/w云存储/gi在/p架构/gi上/f具备/v数据共享/gi、/w大容量/n（/wpb/nz级/q）/w、/w低成本/nz的/ude1特点/n。/w云存储/gi在/p技术/gi是/vshi存储技术/nz的/ude1集大成者/nz，/w具备/v虚拟化/gi、/w数据压缩/nz、/w重复/gi数据/gi删除/gi、/w基于/p策略/gi的/ude1管理/gi等/udeng先进/a存储技术/nz，/w除此之外/al，/w云存储/gi还有/v以下/f几个/nz主要/b特点/n：/w云存储/gi的/ude1透明性/n云存储/gi的/ude1可扩展性/gi云存储/gi的/ude1安全性/gi云/gi存储技术/nz最/d擅长/v处理/vn大量/m非结构化/gi数据/gi和/cc归档/vn数据/gi，/w比如/v信用卡/gi、/w抵押/vn贷款/n申请/v或/c病历/n数据/gi等等/udeng。/w目前/t的/ude1公共/b云/gi还/d不能/v安全可靠/i地/ude2处理/vn那些/rz需要/v一直/d保持/v快速/d网络连接/nz的/ude1交易/gi文件/gi或/c数据库/gi。/w在/p目前/t环境/n下/f，/w云/gi存储技术/nz只/d适用/vi于/p对/p网络/gi延迟/v要求/n不/d高/a的/ude1应用环境/l。/w备份/gi、/w归档/vn和/cc大量文件/n数据/gi都/d很/d适合/v储存/gi在/p云中/ns，/w它们/rr对/p响应/v时间/gi没有/v什么/ry要求/n。/w另一方面/c，/w数据库/gi和/cc其他/rzv对/p性能/gi要求/n很/d敏感/gi的/ude1数据/gi只/d不/d适于/v使用/gi云/gi存储技术/nz，/w因为/c网络延时/nz对/p数据库/gi应用/gi来说/uls太/d严重/a了/ule。/w云存储/gi正/d成为/v未来/t存储/gi发展/gi的/ude1一种/nz趋势/gi，/w但/c云存储/gi的/ude1发展/gi也/d将/d面临/v不/d少/a挑战/gi。/w首先/d，/w云存储/gi中心/gi的/ude1建设/gi需要/v大量/m的/ude1投入/v，/w普通/a企业/gi很少/ad有/vyou这么/rz大/a的/ude1实力/n，/w而/cc大型/b企业/gi已经/d有/vyou自己/rr的/ude1it/gi设施/gi，/w是否/v愿意/v舍弃/v原先/d的/ude1it/gi设施/gi，/w对/p企业/gi的/ude1信息化/gi系统/gi，/w存储系统/gi进行/vn重新/d布置/v，/w需要/v的/ude1投入/v非常/d巨大/a。/w其次/c，/w虽然/c国内/s已经/d建立/gi了/ule部分/n云存储/gi中心/gi，/w但/c大部分/n客户/n都/d是/vshi政府/nis或者/c大型/b企业/gi，/w客户群/n比较/gi局限/gi，/w盈利/vn能力/gi较弱/d，/w在/p国内/s用户/gi没有/v达到/v一定/b数量/n的/ude1情况下/nz，/w如何/ryv维持/v一个云/nz存储/gi数据中心/gi是/vshi个/q非常/d大/a的/ude1难题/n。/w最后/f就是/v云存储/gi服务/gi的/ude1可靠性/gi，/w目前/t云存储/gi服务/gi的/ude1的/ude1可靠性/gi还/d无法/v达到/v企业级/nz的/ude1阵列/gi要求/n，/w如何/ryv确保/v用户数据/gi的/ude1绝对/d可靠/a也/d是/vshi云存储/gi需要/v解决/v的/ude1挑战/gi。/w