#微信/gi公众平台/gi开发/gi（/w十一/nz）/w /x功能/gi整合/gi
一/nz、/w简介/gi在/p前面/f的/ude1几/d篇/q微信/gi功能/gi开发/gi文档/gi中/f，/w各个/rz微信/gi的/ude1功能/gi都/d是/vshi独立/a的/ude1，/w单一/gi微信/gi只能/v提供/v一种/nz功能/gi，/w这样/rzv不/d符合/v大众/ntc开发者/gi和/cc客户/n的/ude1需求/gi。/w所以/c在/p这/rzv一/nz篇文章/n中/f，/w我们/rr将/d对/p前面/f开发/gi出来/vf的/ude1微信/gi功能/gi进行/vn简单/a整合/gi，/w以/p供/vi读者/n参考/gi。/w二/nz、/w思路/gi分析/gi一种/nz简单/a的/ude1做法/n是/vshi，/w截取/v关键字/gi，/w然后/c进行/vn判断/gi，/w执行/v相应/vi功能/gi代码/gi。/w这种/r做法/n比较/gi适合/v功能/gi不/d多/a，/w简单/a的/ude1微信/gi；/w另一种/nz做法/n是/vshi，/w给/p各/rz功能/gi编号/gi，/w然后/c记录/gi用户/gi选择/gi的/ude1功能/gi状态/gi，/w用户/gi每次/r查询/gi的/ude1时候/n，/w首先/d判断/gi他/rr的/ude1状态/gi，/w然后/c执行/v相应/vi功能/gi代码/gi。/w这种/r做法/n适合/v功能/gi整合/gi比较/gi多/a，/w复杂/a的/ude1微信/gi；/w开发者/gi可以/v根据/p自己/rr的/ude1需要/v来/vf进行/vn选择/gi。/w在/p这/rzv篇文章/n中/f，/w我们/rr将/d会/v讲解/gi天气/gi和/cc翻译/gi功能/gi的/ude1整合/gi，/w更多/ad功能/gi的/ude1整合/gi类/gi，/w大家/rr可以/v参考/gi着/uzhe做/v一下。三/nz、/w关键字/gi截取/v做法/n3.1/nz /x关键字/gi截取/v我们/rr定义/gi用户/gi发送/gi过来/vf的/ude1消息/n式/k是/vshi固定/a好/a的/ude1，/w查询/gi天气/gi式/k为/p /x“/w地区/n天气/gi”/w，/w例如/v /x“/w苏州/ns天气/gi”/w、/w“/w北京/gi天气/gi”/w，/w所以/c首先/d截取/v后/f两/nz个/q字/n，/w判断/gi是否/v为/p /x“/w天气/gi”/w /x关键字/gi，/w然后/c再/d截取/v前面/f的/ude1城市/gi名/q，/w进行/vn查询/gi。/w同理/v，/w翻译/gi也/d是/vshi截取/v前面/f的/ude1两/nz个/q字/n，/w判断/gi是否/v为/p“/w翻译/gi”/w关键字/gi，/w然后/c再/d截取/v后面/f的/ude1文字/gi进行/vn查询/gi操作/gi。/w关于/p关键字/gi截取/v方法/gi，/w请/v参考/gi前面/f的/ude1文章/gi介绍/gi，/w地址/gi是/vshi：/w。/w3.2/nz /x功能/gi整合/gi说明/v：/w在/p这里/rzs，/w我们/rr已经/d将/d查询/gi天气/gi和/cc翻译/gi封装/gi成/v了/ule函数/gi /x_/nzweather/nz(/nz)/nz /x和/cc /x_/nzbaidudic/nz(/nz)/nz，/w然后/c引入/v这些/rz文件/gi，/w在/p这里/rzs直接/ad调用/gi即可/v，/w非常/d方便/a。/w这样/rzv，/w我们/rr就/d完成/v了/ule天气/gi和/cc翻译/gi功能/gi的/ude1整合/gi。/w3.3/nz /x测试/gi测试/gi成功/a。/w四/nz、/w状态记录/gi做法/n4.1/nz /x说明/v首先/d，/w我们/rr需要/v将/d各/rz功能/gi进行/vn编号/gi，/w比如/v：/w回复/v序号/n：/w1./nz /x天气/gi查询/gi2./nz /x翻译/gi查询/gi然后/c使用/gi数据库/gi记录/gi用户/gi的/ude1查询/gi状态/gi，/w用户/gi每次/r输入/v消息/n，/w系统/gi先/d从/p数据库/gi中/f查询/gi该/rz用户/gi的/ude1状态/gi，/w然后/c进行/vn相应/vi操作/gi。/w4.2/nz /x在/p数据库/gi中/f创建/gi用户/gi状态表/n user/nz_/nzflags/nz./nz4.3/nz /x引入/v数据库/gi函数/gi文件操作/gi数据库/gi，/w需要/v引入/v数据/gi的/ude1操作/gi文件/gi，/w这里/rzs使用/gibae /nz提供/v的/ude1mysql /nz云数据库/gi。/w4.4/nz /x判断/gi用户/gi状态/gi说明/v：/w从/puser/gi_/nzflags /nz表/n中/f获取/giflag/nz_/nzid /nz赋/ng给/p$/nzuser/gi_/nzflag/nz，/w用于/v下面/f的/ude1判断/gi操作/gi。/w4.5/nz判断/gi用户/gi存在/v的/ude1状态/gi和/cc新/a输入/v的/ude1状态/gi说明/v：/w判断/gi用户/gi存在/v的/ude1状态/gi和/cc新/a输入/v的/ude1状态/gi，/w如果/c状态/gi不/d一样/uyy，/w而且/c输入/v的/ude1keyword /nz是/vshi数字/gi，/w则/d设置/gi$/nzuser/gi_/nzflag /nz为/p空/ng，/w数据库/gi中/f清除/v状态/gi，/w好像/v第一次/nz查询/gi流程/gi4.6/nz /x用户/gi状态/gi判断/gia/nz./nz状态/gi为/p空/ng，/w即/v第一次/nz查询/gi说明/v：/w用户/gi状态/gi为/p空/ng，/w即/v第一次/nz查询/gi，/w如果/c用户/gi输入/v的/ude1关键字/gi是/vshi功能/gi序号/n，/w即/v1/nz或/c2/nz，/w则/d将/d用户/gi状态/gi写入/gi数据库/gi，/w然后/c给出/v提示信息/n；/w如果/c用户/gi输入/v的/ude1关键字/gi不是/c功能/gi序号/n，/w则/d给出/v帮助/v信息/gi，/w提示/gi用户/gi输入/v。/wb/nz./nz用户/gi状态/gi不为/c空/ng说明/v：/w用户/gi状态/gi不为/c空/ng，/w用户/gi已经/d有/vyou查询/gi操作/gi，/w只要/c用户/gi不/d切换/vn功能/gi，/w则/d一直/d保持/v在/p现有/v功能/gi下/f，/w执行/v相应/vi代码/gi。/w4.7/nz /x测试五/nz、/w完整/a代码/gi获取/gi请/v访问/gi官方论坛/nzurl/gi：/w六/nz、/w关注/v请/v关注/v卓/ag锦/ag苏州/ns微信/gi公众/gi帐号/n，/w卓锦/nz苏州/ns基于/pbae /nz平台/gi开发/gi，/w针对/gi于/p主流/gi的/ude1微信/gi功能/gi进行/vn开发/gi测试/gi。/w您/rr可以/v关注/v卓/ag锦/ag苏州/ns公众/gi帐号/n进行/vn功能测试/gi，/w以及/cc获取/gi新的/a应用开发/gi。/w1./nz /x登录/gi微信/gi客户端/gi，/w通讯录/n /x-/nz /x添加/gi朋友/n /x-/nz /x查找/gi公众号/gi /x-/nzzhuojinsz/nz，/w查找/gi并/cc关注/v。/w2./nz /x扫描/gi二维码/nz：/w卓锦/nz苏州/ns功能/gi列表/vi：/w