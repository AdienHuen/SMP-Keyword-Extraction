#一/nz对/p多/a的/ude1单项/n关联/vn
现在/t我们/rr来/vf讨论一下/l一/nz对/p多/a的/ude1单项/n关联/vn。/w /x首先/d把/pba环境/n搭好/nz。/w /x我们/rr就/d拿/v老生常谈/n的/ude1班级/n和/cc学生/gi作为/p例子/gi。/w /x关于/p班级/n类/gi：/w有/vyou班级/n的/ude1id /nz,/nz班级/n的/ude1名字/n，/w班级/n的/ude1描述/gi。/w /x关于/p学生/gi类/gi：/w有/vyou学生/gi的/ude1id/nz，/w学生/gi的/ude1名字/n，/w学生/gi的/ude1描述/gi。/w /x首先/d两张/nz表/n要/v进行/vn关联/vn，/w首先/d需要/v外键/gi，/w那么/c在/p一对多/nz的/ude1情况/n中/f，/w外键/gi是/vshi放在/v多/a的/ude1那/rzv一方/nz。/w（/w外键/gi在/p多/a的/ude1那/rzv一方/nz是/vshi指/v生成/v的/ude1表/n在/p数据库/gi中/f，/w外键/gi在/p多/a的/ude1那/rzv一方/nz）/w /x首先/d我们/rr要/v把/pba2/nz个/q类/gi设计/gi出来/vf。/w classes/nz：/wstudent/nz：/w然后/c就是/v配置文件/gi，/w这里/rzs有/vyou2/nz个/qdomain/nz，/w所以/c也/d要/v有/vyou2/nz个/q映射/gi文件/gi//nz /x首先/d是/vshiclasses/nz的/ude1然后/c是/vshistudent/nz在/pstudent/nz类/gi及/cc配置文件/gi中/f，/w都/d没有/v看到/v可以/v找到/v与/ccclasses/nz关联/vn的/ude1属性/gi，/w这/rzv叫做/v单向/b关联/vn，/w然后/c我们/rr创建/gi一个/mq测试/gi类/gi，/w来/vf生成/v表/n：/w最后/f，/w一定/b要/v记得/v，/w把/pba2/nz个/q映射/gi文件/gi都/d加到/vhibernate/gi的/ude1配置文件/gi中/f。/w /x最后/f在/p数据库/gi中/f，/w我们/rr可以/v看到/v两/nz张/q表/n，/w并且/c点/gi开表/nz之后/f，/w可以/v看到/v里面/f的/ude1属性/gi，/w外键/gi。/w /x例子/gi：/w /x保存/gi班级/n：/w运行/gi结果/n如/v下图/n所示/nz /x保存/gi学生/gi：/w运行/gi结果/n如下/vi图/gi  /x在/p这里/rzs可以/v注意到/v，/wcid/nz是/vshi没有/v值/n的/ude1！/w保存/gi学生/gi和/cc班级/n操作/gi结果/n如下/vi：/w student/nz表/n：/w classes/nz表/n：/w /x可是/c这样/rzv保存/gi两/nz次/qv，/w太麻烦/nz，/whibernate/gi推出/v了/ule级联/n操作/gi，/w在/p保存/gi一个/mq有/vyou关联/vn的/ude1对象/gi的/ude1时候/n，/w跟/p这个/rz对象/gi关联/vn的/ude1对象/gi也/d会/v被/pbei保存/gi。/w级联/n操作/gi：/w /x在/p映射/gi文件/gi中的/vset/nz属性/gi，/w增加/v一个/mq属性/gicascade/nz那么/c在/p保存/gi班级/n的/ude1同时/c，/w保存/gi学生/gi：/w运行/gi结果/n：/w  student/nz表/n  classes/nz表/n /x这种/r操作/gi又/d叫做/v隐式/nz操作/gi。/w /x如果/c在/p映射/gi文件/gi中/f没有/v设置/gicascade/nz属性/gi，/w就/d会/v报错/nz。/w  /x为什么/ryv会报/n这样/rzv的/ude1错误/gi呢/y？/w /x因为/c看/v我们/rr的/ude1代码/gi可以/v知道/v，/w我们/rr只是/d保存/gi了/uleclasses/nz，/w但是/c此时/r，/wstudent/nz还是/c处于/v瞬时/t状态/gi的/ude1对象/gi，/w由于/p没有/v设置/gi级联/n的/ude1属性/gi，/w所以/c就/d报/n对象/gi参照/v了/ule一个/mq没有/v保存/gi的/ude1瞬时/t对象/gi的/ude1错误/gi。/w