#Java/gi设计模式/nz之/uzhi单例模式/gi
说/v到/v单例模式/gi /x大家/rr一定/b非常/d熟悉/v /x这/rzv是/vshi最/d常见/a也/d是/vshi设计模式/nz中/f相对/d简单/a /x好/a理解/gi的/ude1设计模式/nz /x今天/t就/d跟/p大家/rr掰/v一/nz掰/v单例模式/gi：/w单例模式/gi确保/v某个/rz类/gi只有/c一个/mq实例/gi /x应用场景/gi /x线程池/gi /x缓存/gi /x等/udeng对象/gi常常/d被/pbei设计/gi成单/nz例/n /x然而/c单例/gi分/qt两/nz种/q /x：/w1/nz：/w恶汉/nz式/k /x2/nz：/w懒汉式/gi  /x我们/rr先/d来看/u下/f /x恶汉/nz式/k看到/v上面/f代码/gi /x我们/rr来说/uls下/f第一步/nz /x如果/c不/d私有化/vn构造方法/gi /x外界/n可以/v随意/ad访问/gi /x那么/c这样/rzv /x就/d没有/v意义/n /x也/d没有/v做到/v所谓/v的/ude1单例/gi，/w /x如果/c你/rr第一步/nz忘记/v写/v了/ule /x只要/c开发者/gi /x不/d去/vf new /nz构造/n /x还是/c /x使用/giget /nz方法/gi获取/gi对象/gi /x是/vshi不/d影响/gi代/q使用/gi的/ude1 /x但是/c特别是在/l开发/gi /x框架/gi sdk /nz等/udeng /x你/rr如果/c少/a写/v了/ule第一个/gi私有化/vn构造/n /x这样/rzv就/d会/v出/vf问题/gi /x程序/gi也/d补/v严谨/a，/w关于/p /x2/nz /x3/nz布/n /x注释/gi已经/d非常/d详细/gi /x这边/rzs就/d不/d做/v过多/d赘述/vi。/w下面/f我们/rr来/vf看看/v /x懒汉式/gi第一步/nz和/cc恶汉式/nz没什么/vl区别/gi /x看/v第二步/nz /x只是/d在/p栈/gi内存/gi做/v了/ule声明/gi /x并/cc没有/v new /nz实例/gi /x这样的话/l /x加载/gi类/gi会/v快/a /x运行/gi的/ude1时候/n会/v慢/a /x一提/nz的/ude1是/vshi /x懒汉式/gi /x会/v有线程/nz并发/gi的/ude1不/d安全/gi因素/gi：/w下面/f引用/gi慕/vg课/n的/ude1评论/gi的/ude1解释/gi如果/c两/nz个/q线程/gi threada/nz和/cc threadb/nz分别/d开始/v执行/v初始化/v：/wthreada/nz:/w if /nz(/nzinstance /nz=/nz=/nz null/nz)/nz /x是/vshi真/a，/w然后/c进入/v条件/n区/n里面/f里面/f，/w在/p它/rr还/d没有/v到/v初始化/v那/rzv一步/nz的/ude1时候/n，/w跳到/vf threadb/nz:/w这时/rzt(/nzinstance/gi=/nz=/nznull/gi)/nz对/pthreadb/nz仍然/d是/vshi真/a，/w于是/cc也/d进入/v到/v条件/n区/n里面/f。/w接下来/vl threada/nz和/ccthreadb/nz接下来/vl先后/d执行/vinstance /nz=/nz new /nz.../w /x就/d会/v分别/d给/p两/nz个/q线程/gi两/nz个/q不同/a的/ude1instance/gi了/ule /x解决/v同步/gi的/ude1问题/gi /x可以/v加/vsynchronized /nz同步/gi锁/v我们/rr如何/ryv来/vf验证/v /x是/vshi单例/gi的/ude1呢/y /x见/v下图/n看到/v输出/gi的/ude1结果/n /x两/nz个/q对象/gi双等/b比较/gi内存地址/nz /x或者/c /x你/rr也/d可以/v直接/ad把/pba内存地址/nz /x输出/gi /x看看/v是否/v一样/uyy /x会/v得到/v@/nzxxx /nz的/ude1输出/gi，/w明显/a看出/v /x两/nz次/qv拿/v实例/gi都/d是/vshi /x拿/v的/ude1同一个/b对象/gi恶汉/nz式/k /x和/cc /x懒汉式/gi /x的/ude1区别/gi:/w恶汉/nz式/k /x是/vshi随着/p类/gi的/ude1加载/gi /x就/d已经/d把/pba实例/gi加载/gi出来/vf了/ule /x不管/c你/rr最后/f用/p还是/c没用/vi /x这个/rz实例/gi /x特点/n就是/v /x加载/gi类/gi慢/a /x运行/gi快/a /x懒汉式/gi /x特点/n就是/v /x加载/gi类/gi快/a /x运行/gi慢/a单例模式/gi就/d介绍/gi到/v这里/rzs，/w谢谢/v