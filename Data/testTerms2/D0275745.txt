#五分钟/nz一个/mq设计模式/nz之/uzhi命令模式/gi
五分钟/nz一个/mq设计模式/nz，/w用/p最简单/nz的/ude1方法/gi来/vf描述/gi设计模式/nz。/w查看/gi更多/ad设计模式/nz，/w请/v点击/v小米/n智能/gi模块/gi的/ude1例子/gi前/f一段/nz小米/n的/ude1老总/nnt雷军/nr在/p印度/nsf的/ude1全/a英文/nz演讲/gi想必/d大家/rr都/d还/d历历在目/vl，/w不过/c今天/t我们/rr讨论/gi的/ude1主题/n不是/c那次/r演讲/gi，/w而是/c小米/n智能/gi模块/gi。/w小米/n4/nz发布/gi时/qt，/w雷军/nr说/v，/w小米/n已经/d开发/gi了/ule一个/mq智能/gi模块/gi，/w只要/c电器/gi厂商/gi将/d这个/rz智能/gi模块/gi集成/vn到/v自家/rr的/ude1电器/gi中/f，/w就/d可以/v用/p小米/n手机/gi来/vf控制/vn它/rr，/w并且/c小米/n智能/gi模块/gi才/d22/nz块钱/q。/w是不是/v一件/nz很/d牛/nx/nz的/ude1事情/n？/w这个/rz事情/n，/w从/p宏观/gi上/f来看/u，/w通过/p小米/n手机/gi来/vf控制/vn所有/b集成/vn了/ule智能/gi模块/gi的/ude1电器/gi，/w就是/v使用/gi了/ule命令模式/gi！/w下面/f我们/rr来/vf模拟/gi一下/m这个/rz事情/n。/w首先/d，/w有/vyou一些/m家用电器/n的/ude1厂商/gi，/w他们/rr能/v控制/vn自家/rr的/ude1电器/gi的/ude1开关/gi。/w这么/rz多/a个/q厂商/gi，/w小米/n手机/gi怎么/ryv能/v控制/vn他们/rr呢/y？/w让/v他们/rr实现/gi相同/a的/ude1类/gi吗/y？/w这/rzv就/d要求/n所有/b厂商/gi修改/gi自家/rr的/ude1类/gi，/w他们/rr肯定/v不/d愿意/v。/w这/rzv就/d会用/n到/v一个/mq新的/a概念/gi，/w组合/gi。/w小米/n手机/gi提供/v一个/mq统一/vn的/ude1智能/gi模块/gi，/w这个/rz智能/gi模块/gi和/cc各/rz厂商/gi的/ude1类/gi组合/gi到/v一块/s，/w然后/c小米/n手机/gi直接/ad控制/vn智能/gi模块/gi就/dok/nz了/ule。/w智能/gi模块/gi到底/d是/vshi什么/ry呢/y，/w它/rr包含/v了/ule很/d多/a个/q定义/gi好/a的/ude1类/gi每一个/nz类/gi控制/vn一种/nz家用电器/n，/w如/v，/w大灯/n控制器/n，/w热水器/n控制器/n，/w冰箱/n控制器/n，/w电视/n控制器/n，/w小米/n盒子/n控制器/n，/w等等/udeng各种/rz控制器/n。/w每/rz一/nz种/q具体/a的/ude1控制器/n都/d能/v在/p小米/n手机/gi的/ude1控制器/n应用/gi中/f找到/v一个/mq对应/vi的/ude1按钮/n。/w /x下面/f来/vf看看/v这个/rz智能/gi模块/gi到底/d是/vshi什么/ry。/w它/rr是/vshi一/nz组类/nz，/w实现/gi了/ule同一个/b接口/gi icommand/nz下面/f是/vshi智能控制/gi模块/gi中/f庞大/a的/ude1一/nz组类/nz，/w我们/rr来/vf列举/v几/d个/q大灯/n控制器/n加热器/n控制器/n类/gi太多/ad了/ule，/w不/d列举/v了/ule。/w所有/b的/ude1类/gi都/d有/vyou这样/rzv的/ude1特点/n：/w实现/gi了/uleicommand/nz接口/gi一个/mq请求/gi（/w或/c命令/gi）/w就是/v一个/mq类/gi不/d直接/ad执行命令/n，/w而是/c由/p跟/p它/rr组合/gi的/ude1具体/a电器/gi对象/gi来/vf执行命令/n有/vyou了/ule这个/rz智能/gi模块/gi，/w小米/n手机/gi的/ude1调用/gi就/d简单/a了/ule程序/gi的/ude1运行/gi结果/n是/vshi：/w /x灯亮了/i /x灯灭了/i /x加热/vi中/f /x停止/gi加热/vi认识/v命令模式/gi看到/v了/ule命令模式/gi的/ude1强大/a，/w下面/f我们/rr来/vf认识/v一/nz下/f命令模式/gi /x命令模式/gi的/ude1定义/gi是/vshi：/w将/d一个/mq请求/gi封装/gi为/p一个/mq对象/gi，/w从而/c使/v你/rr可用/v不同/a的/ude1请求/gi对/p客户端/gi进行/vn参数/gi化/v，/w对/p请求/gi排队/gi或/c记录/gi日志/gi，/w以及/cc支持/v可/v撤销/v操作/gi。/w命令模式/gi的/ude1关键/n之处/r把/pba每一个/nz具体/a的/ude1请求/gi都/d封装/gi成/v了/ule一个/mq对象/gi，/w即/v命令/gi对象/gi，/w这些/rz请求/gi实现/gi了/ule同一个/b接口/gi，/w而且/c还/d不/d亲自/d执行/v具体任务/n。/w每/rz一个/mq命令/gi对象/gi都/d和/cc命令/gi的/ude1具体/a执行者/nnd组合/gi在/p一起/s，/w由/p命令/gi的/ude1具体/a执行者/nnd来/vf执行命令/n。/w在/p上面/f的/ude1例子/gi中/f，/w小米/n智能/gi模块/gi中的/v每一个/nz类/gi，/w都/d是/vshi命令/gi对象/gi，/w他们/rr实现/gi了/ule同一个/b接口/gi，/w跟/p具体/a电器/gi组合/gi，/w在/pexecute/nz方法/gi中/f调用/gi电器/gi的/ude1方法/gi来/vf执行/v任务/gi。/w小米/n手机/gi通过/picommand/nz接口/gi控制/vn智能/gi模块/gi，/w智能/gi模块/gi调用/gi具体/a的/ude1电器/gi来/vf完成/v开/v或/c关/n。/w关于/p撤销/v，/w也/d不难/d实现/gi。/w在/p我们/rr的/ude1icommand/nz接口/gi中/f，/w只/d定义/gi了/ule一个/mqexecute/nz方法/gi，/w我们/rr只/d需要/v加入/v一个/mqundo/nz方法/gi，/w让/v所有/b的/ude1命令/gi对象/gi去/vf实现/gi就/d好/a了/ule。/w这/rzv样子/n的话/udh，/w在/p客户端/gi得到/v的/ude1命令/gi对象/gi就/d可以/v直接/ad调用/giundo/nz方法/gi了/ule。/w用/p命令模式/gi来/vf分析/gi完/vi小米/n智能/gi盒子/n后/f，/w我/rr想问/nz你/rr：/ware you ok /nz?/nz