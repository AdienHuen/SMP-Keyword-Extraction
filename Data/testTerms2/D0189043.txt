#集群/gi、/w负载均衡/gi及/cc分布式系统/gi架构/gi
转载自/nz:/w感谢/v博主/nz的/ude1无私/b分享/gi1./nz集群/gi1.1/nz /x定义/gi：/w是/vshi一/nz组/n独立/a的/ude1计算机系统/gi构成/v一个松/nz耦合/vn的/ude1多处理器/l系统/gi，/w它们/rr之间/f通过/p网络/gi实现/gi进程/gi间/f的/ude1通信/gi。/w应用程序/nz可以/v通过/p网络共享/nz内存/gi进行/vn消息/n传送/v，/w实现/gi分布式计算机/nz。/w是/vshi一/nz组/n连在一起/l的/ude1计算机/gi，/w从外部/nz看/v它/rr是/vshi一个/mq系统/gi，/w各/rz节点/gi可以/v是/vshi不同/a的/ude1操作系统/gi或/c不同/a硬件/gi构成/v的/ude1计算机。如一个/nz提供/vweb/gi服务/gi的/ude1集群/gi，/w对/p外界/n来看/u是/vshi一个/mq大/aweb服务器/gi。/w不过/c集群/gi的/ude1节点/gi也/d可以/v单独/d提供/v服务/gi。/w1.2/nz /x负载均衡/gi系统/gi：/w集群/gi中/f所有/b的/ude1节点/gi都/d处于/v活动状态/l，/w它们/rr分摊/v系统/gi的/ude1工作/gi负载/gi。/w一般/adweb服务器/gi集群/gi、/w数据库/gi集群/gi和/cc应用服务器/gi集群/gi都/d属于/v这种/r类型/gi。/w负载均衡/gi集群/gi一般/ad用于/v相应/vi网络/gi请求/gi的/ude1网页/gi服务器/gi，/w数据库服务器/gi。/w这种/r集群/gi可以/v在/p接到/v请求/gi时/qt，/w检查/gi接受/gi请求/gi较少/ad，/w不/d繁忙/a的/ude1服务器/gi，/w并/cc把/pba请求/gi转到/v这些/rz服务器/gi上/f。/w从/p检查/gi其他/rzv服务器/gi状态/gi这一点/nz上/f看/v，/w负载均衡/gi和/cc容错/gi集群/gi很/d接近/v，/w不同之处/l是/vshi数量/n上/f更多/ad。/w1.3/nz /x集群/gi系统/gi主要/b解决/v下面/f几/d个/q问题/gi：/w高可靠性/n（/wha/nz）/w：/w利用/v集群/gi管理软件/nz，/w当/p主/ag服务器/gi故障/gi时/qt，/w备份/gi服务器/gi能够/v自动/d接管/v主/ag服务器/gi的/ude1工作/gi，/w并/cc及时/ad切换/vn过去/vf，/w以/p实现/gi对/p用户/gi的/ude1不间断/l服务/gi。/w负载均衡/gi：/w即/v把/pba负载/gi压力/n根据/p某种/rz算法/gi合理/a分配/gi到/v集群/gi中的/v每/rz一/nz台/q计算机/gi上/f，/w以/p减轻/v主/ag服务器/gi的/ude1压力/n，/w降低/v对/p主/ag服务器/gi的/ude1硬件/gi和/cc软件/gi要求/n高性能计算/gi（/whp/gi）/w：/w即/v充分利用/n集群/gi中的/v每/rz一/nz台/q计算机/gi的/ude1资源/gi，/w实现/gi复杂/a运算/gi的/ude1并行处理/gi，/w通常/d用于/v科学计算/nz领域/gi，/w比如/v基因/gi分析/gi，/w化学分析/nz等/udeng。/w2./nz负载均衡/gi系统/gi先/d从/p集群/gi讲起/v负载均衡/gi又/d有/vyoudns/nz负载均衡/gi（/w比较/gi常用/a）/w、/wip/gi负载均衡/gi、/w反向代理/gi负载均衡/gi等/udeng，/w也/d就是/v在/p集群/gi中/f有/vyou服务器/gia/nz、/wb/nz、/wc/nz，/w它们/rr都/d是/vshi互不/d影响/gi，/w互不/d相干/vi的/ude1，/w任何/rz一台/nz的/ude1机器/gi宕/n了/ule，/w都/d不会/v影响/gi其他/rzv机器/gi的/ude1运行/gi，/w当/p用户/gi来/vf一个/mq请求/gi，/w有/vyou负载/gi均衡器/gi的/ude1算法/gi决定/v由/p哪/ry台/q机器/gi来/vf处理/vn，/w假如/c你/rr的/ude1算法/gi是/vshi采用/vround/nz算法/gi，/w有/vyou用户/gia/nz、/wb/nz、/wc/nz，/w那么/c分别/d由/p服务器/gia/nz、/wb/nz、/wc/nz来/vf处理/vn；/w2.1/nz基于/pdns/nz的/ude1负载均衡/gi通过/pdns/nz服务/gi中的/v随机/b名字/n解析/gi来/vf实现/gi负载均衡/gi，/w在/pdns/nz服务器/gi中/f，/w可以/v为/p多/a个/q不同/a的/ude1地址/gi配置/gi同一个/b名字/n，/w而/cc最终/d查询/gi这个/rz名字/n的/ude1客户机/nz将/d在/p解析/gi这个/rz名字/n时/qt得到/v其中/rz一个/mq地址/gi。/w因此/c，/w对于/p同一个/b名字/n，/w不同/a的/ude1客户/n机会/gi得到/v不同/a的/ude1地址/gi，/w他们/rr也/d就/d访问/gi不同/a地址/gi上/f的/ude1web服务器/gi，/w从而/c达到/v负载均衡/gi的/ude1目的/gi。/w2.2/nz反向代理/gi负载均衡/gi /x（/w如/vapachejk/nz2/nztomcat/nz这种/r组合/gi）/w使用/gi代理服务器/gi可以/v将/d请求/gi转发给/v内部/f的/ude1web服务器/gi，/w让/v代理服务器/gi将/d请求/gi均匀/a地/ude2转发给/v多/a台/q内部/fweb服务器/gi之一/rz上/f，/w从而/c达到/v负载均衡/gi的/ude1目的/gi。/w这种/r代理/gi方式/n与/cc普通/a的/ude1代理/gi方式/n有所/v不同/a，/w标准/gi代理/gi方式/n是/vshi客户/n使用/gi代理/gi访问/gi多/a个/q外部/fweb服务器/gi，/w而/cc这种/r代理/gi方式/n是/vshi多/a个/q客户/n使用/gi它/rr访问/gi内部/fweb服务器/gi，/w因此/c也/d被/pbei称为/v反向代理/gi模式/gi。/w2.3/nz基于/pnat/nz（/wnetwork address translation/nz）/w的/ude1负载均衡/gi技术/gi /x（/w如/vlinux virtual server/nz，/w简称/vlvs/gi）/w网络地址/gi转换/gi为/p在/p内部/f地址/gi和/cc外部/f地址/gi之间/f进行/vn转换/gi，/w以便/d具备/v内部/f地址/gi的/ude1计算/gi机能/n访问/gi外部/f网络/gi，/w而/cc当/p外部/f网络/gi中的/v计算机/gi访问/gi地址/gi转换/gi网关/gi拥有/v的/ude1某/rz一外部/nz地址/gi时/qt，/w地址/gi转换/gi网关/gi能/v将/d其/rz转发/gi到/v一个/mq映射/gi的/ude1内部/f地址/gi上/f。/w因此/c如果/c地址/gi转换/gi网关/gi能/v将/d每个/r连接/gi均匀/a转换/gi为/p不同/a的/ude1内部/f服务器/gi地址/gi，/w此/rzs后/f外部/f网络/gi中的/v计算机/gi就/d各自/rr与/cc自己/rr转换/gi得到/v的/ude1地址/gi上/f服务器进行/n通信/gi，/w从而/c达到/v负载/gi分担/gi的/ude1目的/gi。/w3./nz分布式/gi是/vshi指/v将/d不同/a的/ude1业务/gi分布/vi在/p不同/a的/ude1地方/n。/w而/cc集群/gi指/v的/ude1是/vshi将/d几/d台/q服务器/gi集中/v在/p一起/s，/w实现/gi同一/b业务/gi。/w /x分布式/gi中的/v每一个/nz节点/gi，/w都/d可以/v做/v集群/gi。/w /x而/cc集群/gi并不一定/d就是/v分布式/gi的/ude1。/w举例/gi：/w就/d比如/v新浪网/nz，/w访问/gi的/ude1人/n多/a了/ule，/w他/rr可以/v做/v一个/mq群集/n，/w前面/f放/v一个/mq响应/v服务器/gi，/w后面/f几/d台/q服务器/gi完成/v同一/b业务/gi，/w如果/c有/vyou业务/gi访问/gi的/ude1时候/n，/w响应/v服务器/gi看/v哪/ry台/q服务器/gi的/ude1负载/gi不是/c很重/nz，/w就/d将/d给/p哪/ry一台/nz去/vf完成/v。/w分布式/gi，/w从/p窄意/nz上/f理解/gi，/w也/d跟/p集群/gi差不多/al，/w /x但是/c它/rr的/ude1组织/gi比较/gi松散/a，/w不/d像/v集群/gi，/w有/vyou一个/mq组织性/n，/w一台/nz服务器/gi垮了/v，/w其它/rz的/ude1服务器/gi可以/v顶上来/f。/w /x分布式/gi的/ude1每一个/nz节点/gi，/w都/d完成/v不同/a的/ude1业务/gi，/w一个/mq节点/gi垮了/v，/w哪/ry这个/rz业务/gi就/d不可/v访问/gi了/ule。/w在/p群集/n的/ude1这/rzv三种/nz基本/a类型/gi之间/f，/w经常/d会/v发生/v交叉/gi、/w混合/vn。/w比如/v：/w在/p高可用性/n的/ude1群集/n系统/gi中/f也/d可以/v在/p其/rz节点/gi之间/f实现/gi负载均衡/gi，/w同时/c仍然/d维持/v着/uzhe其/rz高可用性/n。/w还有/v一种/nz概括性/n说法/n：/wcluster/gi是/vshi手段/n，/wload banlance/nz是/vshi目标/gi之一/rz。/w