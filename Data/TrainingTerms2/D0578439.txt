#数据库/gi /x版本号/gi读取/gi
??/nz这里/rzs举/v个/q例子/gi说明/v版本号/gi的/ude1概念/gi，/w当/p发起/v一个/mq大/a表/n的/ude1统计/gi操作/gi时/qt，/w执行/v了/ule10/nz分钟/qt，/w在/p第/mq5/nz分钟时/nz，/w对/p它/rr所/usuo查询/gi的/ude1部分/n数据/gi进行/vn增加/v，/w删除/gi，/w修改/gi操作/gi，/w这些/rz操作/gi已/d成功/a执行/v，/w也/d成功/a执行/v了/ulecommit/nz动作/gi，/w并且/c可以/v确保/v整个/b大/a表/n统计/gi操作/gi的/ude1sql语句/gi还/d未/d扫描/gi到/v这/rzv部分/n修改/gi的/ude1数据/gi，/w那么/c最终/d的/ude1统计/gi结果/n是否/v会/v包含/v这些/rz修改/gi后/f的/ude1数据/gi呢/y？/w??/nz在/p数据库/gi中/f答案/gi通常/d是/vshino/nz，/w前/f文中/s也/d提到/v这一点/nz，/w数据库/gi的/ude1要求/n也/d是/vshi这样/rzv的/ude1，/w从/p一个/mqsql语句/gi发起/v的/ude1时间/gi点/gi开始/v算起/vf，/w它/rr所/usuo查询/gi的/ude1数据/gi都/d应当/v是/vshi这个/rz时间/gi点/gi的/ude1数据/gi，/w在/p这个/rz时间/gi后/f修改/gi的/ude1数据/gi是/vshi不算/v的/ude1。/w??/nz如果/c数据/gi被/pbei修改/gi和/cc提交/gi，/w那么/c自然/n就/d需要/v从前/t文中/s提到/v的/ude1类似于/vundo/nz的/ude1地方/n去/vf查找/gi历史/n版本/n的/ude1数据/gi，/w因此/cundo/nz还有/v这个/rz作用/gi。/w但是/cundo/nz肯定/v也/d有/vyou存放/v空间/n的/ude1限制/vn，/w当/pundo/nz这个/rz空间/n存放/v不下/v时/qt，/w就/d会/v将/d较早/d版本/n的/ude1数据/gi清理/gi掉/v，/w如果/c一个/mqsql语句/gi发生/v的/ude1时间/gi很长/d了/ule，/w并且/c系统/gi有/vyou较高/ad的/ude1写/v操作/gi，/w这个/rz空间/n被/pbei清理/gi的/ude1概率/gi是/vshi很高/d的/ude1，/w那么/csql语句/gi在/pundo/nz中/f找/v不到/v相应/vi的/ude1数据/gi后/f就/d可能会/nz报错/nz。/w通常/d为了/p避免/v这样/rzv的/ude1问题/gi，/w都/d是/vshi将/d这个/rz空间/n加到/v足够/v大/a，/w或者/c尽量避免/l在/p极高/d并发/gi的/ude1系统/gi中/f使用/giolap/gi语句/gi来/vf提取/v数据/gi。/w