#java/gi处理/vn大数据/gi的/ude1一个/mq优化/gi解决方案/gi
  /x之前/f和/cc大家/rr提过/v我们/rr公司/nis现在/t在/p做/v一个/mq手机/gi应用/gi商店/gi的/ude1项目/gi,/nz之前/f测/v过/uguo平均/a每/rz分钟/qt有/vyou2000/nz条/q请求/gi,/nz每秒/d就是/v50/nz左右/f,/nz现在/t肯定/v更多/ad,/nz数据量/n大/a的/ude1时候/n每秒/d有/vyou400/nz~/nz500/nz条/qsql/gi插入/gi操作/gi（/w记录/gi用户/gi行为/n,/nz每个/r请求/gi都会/n将/d信息/gi写入/gilog/gi表/n）/w,/nz然后/c我们/rr目前/t是/vshi还/d没有/v用/phadoop/gi之类/rz的/ude1分布式/gi,/nz服务器/gi好像/v内存/gi是/vshi8/nzg/nz,/nzcpu/gi是/vshi16/nz核/n的/ude1,/nz这些/rz差不多/al就是/v现在/t的/ude1情况/n,/nz经常/d导致/gi连接/gi超时/v,/nz之前/f也/d做/v过/uguo一/nz些/q优化/gi点击/v查看/gi,/nz今天/t又/d优化/gi了/ule下/f./nz之前/f是从/v配置/gi和/cc服务器/gi层面/n,/nz这次/r是/vshi代码/gi层面/n./nz  /x上面/f我/rr说/v过/uguo每条/d请求/gi进来/vf我们/rr都会/n将/d用户/gi信息/gi插入/gi到/v数据库/gi,/nz400/nz个/q同时/c进来/vf就/d同时/c有/vyou400/nz条/qsql/gi插入/gi,/nz一个/mq插入/gi占/v一个/mq连接/gi,/nz这样/rzv很/d危险/an的/ude1,/nz经常/d导致/gi连接/gi撑/v爆/v,/nz所以/c我们/rr在/p这个/rz地方/n直接/ad起/vf了/ule一个/mq线程/gi,/nz把/pba大量/m的/ude1需要/v插入/gi的/ude1数据/gi放入/v线程/gi的/ude1list/gi里面/f,/nz然后/c在线/vn程/n里面/f做/v批量/d插入/gi操作/gi,/nz这样/rzv的/ude1情况/n就是/v数据量/n大/a的/ude1时候/n只用/v了/ule一个/mqconnection/nz就/d可以/v将/d300/nz /x400/nz条/q数据/gi插入/gi到/v数据库/gi,/nz节省/v了/ule大量/m的/ude1连接/gi资源/gi啊/y！/w我/rr这个/rz项目/gi除了/p插入/gilog/gi数据量/n大/a之外/f,/nz还有/v个/qpush/nz功能/gi,/nzpush/nz广告/gi之类/rz的/ude1时候/n,/nz每秒/d有/vyou1000/nz以上/f的/ude1请求/gi进来/vf,/nz在/p插入/gilog/gi表/n的/ude1时候/n还/d会/v插入/gipush/nz表/n,/nz你/rr说/v这样/rzv多/a伤/v啊/y,/nz所以/cpush/nz这块/r也/d做/v了/ule这样/rzv的/ude1优化/gi操作/gi./nz  /x思路/gi就是/v上面/f那样/rzv,/nz优化/gi的/ude1结果/n就是/v,/nz想/v都/d不用/d想/v,/nz妈妈/n再也/d不用/d担心/v应用/gi连接/gi数据库/gi会/v超时/v了/ule,/nz除非/c网速/nz坑爹/nz./nz  /x希望/v以上/f思路/gi和/cc优化/gi解决方案/gi可以/v帮助/v到/v各位朋友/nz,/nz我们/rr马上/d也/d会/v使用/gi到/vhadoop/gi,/nz到时候/l再来/d和/cc大家/rr分享/gi经验/gi./nz下面/f我/rr先/d给出/v部分/n实例/gi代码/gi1./nz插入/gilog/gi的/ude1线程/gi代码/gi2./nz调用/gi时候/n的/ude1代码/gi,/nz下面/f3/nz句/q代码/gi分别/d在/p不同/a的/ude1代码/gi块/q,/nz考虑到/v公司/nis保密/vn问题/gi我/rr就/d不/d把/pba代码/gi都/d拿出/v来/vf了/ule,/nz只/d列出/v和/cc本/rz方案/gi有/vyou关系/gi的/ude1代码/gi干货/nf分享/gi完毕/vi,/nz准备/v下班/vi了/ule./nz作者/nnt：/wdarren/nz中原文/nz地址/gi:/w /x