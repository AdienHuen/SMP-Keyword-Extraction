#关于/p系统运维/gi监控/gi规范/gi的/ude1几点/nz建议/gi和/cc思考/gi
目前/t很/d多/a企业信息化/gi系统/gi都/d有/vyou自己/rr的/ude1监控/gi平台/gi和/cc监控/gi手段/n，/w无论是/c采用/v哪种/ry手段/n去/vf实现/gi对系统/l的/ude1实时/n监控/gi和/cc故障/gi告警/gi，/w大多/d采用/v的/ude1方式/n也/d只有/c两/nz种/q：/w一/nz、/w集中式监控/gi和/cc分布式监控/gi。/w博主/nz根据/p自身/rr公司/nis监控/gi存在的问题/gi，/w总结/gi了/ule一/nz些/q经验/gi并/cc提出/v一/nz些/q在/p监控/gi平台/gi建设/gi建议/gi以/p供/vi大家/rr参考/gi学习/gi，/w如有/c考虑不周/n的/ude1地方/n还/d希望/v大家/rr多多/d批评指正/nz哦/e。/w为了/p更好/d、/w更/d有效/gi的/ude1保障系统/n上线/n后/f的/ude1稳定/an的/ude1运行/gi。/w对于/p服务器/gi的/ude1硬件资源/l、/w性能/gi、/w带宽/n、/w端口/gi、/w进程/gi、/w服务/gi等/udeng都/d必须/d有一个/nz可靠/a和/cc可持续/nz的/ude1监测/vn机制/gi，/w统计分析/gm每天/r的/ude1各种/rz数据/gi，/w从而/c能/v及时/ad反映/v出/vf服务器/gi哪里/rys存在/v性能/gi瓶颈/gi、/w安全隐患/nz等/udeng。/w另外/c是/vshi要/v有/vyou危机意识/nz，/w就是/v了解/v服务器/gi有可能/nz出现/v哪些/ry严重/a的/ude1问题/gi，/w出现/v这些/rz问题/gi后/f该/rz如何/ryv去/vf迅速/ad处理/vn。/w比如/v数据库/gi的/ude1数据/gi丢失/v，/w日志/gi容量/gi过/uguo大/a，/w被/pbei黑客/gi入侵/gi等等/udeng。/w一/nz、/w上线/n之前/f的/ude1准备/v工作/gi1./nz    /x首先/d是/vshi备份/gi，/w做好/v定时/d备份/gi策略/gi，/w备份/gi所有/b你/rr认为/v重要/a的/ude1数据/gi，/w并且/c定期检查/n你/rr的/ude1备份/gi是否/v有效/gi、/w全面/ad；/w2./nz    /x日志/gi轮换/vn，/w无论/c你/rr想用/v哪种/ry轮换/vn方式/n，/w控制/vn日志/gi增长/gi避免/v驱动器/n已/d满/a是/vshi你/rr的/ude1目的/gi；/w3./nz    /x做/v一定/b的/ude1安全措施/gi，/w如/v防火墙/giiptables/nz的/ude1访问控制/gi，/w用/pdenyhosts/nz防止/gi黑客/gi远程/gi暴力破解/nz；/w4./nz    mysql/nz远程/gi登录/gi权限/gi等等/udeng；/w5./nz    /x最后/f就是/v服务器/gi、/w网/n元/q设备/gi的/ude1监控/gi。/w二/nz、/w监控/gi策略/gi1./nz    /x定义/gi告警/gi优先级/n策略/gi一般/ad的/ude1监控/gi到/v的/ude1结果/n是/vshi成功/a或者/c失败/vi，/w如/vping/gi不通/a、/w访问/gi网页/gi出错/gi、/w连接/gi不到/vsocket/gi，/w发生/v时/qt这些/rz称之为/v故障/gi，/w故障/gi是/vshi最/d优先/vd的/ude1告警/gi。/w除此之外/al，/w还/d能/v监控/gi到/v返回/v的/ude1延时/v、/w内容/gi等/udeng，/w如/vping/gi返回/v的/ude1延时/v、/w访问/gi网页/gi的/ude1时间/gi、/w访问/gi网页/gi取到/v的/ude1内容/gi等/udeng。/w利用/v返回/v的/ude1结果/n可以/v自定义/nz告警/gi条件/n，/w如/vping/gi监控/gi的/ude1返回/v延时/v一般/ad是/vshi10/nz-/nz30/nzms/nz之间/f，/w当/p延时/v大于/v100/nzms/nz时候/n，/w表示/v网络/gi或者/c服务器/gi可能/v出现/v问题/gi，/w引起/v网络/gi响应/v慢/a，/w需要/v立即/d检查/gi是否/v流量/gi过/uguo大/a或者/c服务器/gicpu/gi太高/d等/udeng问题/gi。/w2./nz    /x定义/gi告警信息/l内容/gi标准/gi当/p服务器/gi或/c应用/gi发生/v故障/gi时/qt告警信息/l内容/gi非常/d多/a，/w如/v告警/gi运行/gi业务/gi名称/n、/w服务器/giip/gi、/w监控/gi的/ude1线路/n、/w监控/gi的/ude1服务/gi错误/gi级别/n、/w出错/gi信息/gi、/w发生/v时间/gi等/udeng。/w预先/d定义/gi告警/gi内容/gi及/cc标准/gi使/v收到/v的/ude1告警/gi内容/gi具有/v规范性/n及/cc可读性/n。/w这/rzv点/gi对于/p用/p短信/n接受/gi告警/gi内容/gi特别/d有/vyou意义/n，/w短信内容/n最多/ad是/vshi70/nz个字符/n，/w要/v在/p70/nz个字符/n完全/ad知道/v故障/gi内容/gi比较/gi困难/an，/w更/d需要/v预先/d定义/gi内容/gi规范/gi。/w如/v：/w“/w视频/gi直播/vn服务器/gi10.0.211.65/nz /x在/p2012/nz-/nz10/nz-/nz18/nz /x13/nz:/w00/nz电信/n线路/n监控第/nz到/v1/nz次/qv失败/vi”/w，/w清晰/a明了/v的/ude1知道/v故障/gi信息/gi。/w3./nz    /x通过/p邮件/n接收/gi汇总/v报表/gi每天/r收到/v一封/nz网站/gi服务器/gi监控/gi的/ude1汇总/v报表/gi邮件/n，/w花/n个/q两三/nz分钟/qt就/d大致/d了解/v网站/gi和/cc服务器/gi状态/gi。/w4./nz    /x集中/v监控/gi和/cc分布式监控/gi相结合/nz主动/ad（/w集中/v）/w监控/gi虽然/c能/v不/d需要/v安装/gi代码/gi和/cc程序/gi，/w非常/d安全/gi和/cc方便/a，/w但/c缺少/v很/d多/a细致/a的/ude1监控/gi内容/gi，/w如/v无法/v获取/gi硬盘/gi大小/n、/wcpu/gi的/ude1使用率/n、/w网络/gi的/ude1流量/gi等/udeng，/w这些/rz监控/gi内容/gi非常/d有/vyou用/p，/w如/vcpu/gi太高/d表示/v有/vyou网站/gi或者/c程序/gi出/vf问题/gi，/w流量/gi太高/d表示/v可能/v被/pbei攻击/gi等/udeng。/w被动/a（/w分布式/gi）/w监控/gi常用/a的/ude1是/vshisnmp/nz(/nz简单网络/l管理/gi协议/gi)/nz，/w通过/psnmp/nz能/v监控/gi到/v大部分/n你/rr感兴趣/a的/ude1内容/gi。/w大部分/n操作系统/gi支持/vsnmp/nz，/w开通/v管理/gi非常/d方便/a，/w也/d非常/d安全/gi。/wsnmp/nz缺点/gi是/vshi比较/gi占用/v带宽/n，/w会/v消耗/gi一定/b的/ude1cpu/gi和/cc内存/gi，/w在/pcpu/gi太高/d和/cc网络流量/nz大/a情况下/nz，/w无法/v有效/gi进行/vn监控/gi。/w5./nz    /x定义/gi故障/gi告警/gi主次/n对于/p监控/gi同一/b台/q服务器/gi的/ude1服务/gi，/w需要/v定义/gi一个/mq主要/b监控/gi对象/gi，/w当/p主要/b监控/gi对象/gi出现/v故障/gi，/w只/d发送/gi主要/b监控/gi对象/gi的/ude1告警/gi，/w其它/rz次要/b的/ude1监控/gi对象/gi暂停/v监控/gi和/cc告警/gi。/w例如/v用/pping/gi来/vf做/v主要/b监控/gi对象/gi，/w如果/cping/gi不通/a出现/vtimeout/nz，/w表示/v服务器/gi已经/d当机/nz或者/c断/v网/n，/w这时/rzt只/d发送/gi服务器/giping/gi告警/gi持续/vd监控/giping/gi，/w因为/c再继续/nz监控/gi和/cc告警/gi其它/rz服务/gi已经/d没有/v必要/a。/w这样/rzv能/v大大减少/i告警/gi消息/n数量/n，/w又/d让/v监控/gi更加/d合理/a、/w更加/d有效率/n。/w本地/gi监控/gi脚本/gi的/ude1规范化/vn部署/gi6./nz    /x对/p在/p本地/gi部署/gi的/ude1监控/gi脚本/gi要/v进行/vn统一/vn规范/gi的/ude1部署/gi并/cc记录/gi到/vkm/nz系统/gi。/w7./nz    /x实现/gi对/p常见性/nz故障/gi业务/gi自我/rr修复/gi功能/gi实现/gi对/p常见性/nz故障/gi业务/gi自我/rr修复/gi功能/gi脚本/gi进行/vn统一/vn部署/gi并/cc对/p修复/gi后/f故障/gi进行/vn检查/gi告警/gi检查/gi频次/nz不/d多于/v3/nz次/qv。/w8./nz    /x对/p监控/gi的/ude1业务/gi系统/gi进行/vn分级/gi一级/b系统/gi实现/gi7/nz*/nz24/nz小时/n告警/gi，/w二级/b系统/gi实现/gi7/nz*/nz12/nz小时/n告警/gi，/w三级/gi系统/gi实现/gi5/nz*/nz8/nz小时/n告警/gi。/w9./nz    /x监控/gi范围/n及/cc目标/gi实现/gi对/p负载均衡/gi设备/gi、/w网络设备/gi、/w服务器/gi、/w存储设备/nz、/w安全设备/i、/w数据库/gi、/w中间件/n及/cc应用软件/gi等/udengit/gi资源/gi的/ude1全面/ad监控/gi管理/gi；/w同时/c自动/d收集/v、/w过滤/gi、/w关联/vn和/cc分析/gi各种/rz管理/gi功能/gi产生/v的/ude1故障/gi事件/gi，/w实现/gi对/p故障/gi的/ude1提前/vd预警/gi和/cc快速/d定位/gi；/w对/p网络/gi和/cc业务/gi应用/gi等/udengit/gi资源/gi的/ude1性能/gi进行/vn监控/gi，/w定期/d提供/v性能/gi报表/gi和/cc趋势/gi报表/gi，/w为/p性能优化/gi及/cc未来/t系统/gi扩容/v提供/v科学依据/l。/w通常/d情况下/nz，/w我们/rr可以/v将/d监控/gi对象/gi这么/rz来/vf分/qt：/wl /nz1./nz服务器/gi监控/gi，/w主要/b监控/gi服务器/gi如/v：/wcpu /nz负载/gi、/w内存/gi使用率/n、/w磁盘/gi使用率/n、/w登陆/vi用户数/n、/w进程/gil /nz状态/gi、/w网卡/gi状态/gi等/udeng。/wl /nz2./nz应用程序/nz监控/gi，/w主要/b监控/gi该/rz应用程序/nz的/ude1服务/gi状态/gi，/w吞吐量/gi和/cc响应/v时间/gi，/w因为/c不同/a应用/gi需要/v监/vgl /nz控/v的/ude1对象/gi不同/a，/w这里/rzs不一一列举/nz。/wl /nz3./nz数据库/gi监控/gi，/w只/d所以/c把/pba数据库/gi监控/gi单独/d列出来/v，/w足以/d说明/v它/rr的/ude1重要性/n，/w一般/ad监控/gi数据库/gi状态/gi，/wl /nz数据库表/gi或者/c表空间/gi的/ude1使用/gi情况/n，/w是否/v有/vyou死锁/gi，/w错误日志/gi，/w性能/gi信息/gi等等/udeng。/wl /nz4./nz网络/gi监控/gi，/w主要/b监控/gi当前/t的/ude1网络/gi状况/n，/w网络流量/nz等/udeng。/w以上/f四条/nz应该/v算是/v最/d基本/a的/ude1，/w也/d是/vshi保证/v网站/gi正常/a运行/gi必须/d要/v知道/v的/ude1几点/nz内容/gi，/w这样/rzv才能/n实现/gi我们/rr常/d说/v的/ude1“/w运筹帷幄/vl之中/f，/w决胜/vi千里之外/nz”/w。/w