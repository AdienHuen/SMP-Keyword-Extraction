#第四章/nz:/wAndroid/gi之/uzhi本地/gi数据库/gi使用/gi所要/b考虑/v的/ude1技术/gi
习惯上/nz，/w将/d自己/rr的/ude1应用/gi与/cc数据库/gi扯上/nz关系/gi总是/d显得/v“/w高大/a上/f”/w（/wonly a joke/nz）/w。/w为了/p能/v将/d数据/gi持久化/nz，/w都/d需要/v本地/gi或者/c网络/gi存储/gi措施/gi，/w包括/v但/c不限/v于/p文本/gi、/w应用服务器/gi、/w数据库服务器/gi。/w而/cc其中/rz关于/p数据库服务器/gi的/ude1使用/gi又/d大/a分为/v本地/gi和/cc网络/gi，/w而/cc本地/gi由/p分为/v应用/gi本身/rz自带/n和/cc运行/gi环境/n（/wpc/nz）/w提供/v。/w在/p本章/r接下来/vl的/ude1部分/n，/w将/d介绍/gi的/ude1就/d属于/v运行/gi环境/n（/wpc/nz）/w提供/v范畴/n。/w第四章/nz:/wandroid/gi之/uzhi本地/gi数据库/gi使用/gi所要/b考虑/v的/ude1技术/gi沿袭/v前辈/n们/k的/ude1习惯/n，/w使用/gi一个/mq具体/a的/ude1示例--登录/nz /x作为/p使用/gi数据库/gi案例/gi效果图/nz：/w在/p很/d简单/a的/ude1一个/mq样例/nz：/w输入/v已经/d注册/gi（/w后台/gi数据库/gi已有/v的/ude1）/w的/ude1用户名/n与/cc密码/gi，/w登录/gi后会/n有/vyou相应/vi的/ude1提示/gi或者/c界面/gi跳转/vi（/w自定义/nz）/w。/w涉及/v技术/gi点/gi1/nz、/w本地/gi数据库/gi的/ude1选择/gi（/w涉及/v驱动/gi包/v和/ccsql/gi语法/gi的/ude1差异/n）/w2/nz、/wandroid/gi的/ude1真机/nz与/cc模拟/gi设备/gi差异/n3/nz、/w连接/gi策略/gi的/ude1选择/gi（/wjdbc/gi、/wweb service/nz、/wsocket/gi）/w4/nz、/w连接/gi数据库安全/gi的/ude1保障/vn（/w目标/gi地址/gi的/ude1端口/gi及/cc数据库/gi本身/rz的/ude1信息/gi隐藏/v）/w围绕/v以上/f的/ude1技术/gi点/gi，/w我们/rr来/vf一一/d探讨/v1/nz、/w本地/gi数据库/gi的/ude1选择/gi（/w涉及/v驱动/gi包/v和/ccsql/gi语法/gi的/ude1差异/n）/w如果/c是/vshiunix/gi//nzlinux/gi平台/gi开发/gi，/w只能/v选择/gimysql/gi或者/coracle/gi进行/vn调试/gi，/w为了/p简单/a演示/gi，/w所以/c暂且/d定为/vmysql/gi。/w如果/c是/vshi基于/pwindows/gi平台/gi的/ude1开发/gi，/w可选/vsqlserver/gi（/w甚至/daccess/nz都/d可以/v）/w。/w笔者/n推荐/gi的/ude1是/vshi最/d符合/v系列/n开发工具/nz配合/v准则/n，/w而/cc不是/c强调/v数据库/gi之间/f的/ude1优劣/n。/w选择/gi好/a既定/b的/ude1数据库/gi类型/gi后/f，/w需要/v下载/gijdbc/gi的/ude1驱动/gi包/v，/w这个/rz对于/pmysql/gi的/ude1用户/gi来说/uls可能/v已经/d习以为常/vl，/w但是/c对于/psqlserver/gi用户群/n可能会/nz有/vyou混淆/v的/ude1地方/n在于/v与/ccodbc/nz的/ude1差别/n，/w因为/cwindows/gi的/ude1自我/rr生态圈/n做/v的/ude1相对/d完善/v，/w所以/cwindows/gi自我实现/l了/ule连接/gi数据库/gi的/ude1一种/nz方式/n（/w即/vodbc/nz）/w，/w它/rr的/ude1配置/gi过程/gi超出/v本文/r介绍/gi内容/gi的/ude1范畴/n，/w因此/c仅/d介绍/gi一下/m存在/v的/ude1差别/n，/w简而言之/vl：/wjdbc/gi：/wjava/gi访问/gi数据库/gi的/ude1一套/nz规则/gi，/w由/p数据库/gi厂商/gi（/w或/c授权/v发行商/n）/w提供/v的/ude1一套/nz实现/gi访问控制/gi的/ude1api/gi，/w采用/vjava/gi语言/gi实现/gi。/wodbc/nz：/w由/p微软/ntc为/p支持/v的/ude1数据库/gi提供/v的/ude1一套/nz访问/gi接口/gi，/w需要/v本地/gi配置/gi资源/gi池/ng（/w详细/gi了解/v可以/v搜索/gi相关知识/gi）/w，/w非/bjava实现/gi。/w2/nz、/wandroid/gi的/ude1真机/nz与/cc模拟/gi设备/gi差异/n由于/p真机/nz与/cc模拟/gi设备/gi存在/v网络连接/nz的/ude1差异/n，/w真机/nz有/vyou自己/rr的/ude1硬件/gi支持/v网络协议/nz进行/vn网络/gi访问控制/gi（/wgprs/nz、/wwifi/gi）/w；/w模拟/gi设备/gi仅/d依赖/v本地/gipc/nz进行/vn连接/gi，/w使用/gi的/ude1是/vshi本地/gi网卡/gi。/w因此/c在/p进行/vn调试/gi的/ude1过程/gi中/f两者/rzv是/vshi存在/v根本/a的/ude1差异/n，/w这/rzv就/d决定/v了/ule在/p选择/gi连接/gi数据库/gi的/ude1策略/gi中/f使用/gi方式/n。/w3/nz、/w连接/gi策略/gi的/ude1选择/gi（/wjdbc/gi、/wweb service/nz、/wsocket/gi）/w当前/t常用/a的/ude1连接/gi数据库/gi的/ude1方式/n有/vyou3/nz种/q：/wjdbc/gi、/wweb service/nz、/wsocketjdbc/nz：/w没啥/nz好说/a的/ude1，/w3/nz板斧/n（/wurl/gi配置/gi、/wclassdriver/nz加载/gi、/wsql语句/gi的/ude1执行/v）/w的/ude1老套路/nweb service/nz：/w通过/p访问/gi应用服务器/gi（/w简单/a的/ude1通讯/gi可以/v采用/vservlet/nz，/w也/d可以/v使用/giaction/nz之类/rz的/ude1框架/gi）/w，/w /x根据/p应用服务器/gi访问/gi数据库服务器/gi放回/vf的/ude1结果/n，/w再/d将/d结果/n反馈/gi给/p应用/gi端/v，/w其中/rz需要/v解决/v的/ude1是/vshi数据/gi解析/gi的/ude1问题/gisocket/gi：/w这个/rz是/vshi现在/t网络编程/gi最/d常用/a的/ude1技术/gi，/w在/p本地/gi访问/gi中/f也/d可以/v采用/v该/rz技术/gi，/w因为/c本地/gi的/ude1ip/gi地址/gi也/d是/vshi网络/gi的/ude1一种/nz。/w /x实现/gi过程/gi可以/v是/vshi把/pba应用/gi端的/z请求/gi包装/n成/vsocket/gi包/v，/w发送/gi服务端/nz，/w等待/gi响应/v后/f的/ude1返回/v（/w或者/c状态/gi）/w作为/p展现/v结果/n的/ude1依据/n，/w /x如果/c是/vshi需要/v实时/n的/ude1能力/gi（/w类/giqq/gi）/w，/w则/d需要/v增加/v心跳/vi技术/gi，/w保证/v“/w时刻/n”/w监听/gi在线/vn情况/n。/w因为/c采用/v的/ude1是/vshi模拟/gi设备/gi进行/vn调试/gi，/w所以/c首选/vnjdbc/gi；/w如果/c是/vshi真机/nz调试/gi，/w那/rzv笔者/n首选/vnweb service/nz方式/n；/w更进一步/vl，/w如果/c是/vshi做成/v可/v发布/gi的/ude1产品/gi，/w首选/vnsocket/gi。/w以上/f这些/rz策略/gi的/ude1选择/gi都/d无法/v完全避免/nz一个/mq实际/n的/ude1问题/gi：/w信息安全/gijdbc/gi：/w有/vyou能力/gi的/ude1技术人员/nnt可以/v根据/p你/rr的/ude1产品/gi进行/vn反编译/nz，/w从而/c获得/v你/rr的/ude1数据库/gi相关/vn信息/gi（/w端口号/n，/wip/gi，/w数据库名/nz和/cc表名/nz）/wweb service/nz：/w可以/v通过/p网络/gi抓取/gi的/ude1方式/n，/w以/p相同/a的/ude1http/gi请求/gi方式/n获取/gi返回/v结果/n，/w利用/v多/a次/qv结果/n，/w可/v推测/v出/vf请求/gi和/cc返回/v数据/gi式/k（/w相较/d于/pjdbc/gi更加/d困难/an，/w但是/c目前/t的/ude1工具/gi还有/v很/d多/a）/wsocket/gi：/w可以/v通过/p抓包/gi工具/gi，/w获取/gi网络/gi传输/gi的/ude1消息/n序列/gi，/w利用/v现有/v的/ude1协议/gi类型/gi获取/gi和/cc工具/gi得出/v请求/gi数据/gi与/cc返回/v消息/n内容/gi，/w破解/gi关键/n信息/gi根据/p以上/f存在的问题/gi，/w需要/v做到/v保障/vn数据库/gi的/ude1连接/gi安全/gi，/w起码/d不能/v采用/v“/w裸/ag跑/v”/w（/w明文/n编码/gi和/cc传输/gi）/w的/ude1方式/n。/w4/nz、/w连接/gi数据库安全/gi的/ude1保障/vn（/w目标/gi地址/gi的/ude1端口/gi及/cc数据库/gi本身/rz的/ude1信息/gi隐藏/v）/w连接/gi数据库/gi的/ude1信息/gi不能/v采用/v硬编码/nz的/ude1方式/n存在/v与/cc应用/gi中/f，/w容易/ad被/pbei反编译/nz，/w解决/v这样/rzv的/ude1问题/gi常用/a的/ude1方式/n有/vyou使用/gi框架/gi和/cc加密/gi框架/gi：/w指/v采用/v特定/b的/ude1通讯/gi流程/gi，/w将/d关键/n信息/gi配置/gi在/p某个/rz（/w或/c几个/nz）/w文件/gi中/f，/w在/p运行/gi时/qt读取/gi，/w并且/c不/d随着/p产品/gi打包/vi在/p源码/gi文件/gi中/f，/w而是/c被/pbei二进制/gi化/v（/w或者/cweb/gi化/v）/w，/w从而/c要么/c反编译/nz代价/gi高/a，/w要么/c常规/n办法/gi无法/v获取/gi特定/b信息/gi文件/gi。/w加密/gi：/w利用/v数学/gi算法/gi将/d明文/n部分/n进行/vn加密/gi，/w在/p应用/gi读取/gi时/qt进行/vn动态/gi解密/gi，/w传输/gi过程/gi根据/p信道/n的/ude1安全/gi程度/n决定/v是否/v再/d加密/gi，/w总之/c，/w一般/ad手段/n即使/c获取/gi的/ude1关键/n信息/gi也/d是/vshi密文/gi结果/n无法/v直接/ad正常/a使用/gi，/w提高/v信息/gi隐藏/v的/ude1安全性/gi。/w小结/n本文/r介绍/gi了/ule一个/mq连接/gi数据库/gi应用/gi需要/v考虑/v的/ude1问题/gi，/w当然/d这些/rz考虑/v不能/v概括/v所有/b方面/n，/w只是/d抛砖引玉/vl，/w希望/v借此/v来/vf将/d自己/rr的/ude1思路/gi能够/v扩展/gi，/w提高/v应用/gi本身/rz的/ude1合理/a和/cc安全性/gi。/w后续/vn会/v对/p实现/gi细节/gi展示/gi出来/vf，/w同时/c将/d期间/f遇到/v的/ude1问题/gi以及/cc解决办法/n（/w原因/n）/w详细介绍/gi。/w敬请期待/i，/w未完待续/nz。。。/w