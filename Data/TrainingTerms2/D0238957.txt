#工厂模式/gi
定义/gi：/w确保/v一个/mq类/gi只有/c一个/mq实例/gi，/w而且/c自行/d实例化/gi并/cc向/p整个/b系统/gi提供/v这个/rz实例/gi。/w类型/gi：/w创建类/gi模式/gi类图/gi：/w单例模式/gi应该/v是/vshi23/nz种/q设计模式/nz中/f最简单/nz的/ude1一种/nz模式/gi了/ule。/w它/rr有/vyou以下/f几个/nz要素/gi：/w私/ag的/ude1构造方法/gi指向/v自己/rr实例/gi的/ude1私/ag静态/gi引用/gi以/p自己/rr实例/gi为/p返回/v的/ude1静态/gi的/ude1公/ng的/ude1方法/gi单例模式/gi根据/p实例化/gi对象/gi时机/n的/ude1不同/a分为/v两/nz种/q：/w一种/nz是/vshi饿汉式单例/gi，/w一种/nz是/vshi懒汉式/gi单例/gi。/w饿汉式单例/gi在/p单例/gi类/gi被/pbei加载/gi时候/n，/w就/d实例化/gi一个/mq对象/gi交给/v自己/rr的/ude1引用/gi；/w而/cc懒汉式/gi在/p调用/gi取得/v实例/gi方法/gi的/ude1时候/n才/d会/v实例化/gi对象/gi。/w代码/gi如下/vi：/w饿汉式单例/gi懒汉式/gi单例/gi单例模式/gi的/ude1优点/gi：/w在/p内存/gi中/f只/d一个/mq对象/gi，/w节省/v内存空间/nz。/w避免/v频繁/a的/ude1创建/gi销毁/v对象/gi，/w可以/v提高/v性能/gi。/w避免/v对/p共享资源/nz的/ude1多重/b占用/v。/w可以/v全局/n访问/gi。/w适用/vi场景/gi：/w由于/p单例模式/gi的/ude1以上/f优点/gi，/w所以/c是/vshi编程/gi中用/a的/ude1比较/gi多/a的/ude1一种/nz设计模式/nz。/w我/rr总结/gi了/ule一下/m我/rr所/usuo知道/v的/ude1适合/v使用/gi单例模式/gi的/ude1场景/gi：/w需要/v频繁/a实例化/gi然后/c销毁/v的/ude1对象/gi。/w创建对象/n时/qt耗时/vi过多/d或者/c耗/v资源/gi过多/d，/w但/c又/d经常/d用/p到/v的/ude1对象/gi。/w状态/gi的/ude1工具/gi类/gi对象/gi。/w频繁/a访问/gi数据库/gi或/c文件/gi的/ude1对象/gi。/w以及/cc其他/rzv我/rr没用过/nz的/ude1所/usuo要求/n只/d一个/mq对象/gi的/ude1场景/gi。/w单例模式/gi注意事项/nz：/w只能/v使用/gi单例/gi类/gi提供/v的/ude1方法/gi得到/v单例/gi对象/gi，/w不要/d使用/gi反射/gi，/w否则/c将/d会/v实例化/gi一个/mq新/a对象/gi。/w不要/d做/v断开/gi单例/gi类/gi对象/gi与/cc类/gi中/f静态/gi引用/gi的/ude1危险/an操作/gi。/w多线程/gi使用/gi单例/gi使用/gi共享资源/nz时/qt，/w注意/v线程安全/gi问题/gi。/w关于/pjava/gi中/f单例模式/gi的/ude1一/nz些/q争议/vn：/w单例模式/gi的/ude1对象/gi长时间/nz不用/d会/v被/pbeijvm/nz垃圾/n收集器/n收集/v吗/y /x看到/v不/d少/a资料/gi中/f说/v：/w如果/c一个/mq单例/gi对象/gi在/p内存/gi中长久/nz不用/d，/w会/v被/pbeijvm/nz认为/v是/vshi一个/mq垃圾/n，/w在/p执行/v垃圾/n收集/v的/ude1时候/n会/v被/pbei清理/gi掉/v。/w对此/d这个/rz说法/n，/w笔者/n持/v怀疑/v态度/n，/w笔者/n本人/rr的/ude1观点/gi是/vshi：/w在/photspot/nz虚拟机/gi1.6/nz版本/n中/f，/w除非/c人/n为/p地/ude2断开/gi单例/gi中/f静态/gi引用/gi到/v单例/gi对象/gi的/ude1联接/v，/w否则/cjvm/nz垃圾/n收集器/n是/vshi不会/v回收/vn单例/gi对象/gi的/ude1。/w对于/p这个/rz争议/vn，/w笔者/n单独/d写/v了/ule一篇/nz文章/gi进行/vn讨论/gi，/w如果/c您/rr有/vyou不同/a的/ude1观点/gi或者/c有/vyou过/uguo这/rzv方面/n的/ude1经历/gi请/v进入/v文章/gi单例模式/gi讨论/gi篇/q：/w单例模式/gi与/cc垃圾/n收集/v参与/gi讨论/gi。/w在/p一个/mqjvm/nz中会/j出现/v多/a个/q单例/gi吗/y /x在/p分布式系统/gi、/w多/a个/q类/gi加载器/nz、/w以及/cc序列化/gi的/ude1的/ude1情况下/nz，/w会/v产生/v多/a个/q单例/gi，/w这一点/nz是/vshi无庸置疑/nz的/ude1。/w那么/c在/p同一个/bjvm/nz中/f，/w会/v不会/v产生/v单例/gi呢/y？/w使用/gi单例/gi提供/v的/ude1getinstance/nz(/nz)/nz方法/gi只能/v得到/v同一个/b单例/gi，/w除非/c是/vshi使用/gi反射/gi方式/n，/w将/d会/v得到/v新的/a单例/gi。/w代码/gi如下/vi这样/rzv，/w每次/r运行/gi都会/n产生/v新的/a单例/gi对象/gi。/w所以/c运用/v单例模式/gi时/qt，/w一定/b注意/v不要/d使用/gi反射/gi产生/v新的/a单例/gi对象/gi。/w懒汉式/gi单例/gi线程安全/gi吗/y /x主要/b是/vshi网上/s的/ude1一些/m说法/n，/w懒汉式/gi的/ude1单例模式/gi是/vshi线程/gi不/d安全/gi的/ude1，/w即使/c是/vshi在/p实例化/gi对象/gi的/ude1方法/gi上/f加/vsynchronized/nz关键字/gi，/w也/d依然/d是/vshi危险/an的/ude1，/w但是/c笔者/n经过/p编码/gi测试/gi，/w发现/v加/vsynchronized/nz关键字/gi修饰/v后/f，/w虽然/c对/p性能/gi部分/n影响/gi，/w但是/c却是/d线程安全/gi的/ude1，/w并/cc不会/v产生/v实例化/gi多/a个/q对象/gi的/ude1情况/n。/w单例模式/gi只/d饿汉式/gi和/cc懒汉式/gi两/nz种/q吗/y /x饿汉式单例/gi和/cc懒汉式/gi单例/gi只是/d两种/nz比较/gi主流/gi和/cc常用/a的/ude1单例模式/gi方法/gi，/w从/p理论上/nz讲/v，/w任何/rz可以/v实现/gi一个/mq类/gi只有/c一个/mq实例/gi的/ude1设计模式/nz，/w都/d可以/v称为/v单例模式/gi。/w单例/gi类/gi可以/v被/pbei继承/gi吗/y  /x饿汉式单例/gi和/cc懒汉式/gi单例/gi由于/p构造方法/gi是/vshiprivate/nz的/ude1，/w所以/c他们/rr都/d是/vshi不可/v继承/gi的/ude1，/w但是/c其他/rzv很/d多/a单例模式/gi是/vshi可以/v继承/gi的/ude1，/w例如/v登记/gi式/k单例/gi。/w饿汉式单例/gi好/a还是/c懒汉式/gi单例/gi好/a /x在/pjava/gi中/f，/w饿汉式单例/gi要/v优于/v懒汉式/gi单例/gi。/wc/nz中/f则/d一般/ad使用/gi懒汉式/gi单例/gi。/w单例模式/gi比较简单/l，/w在/p此/rzs就/d不/d举例/gi代码/gi演示/gi了/ule。/w