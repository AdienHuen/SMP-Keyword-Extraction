#图解/vHTTPS/nz协议/gi加密/gi解密/gi全过程/n
转/v：/w我们/rr都/d知道/vhttps/gi能够/v加密/gi信息/gi，/w以免/c敏感/gi信息/gi被/pbei第三方/nz获取/gi。/w所以/c很/d多/a银行/gi网站/gi或/c电子邮箱/nz等等/udeng安全级别/nz较高/ad的/ude1服务/gi都会/n采用/vhttps/gi协议/gi。/w　　/nzhttps/gi简介/gi　　/nzhttps/gi其实/d是/vshi有/vyou两/nz部分/n组成/gi：/whttp  ssl /nz//nz tls/nz，/w也/d就是/v在/phttp/gi上/f又/d加/v了/ule一层/nz处理/vn加密/gi信息/gi的/ude1模块/gi。/w服务端/nz和/cc客户端/gi的/ude1信息/gi传输/gi都会/n通过/ptls/nz进行/vn加密/gi，/w所以/c传输/gi的/ude1数据/gi都/d是/vshi加密/gi后/f的/ude1数据/gi。/w具体/a是/vshi如何/ryv进行/vn加密/gi，/w解密/gi，/w验证/v的/ude1，/w且/c看/v下图/n。/w　　/nz1./nz /x客户端/gi发起/vhttps/gi请求/gi　　/nz这个/rz没什么/vl好说/a的/ude1，/w就是/v用户/gi在/p浏览器/gi里/f输入/v一个/mqhttps/gi网址/gi，/w然后/c连接/gi到/vserver/gi的/ude1443/nz端口/gi。/w　　/nz2./nz /x服务端/nz的/ude1配置/gi　　/nz采用/vhttps/gi协议/gi的/ude1服务器/gi必须/d要/v有一套/r数字证书/nz，/w可以/v自己/rr制作/gi，/w也/d可以/v向/p组织/gi申请/v。/w区别/gi就是/v自己/rr颁发/v的/ude1证书/gi需要/v客户端/gi验证/v通过/p，/w才/d可以/v继续/v访问/gi，/w而/cc使用/gi受/v信任/vn的/ude1公司/nis申请/v的/ude1证书/gi则/d不会/v弹出/vf提示/gi页面/gi(/nzstartssl/nz就是/v个/q不错/a的/ude1选择/gi，/w有/vyou1/nz年/qt的/ude1免费/vd服务/gi)/nz。/w这套/r证书/gi其实/d就是/v一/nz对/p公钥/gi和/cc私钥/gi。/w如果/c对/p公钥/gi和/cc私钥/gi不/d太/d理解/gi，/w可以/v想象/v成/v一/nz把/pba钥匙/n和/cc一个/mq锁头/n，/w只是/d全世界/n只有/c你/rr一/nz个人/n有/vyou这/rzv把/pba钥匙/n，/w你/rr可以/v把/pba锁头/n给/p别人/rr，/w别人/rr可以/v用/p这个/rz锁/v把/pba重要/a的/ude1东西/n锁起来/v，/w然后/c发给你/l，/w因为/c只有/c你/rr一/nz个人/n有/vyou这/rzv把/pba钥匙/n，/w所以/c只有/c你/rr才能/n看到/v被/pbei这/rzv把/pba锁锁/nz起来/vf的/ude1东西/n。/w　　/nz3./nz /x传送/v证书/gi　　/nz这个/rz证书/gi其实/d就是/v公钥/gi，/w只是/d包含/v了/ule很/d多/a信息/gi，/w如/v证书/gi的/ude1颁发/v机构/n，/w过期/gi时间/gi等等/udeng。/w　　/nz4./nz /x客户端/gi解析/gi证书/gi　　/nz这/rzv部分/n工作/gi是/vshi有/vyou客户端/gi的/ude1tls/nz来/vf完成/v的/ude1，/w首先/d会/v验证/v公钥/gi是否/v有效/gi，/w比如/v颁发/v机构/n，/w过期/gi时间/gi等等/udeng，/w如果/c发现异常/l，/w则/d会/v弹出/vf一个/mq警告/vn框/ng，/w提示/gi证书/gi存在/v问题/gi。/w如果/c证书/gi没有/v问题/gi，/w那么/c就/d生成/v一个/mq随机/b。/w然后/c用/p证书/gi对/p该/rz随机/b进行/vn加密/gi。/w就/d好像/v上面/f说/v的/ude1，/w把/pba随机/b用/p锁头/n锁起来/v，/w这样/rzv除非/c有/vyou钥匙/n，/w不然/c看不到/v被/pbei锁住/v的/ude1内容/gi。/w　　/nz5./nz /x传送/v加密/gi信息/gi　　/nz这/rzv部分/n传送/v的/ude1是/vshi用/p证书/gi加密/gi后/f的/ude1随机/b，/w目的/gi就是/v让/v服务端/nz得到/v这个/rz随机/b，/w以后/f客户端/gi和/cc服务端/nz的/ude1通信/gi就/d可以/v通过/p这个/rz随机/b来/vf进行/vn加密/gi解密/gi了/ule。/w　　/nz6./nz /x服务段/nz解密/gi信息/gi　　/nz服务端/nz用/p私钥/gi解密/gi后/f，/w得到/v了/ule客户端/gi传过来/l的/ude1随机/b(/nz私钥/gi)/nz，/w然后/c把/pba内容/gi通过/p该/rz进行/vn对称加密/gi。/w所谓/v对称加密/gi就是/v，/w将/d信息/gi和/cc私钥/gi通过/p某种/rz算法/gi混合/vn在/p一起/s，/w这样/rzv除非/c知道/v私钥/gi，/w不然/c无法/v获取/gi内容/gi，/w而/cc正好/z客户端/gi和/cc服务端/nz都/d知道/v这个/rz私钥/gi，/w所以/c只要/c加密/gi算法/gi够/v彪悍/nz，/w私钥/gi够/v复杂/a，/w数据/gi就/d够/v安全/gi。/w　　/nz7./nz /x传输/gi加密/gi后/f的/ude1信息/gi　　/nz这/rzv部分/n信息/gi是/vshi服务/gi段/q用/p私钥/gi加密/gi后/f的/ude1信息/gi，/w可以/v在/p客户端/gi被/pbei还原/gi。/w　　/nz8./nz /x客户端/gi解密/gi信息/gi　　/nz客户端/gi用/p之前/f生成/v的/ude1私钥/gi解密/gi服务段/nz传过来/l的/ude1信息/gi，/w于是/cc获取/gi了解/v密/a后/f的/ude1内容/gi。/w整个/b过程/gi第三方/nz即使/c监听/gi到/v了/ule数据/gi，/w也/d束手无策/vl。/w