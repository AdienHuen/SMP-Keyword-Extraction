#RAC/nz（/wOracle/gi网格计算/gi技术/gi）/w
是/vshioracle real application cluster/nz的/ude1简写/n，/w官方/gi中文/gi文档/gi一般/ad翻译/gi为/p“/w真正/d应用/gi集群/gi”/w，/w它/rr一般/ad有/vyou两/nz台/q或者/c两/nz台/q以上/f同构/gm及/cc共享/gi存储设备/nz构成/v，/w可/v提供/v强大/a的/ude1数据库/gi处理/vn能力/gi，/w现在/t是/vshioracle /nz10/nzg grid/nz应用/gi的/ude1重要/a组成/gi部分/n。/wrac/gi（/wrace game/nz）/w指/v竞速/nz类/gi游戏/gi。/woracle rac/nz是/vshioracle real application cluster/nz的/ude1简写/n，/w官方/gi中文/gi文档/gi一般/ad翻译/gi为/p“/w真正/d应用/gi集群/gi”/w，/w是/vshioracle/gi9/nzi/nz新版/b数据库/gi中/f采用/v的/ude1一项/nz新技术/nz，/w也/d是/vshi支持/v环境/n的/ude1核心技术/nz。/w它/rr的/ude1出现/v解决/v了/ule应用/gi中/f面临/v的/ude1一个/mq重要/a问题/gi：/w高性能/gi、/w高/a可伸缩性/l与/cc低价/n之间/f的/ude1矛盾/gi!/nz不同/a的/ude1集群/gi产品/gi都/d有/vyou自己/rr的/ude1特点/n，/wrac/gi的/ude1特点/n包括/v如下/vi几点/nz：/w /x双机/n并行/vn。/wrac/gi是/vshi一种/nz并行/vn模式/gi，/w并/cc不是/c传统/n的/ude1主备/nz模式/gi。/w也/d就是说/c，/wrac/gi集群/gi的/ude1所有/b成员/nnt都/d可以/v同时/c接收/gi客户端/gi的/ude1请求/gi。/w /x高可用性/n。/wrac/gi是/vshioracle数据库/gi产品/gi高可用性/n的/ude1解决方案/gi，/w能够/v保证/v在/p集群/gi中/f只要/c有/vyou一个/mq节/q不同/a的/ude1集群/gi产品/gi都/d有/vyou自己/rr的/ude1特点/n，/wrac/gi的/ude1特点/n包括/v如下/vi几点/nz：/w /x・双机/nz并行/vn。/wrac/gi是/vshi一种/nz并行/vn模式/gi，/w并/cc不是/c传统/n的/ude1主备/nz模式/gi。/w也/d就是说/c，/wrac/gi集群/gi的/ude1所有/b成员/nnt都/d可以/v同时/c接收/gi客户端/gi的/ude1请求/gi。/w /x・高/nz可用性/gi。/wrac/gi是/vshioracle数据库/gi产品/gi高可用性/n的/ude1解决方案/gi，/w能够/v保证/v在/p集群/gi中/f只要/c有/vyou一个/mq节点/gi存活/vi，/w就/d能/v正常/a对外/vn提供/v服务/gi。/w /x・/w易/ad伸缩性/gi。/wrac/gi可以/v非常容易/l地/ude2添加/gi、/w删除/gi节点/gi，/w以/p满足/v系统/gi自身/rr的/ude1调整/vn。/w /x・低成本/nz。/w能/v使用/gi较低/d廉/ag的/ude1服务器/gi来/vf实现/gi高可用性/n、/w高/a吞吐量/gi的/ude1集群/gi环境/n，/w这/rzv要/v比/p通过/p对/p某/rz台/q高端/nz服务器/gi增加/v硬件/gi实现/gi高可用性/n、/w高/a吞吐量/gi花费/v的/ude1成本低/n很/d多/a。/w /x・高/nz吞吐量/gi。/w随着/p节点/gi数/n的/ude1增加/v，/w整个/brac/gi的/ude1吞吐量/gi也/d在/p不断/d增长/gi。/w /x下面/f详细/gi讨论/gi这/rzv五大/n特点/n。/w /x一/nz、/w双机/n并行/vn rac/nz是/vshi一种/nz充分利用/n服务器资源/nz的/ude1高可用性/n实现/gi方案/gi，/wrac/gi的/ude1并行/vn模式/gi实现/gi方式/n与/cc传统/n的/ude1双机/n热备/nz实现/gi方式/n截然不同/vl，/w图/gi1/nz-/nz4/nz是/vshi两者/rzv的/ude1比较/gi。/w /x如/v图/gi1/nz-/nz4/nz所示/nz，/w两/nz个/q节点/gi在/p传统/n的/ude1双机/n热备/nz环境/n中/f，/w始终/d有/vyou一/nz台/q机器/gi作为/p备用机/n，/w只有/c当/p主/ag节点/gi出现/v问题/gi的/ude1时候/n才/d会/v切换/vn到/v备用/vn机上/s；/w如果/c主机/gi一直/d没有/v出现/v问/v /x题/n，/w那么/c备用机/n始终/d处于/v空闲/gi状态/gi，/w这/rzv在/p资源/gi的/ude1利用/v上/f以及/cc成本/n方面/n都/d是/vshi巨大/a的/ude1浪费/gi。/w但/crac/gi是/vshi一种/nz并行/vn模式/gi的/ude1架构/gi，/w也/d就是说/c，/w两/nz个/q节点/gi的/ude1集群/gi节点/gi间/f是/vshi一种/nz并/cc /x行/ng运行/gi的/ude1关系/gi，/w当/p一/nz台/q机器/gi出现/v问题/gi，/w请求/gi会/v自动/d转发/gi到/v另一台/nz机器/gi，/w没有/v任何/rz一台/nz机器/gi作为/p备用机/n一直/d不/d被/pbei使用/gi，/w这样/rzv就/d充分利用/n了/ule服务器资源/nz。/w同时/c，/w传统/n的/ude1双/q /x机/ng热备/nz构架/n在/p出现/v问题/gi时/qt，/w常常/d需要/v数/n分钟/qt的/ude1切换/vn时间/gi，/w而/ccrac/gi在/p出现/v问题/gi时/qt，/w针对/gi存在/v的/ude1会话/v只/d需要/v数/n十秒/nz的/ude1时间/gi就/d可以/v完成/v失败/vi切换/vn过程/gi，/w对/p新/a会话/v的/ude1创建/gi不/d /x会/v产生/v影响/gi，/w在/p切换/vn时间/gi上/f也/d有/vyou比较/gi大/a的/ude1优势/gi。/woracle rac/nz的/ude1五大/n优势/gi及其/cc劣势/n src/nz=/nz href/nz=/nz//nzpicshow/nz//nzindex/nz1154817./nzshtml/nz▲/w图/gi1/nz-/nz4/nz /x双机/n热备/nz与/ccrac/gi并行/vn模式/gi对比/gi　　二/nz、/w高可用性/n　　/nzrac/gi是/vshioracle数据库/gi高可用性/n解决方案/gi。/w高可用性/n包含/v两/nz部分/n的/ude1内容/gi：/w首先/d是/vshi在/p这种/r解决方案/gi下/f要/v确保/v数据/gi不/d丢失/v，/w这/rzv是/vshi最/d基础/gi的/ude1也/d是/vshi必须/d要/v保证/v的/ude1;/nz其次/c是/vshi确保/v不停机/nz，/w使/voracle数据库/gi一直/d维持/v在/p正常/a的/ude1运行/gi状态/gi，/w避免/v停机/vi给/p客户/n带来/v的/ude1损失/n，/w这/rzv是/vshi讨论/gi最多/ad的/ude1内容/gi。/w　　/nz停机/vi一般/ad分为/v两/nz类/gi，/w计划/gi停机/vi和/cc非/b计划/gi停机/vi。/w所谓/v计划/gi停机/vi是/vshi有/vyou计划/gi地/ude2安排/v节点/gi或者/c系统/gi的/ude1停机/vi，/w一般/ad在/poracle/gi升/v /x级/q、/w系统维护/gi或者/c硬件/gi维护/gi的/ude1情况下/nz会/v出现/v。/w非/b计划/gi停机/vi就是/v在/p非/b人/n为/p计划/gi的/ude1情况下/nz突然/ad停机/vi，/w这种/r情况/n一般/ad是/vshi在/poracle bug/nz、/w系统故障/gi、/w硬件/gi故障/gi或/c人/n为/p操作/gi失败/vi的/ude1时候/n出现/v。/w　　/nz在/p没有/v较高/ad花费/v的/ude1情况下/nz，/w想/v实现/gi系统/gi100%/nz的/ude1不/d停机/vi几乎/d是/vshi不/d可能/v的/ude1。/w表/n1/nz-/nz1/nz列出/v了/ule特定/b百分比/n高可用性/n比率/n运行/gi停机/vi的/ude1时间/gi，/w详细/gi记录/gi了/ule每种/r高可用性/n比率/n每年/r、/w每月/r、/w每周/r可以/v出现/v最大/gm的/ude1停机/vi时间/gi。/w　　/nz通常/d情况下/nz，/w以/p每月/r停机/vi时间/gi来/vf计算/gi对应/vi的/ude1可用性/gi比率/n。/w根据/p系统/gi的/ude1重要性/n情况/n，/w应该/v为/p系统/gi设定/v合理/a的/ude1可用性/gi比率/n。/w　　/nz集群/gi最大/gm的/ude1优势/gi在于/v它/rr的/ude1高可用性/n，/w通过/p使用/girac/gi可以/v在/p一定/b程度/n上/f避免/v因为/c硬件/gi或/c软件故障/nz引起/v的/ude1数据/gi丢失/v和/cc非/b计划/gi停机/vi，/w并/cc在/p一定/b程度/n上/f减少/v或/c排除/gi计划/gi停机/vi时间/gi。/w这/rzv是/vshi很/d多/a客户/n选择/girac/gi的/ude1最/d直接原因/nz。/w　　/nzrac/gi中/f包含/v了/ule非常/d多/a的/ude1高/a可用/v特性/gi，/w主要/b包含/v如下/vi几点/nz：/w　　・实现/nz节点/gi间/f的/ude1负载均衡/gi。/w　　・实现/nz失败/vi切换/vn的/ude1功能/gi。/w　　・通过/nzservice/gi组件/gi来/vf控制/vn客户端/gi的/ude1访问/gi路径/gi。/w　　・集群/nz软件/gi能够/v自动化/gi管理/gi各个/rz资源/gi，/w并且/c有定/nz时/qt的/ude1节点/gi状态/gi检测/gi机制/gi，/w能/v自动/d对/p一些/m失败/vi的/ude1进程/gi以及/cc心跳/vi检测/gi失败/vi的/ude1节点/gi进行/vn重启/gi，/w使/v其/rz重新/d恢复/gi到/v正常/a的/ude1运行/gi状态/gi。/w　　/nz在/poracle /nz11/nzgr/nz2/nz版本/n中/f，/wclusterware/nz得到/v了/ule改善/v，/w提供/v了/ule更高/d的/ude1可用性/gi。/w例如/v，/w大量/m新的/a基于/p代理/gi的/ude1监控/gi系统/gi用于/v监控/gi所有/b的/ude1资源/gi。/w这些/rz代理/gi使用/gi更少/d的/ude1资/ng /x源/ng执行/v更/d频繁/a的/ude1检查/gi，/w即/v更/d快速/d的/ude1失败/vi扫描/gi和/cc更/d短/a的/ude1恢复/gi时间/gi。/w在/poracle/gi监听/gi的/ude1例子/gi中/f，/w平均/a失败/vi扫描时间/n从/p5/nz分钟/qt减少/v到/v30/nz秒/qt，/w同时/c，/w检查/gi间隔/n从/p每/rz10/nz /x分钟/qt减少/v到/v1/nz分钟/qt。/w另外/c，/wclusterware/nz的/ude1“/wout/nz-/nzof/nz-/nzplace upgrade/nz”/w等/udeng特性/gi也/d减少/v了/ule软件维护/gi需要/v的/ude1停机/vi时间/gi。/w　　三/nz、/w易/ad伸缩性/gi　　/nzrac/gi为/p需要/v重新/d规划/gi的/ude1应用/gi提供/v了/ule易/ad扩展性/n。/w为了/p在/p系统/gi初始/b阶段/gi保持/v较低/d的/ude1成本/n，/w避免/v造成/v不必要/a的/ude1浪费/gi，/w集群/gi可以/v按照/p标准/gi硬件/gi配置/gi，/w选择/gi适当/a的/ude1服务器资源/nz、/w存储资源/n来/vf搭建/v数据库/gi环境/n。/w当/p系统/gi需要/v更多/ad的/ude1处理/vn能力/gi或者/c需要/v增加/v存储/gi时/qt，/w通过/p添加/gi另一台/nz服务器/gi或/c存储设备/nz到/v集群/gi中/f，/w能够/v在/p不停机/nz的/ude1情况下/nz获得/v水平/n的/ude1扩展/gi。/w在/p一个/mq集群/gi中/f，/w clusterware/nz和/ccrac/gi支持/v多达/v100/nz个/q集群/gi节点/gi。/w　　/nz当/p某个/rz集群/gi的/ude1处理/vn能力/gi过剩/vi，/w另一个/nz集群/gi的/ude1处理/vn能力/gi不够/a时/qt，/w可以/v从/p处理/vn能力/gi过剩/vi的/ude1集群/gi移动/vn一个/mq节点/gi到/v处理/vn能力/gi不够/a的/ude1集/q /x群/ng中/f。/w这样/rzv能够/v充分利用/n服务器资源/nz，/w节约/v成本/n。/w11/nzgr/nz2/nz版本/n中/f推出/v了/ule网/n即插即用/gi(/nzgrid plug and play/nz，/wgpnp/nz)/nz，/w可以/v实现/gi节点/gi的/ude1快速/d添加/gi。/w　　四/nz、/w低成本/nz　　/nz通过/p多/a台/q普通/a的/ude1pc/nz服务器/gi组成/gi一个/mq集群/gi，/w可以/v提高/v集群/gi的/ude1处理/vn能力/gi，/w这样/rzv要/v比/p采用/v一/nz台/q高性能/gi的/ude1服务器/gi的/ude1成本低/n很/d多/a。/w如/v /x果想/nz提高/v系统/gi的/ude1处理/vn能力/gi，/w给/p集群/gi添加/gi节点/gi比为/d高性能/gi服务器/gi添加/gi硬件/gi要/v容易/ad得/ude3多/a。/w另外/c，/w使用/gi集群/gi还/d能/v动态/gi地/ude2移除/v节点/gi，/w更加/d充分/ad地/ude2利用/v管理者/nnt掌握/v的/ude1所有/b服务器/gi /x资源/gi，/w从/p服务器/gi整体/n使用/gi上/f降低/v了/ule服务器/gi的/ude1采购/vn成本/n。/w越来越/d多/a的/ude1企业/gi愿意/v将/d集群/gi解决方案/gi应用/gi到/v他们/rr的/ude1系统/gi中/f，/w以/p降低成本/v，/w提高/v系统/gi的/ude1可用性/gi。/w　　五/nz、/w高/a吞吐量/gi　　/nzrac/gi是/vshi由/p多/a台/q服务器/gi构成/v的/ude1逻辑/n主体/n，/w比/p单台/nz数据库服务器/gi能/v接收/gi更多/ad的/ude1客户端/gi请求/gi。/w这/rzv在/p要求/n高/a吞吐量/gi的/ude1系统/gi中/f，/w能够/v /x得到/v非常/d明显/a的/ude1体现/v。/w在/prac/gi的/ude1架构/gi中/f，/w多/a个/q实例/gi分布/vi在/p多/a个/q服务器/gi上/f，/w能/v同时/c打开/gi同一个/b数据库/gi，/w而/cc每个/r实例/gi能够/v接收/gi相等/vi数量/n的/ude1客户端/gi请求/gi，/w这样/rzv，/w随着/p服务/gi /x器/ng的/ude1增加/v，/w吞吐量/gi也/d在/p不断/d地/ude2增加/v。/w　　/nz在/p以上/f讨论/gi的/ude1特点/n中/f，/w高可用性/n是/vshirac/gi最大/gm的/ude1特点/n。/w　　/nzrac/gi存在的问题/gi　　/nz虽然/crac/gi有/vyou非常/d多/a的/ude1优点/gi，/w但/c由于/p部署/gi一套/nzrac/gi会/v涉及/v服务器/gi、/w存储设备/nz、/whba/nz卡/n、/w操作系统/gi等/udeng多方面/n的/ude1技术/gi，/w且/c从/p实现/gi上/f要/v比/p单/b实例/gi数据库/gi更/d复杂/a，/w对/p硬件/gi设备/gi的/ude1稳定性/n、/w设备/gi之间/f以及/cc设备/gi与/cc操作系统/gi的/ude1兼容性/gi上/f要求/n也/d更高/d，/woracle/gi的/ude1bug/gi也/d会/v造成/vrac/gi运行/gi出现/v问题/gi。/w所以/c，/w从/p实际/n的/ude1运行/gi情况/n来看/u，/wrac/gi要/v比/p单/b实例/gi的/ude1数据库/gi存在/v更多/ad的/ude1问题/gi，/w问题/gi的/ude1原因/n也/d各不相同/l。/wrac/gi存在的问题/gi主要/b体现/v在/p稳定性/n和/cc高性能/gi方面/n，/w下面/f讨论/gi这/rzv两/nz个/q问题/gi。/w　　一/nz、/w稳定性/n　　/nz数据库/gi的/ude1稳定/an运行/gi是/vshi系统/gi稳定/an运行/gi的/ude1基础/gi和/cc前提/n，/w数据库/gi的/ude1运行/gi依赖于/v操作系统/gi、/w服务器/gi、/w存储设备/nz等/udeng软硬件/gi设备/gi的/ude1运行/gi情况/n。/w　　/nz由于/p各种/rz硬件/gi设备/gi、/w操作系统/gi的/ude1厂商/gi不同/a，/w有时候/d在/p兼容性/gi上会/j存在/v问题/gi，/w即使/c同一个/b厂商/gi的/ude1服务器/gi，/w由于/p驱动/gi、/w固件/n版本/n的/ude1不同/a也/d可能/v导致/gi硬件/gi出现/v问题/gi以及/cc与/cc其他/rzv设备/gi的/ude1兼容性问题/nz。/w同时/c，/w由于/prac/gi本身/rz也/d存在/v不/d少/abug/gi，/w很/d多/a部署/gi的/ude1rac/gi环境/n缺乏/v在/p上线/n前/f对/p环境/n的/ude1检查和/n测试/gi，/w导致/gi在/p运行/gi过程/gi中/f出现/v一系列/b不/d稳定/an的/ude1情况/n，/w这样/rzv高可用性/n并/cc没有/v得到/v充分/ad的/ude1体现/v。/w　　/nz由此来看/nz，/w稳定/an的/ude1硬件/gi环境/n加上/v稳定/an的/ude1rac/gi版本/n，/w决定/v着/uzherac/gi运行/gi的/ude1稳定性/n。/w数据库/gi工程师/gi与/cc硬件/gi工程师/gi在/p安装/gi配置/gi前/f大量/m的/ude1环境/n检查/gi、/w验证/v，/w以及/cc部署/gi后/f的/ude1大量/m测试/gi工作/gi都/d是/vshi非常/d重要/a的/ude1。/w　　二/nz、/w高性能/gi　　/nz高性能/gi也/d是/vshi大部分/n从/p单机/n环境/n迁移/gi到/vrac/gi环境/n比较/gi头疼/a的/ude1问题/gi，/wrac/gi并/cc不是/c高性能/gi的/ude1解决方案/gi。/w在/p目前/t普遍/ad使用/gi千兆网/nz /x络/ng的/ude1硬件/gi环境/n中/f，/w很/d多/a时候/n系统/gi的/ude1数据库/gi从/p原来/d的/ude1单机/n迁移/gi至/prac/gi环境/n，/w系统/gi的/ude1性能/gi反而/d下降/vi。/w在/p这种/r情况下/nz，/w数据库管理员/nnt应该/v根据/prac/gi的/ude1特点/n对系统/l调整/vn提/v /x出/vf合理/a的/ude1建议/gi，/w经过/p合理/a的/ude1设计/gi、/w开发/gi，/w使用/girac/gi是/vshi能够/v提高/v系统/gi的/ude1处理/vn性能/gi的/ude1。/w　　/nz以上/f两/nz个/q问题/gi是/vshi需要/v特别注意/i的/ude1。/w另外/c，/w与/cc硬件/gi工程师/gi、/w系统/gi开发人员/n进行/vn良好/a的/ude1沟通/gi，/w以及/cc对系统/l合理/a的/ude1设计/gi是/vshi保证/vrac/gi稳定/an运行/gi和/cc高性能/gi运行/gi的/ude1前提/n。/w /x